{"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nrequire(\"dotenv/config\");\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _database = _interopRequireDefault(require(\"./database\"));\n\nvar _auth = _interopRequireDefault(require(\"./routes/auth.routes\"));\n\nvar _owner = _interopRequireDefault(require(\"./routes/owner.routes\"));\n\nvar _vehicle = _interopRequireDefault(require(\"./routes/vehicle.routes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import Swaggiffy for documentation\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_express.default.json());\napp.get('/', (req, res) => {\n  res.send({\n    message: 'Welcome to the Vehicle tracking system API',\n    client: \"Rwanda Revenue Authority\"\n  });\n});\napp.use('/api/v1/auth', _auth.default);\napp.use('/api/v1/owners', _owner.default);\napp.use('/api/v1/vehicles', _vehicle.default);\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => {\n  console.log(\"App running on port ...  \" + PORT);\n}); // Setup Swaggiffy for documentation\n\nnew _swaggiffy.Swaggiffy().setupExpress(app).swaggiffy();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiY29ycyIsImpzb24iLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwibWVzc2FnZSIsImNsaWVudCIsImF1dGhSb3V0ZSIsIm93bmVyc1JvdXRlIiwidmVoaWNsZXNSb3V0ZSIsIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsIlN3YWdnaWZmeSIsInNldHVwRXhwcmVzcyIsInN3YWdnaWZmeSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnZG90ZW52L2NvbmZpZyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IFN3YWdnaWZmeSB9IGZyb20gJ3N3YWdnaWZmeSc7IC8vIEltcG9ydCBTd2FnZ2lmZnkgZm9yIGRvY3VtZW50YXRpb25cbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGRiIGZyb20gJy4vZGF0YWJhc2UnO1xuaW1wb3J0IGF1dGhSb3V0ZSBmcm9tICcuL3JvdXRlcy9hdXRoLnJvdXRlcyc7XG5pbXBvcnQgb3duZXJzUm91dGUgZnJvbSAnLi9yb3V0ZXMvb3duZXIucm91dGVzJztcbmltcG9ydCB2ZWhpY2xlc1JvdXRlIGZyb20gJy4vcm91dGVzL3ZlaGljbGUucm91dGVzJztcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKGNvcnMoKSlcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnNlbmQoe1xuICAgICAgICBtZXNzYWdlOiAnV2VsY29tZSB0byB0aGUgVmVoaWNsZSB0cmFja2luZyBzeXN0ZW0gQVBJJyxcbiAgICAgICAgY2xpZW50OiBcIlJ3YW5kYSBSZXZlbnVlIEF1dGhvcml0eVwiLFxuICAgIH0pXG59KTtcblxuYXBwLnVzZSgnL2FwaS92MS9hdXRoJywgYXV0aFJvdXRlKTtcbmFwcC51c2UoJy9hcGkvdjEvb3duZXJzJywgb3duZXJzUm91dGUpO1xuYXBwLnVzZSgnL2FwaS92MS92ZWhpY2xlcycsIHZlaGljbGVzUm91dGUpO1xuXG5cbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDUwMDA7XG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkFwcCBydW5uaW5nIG9uIHBvcnQgLi4uICBcIiArIFBPUlQpO1xufSlcblxuLy8gU2V0dXAgU3dhZ2dpZmZ5IGZvciBkb2N1bWVudGF0aW9uXG5uZXcgU3dhZ2dpZmZ5KCkuc2V0dXBFeHByZXNzKGFwcCkuc3dhZ2dpZmZ5KCk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFMdUM7QUFPdkMsTUFBTUEsR0FBRyxHQUFHLElBQUFDLGdCQUFBLEdBQVo7QUFFQUQsR0FBRyxDQUFDRSxHQUFKLENBQVEsSUFBQUMsYUFBQSxHQUFSO0FBQ0FILEdBQUcsQ0FBQ0UsR0FBSixDQUFRRCxnQkFBQSxDQUFRRyxJQUFSLEVBQVI7QUFFQUosR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixFQUFhLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0VBQ3ZCQSxHQUFHLENBQUNDLElBQUosQ0FBUztJQUNMQyxPQUFPLEVBQUUsNENBREo7SUFFTEMsTUFBTSxFQUFFO0VBRkgsQ0FBVDtBQUlILENBTEQ7QUFPQVYsR0FBRyxDQUFDRSxHQUFKLENBQVEsY0FBUixFQUF3QlMsYUFBeEI7QUFDQVgsR0FBRyxDQUFDRSxHQUFKLENBQVEsZ0JBQVIsRUFBMEJVLGNBQTFCO0FBQ0FaLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLGtCQUFSLEVBQTRCVyxnQkFBNUI7QUFHQSxNQUFNQyxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixJQUFaLElBQW9CLElBQWpDO0FBQ0FkLEdBQUcsQ0FBQ2lCLE1BQUosQ0FBV0gsSUFBWCxFQUFpQixNQUFNO0VBQ25CSSxPQUFPLENBQUNDLEdBQVIsQ0FBWSw4QkFBOEJMLElBQTFDO0FBQ0gsQ0FGRCxFLENBSUE7O0FBQ0EsSUFBSU0sb0JBQUosR0FBZ0JDLFlBQWhCLENBQTZCckIsR0FBN0IsRUFBa0NzQixTQUFsQyJ9","map":{"version":3,"names":["app","express","use","cors","json","get","req","res","send","message","client","authRoute","ownersRoute","vehiclesRoute","PORT","process","env","listen","console","log","Swaggiffy","setupExpress","swaggiffy"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/","sources":["index.js"],"sourcesContent":["import 'dotenv/config';\nimport express from 'express';\nimport { Swaggiffy } from 'swaggiffy'; // Import Swaggiffy for documentation\nimport cors from 'cors';\nimport db from './database';\nimport authRoute from './routes/auth.routes';\nimport ownersRoute from './routes/owner.routes';\nimport vehiclesRoute from './routes/vehicle.routes';\n\nconst app = express();\n\napp.use(cors())\napp.use(express.json());\n\napp.get('/', (req, res) => {\n    res.send({\n        message: 'Welcome to the Vehicle tracking system API',\n        client: \"Rwanda Revenue Authority\",\n    })\n});\n\napp.use('/api/v1/auth', authRoute);\napp.use('/api/v1/owners', ownersRoute);\napp.use('/api/v1/vehicles', vehiclesRoute);\n\n\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => {\n    console.log(\"App running on port ...  \" + PORT);\n})\n\n// Setup Swaggiffy for documentation\nnew Swaggiffy().setupExpress(app).swaggiffy();\n"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AALuC;AAOvC,MAAMA,GAAG,GAAG,IAAAC,gBAAA,GAAZ;AAEAD,GAAG,CAACE,GAAJ,CAAQ,IAAAC,aAAA,GAAR;AACAH,GAAG,CAACE,GAAJ,CAAQD,gBAAA,CAAQG,IAAR,EAAR;AAEAJ,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;EACvBA,GAAG,CAACC,IAAJ,CAAS;IACLC,OAAO,EAAE,4CADJ;IAELC,MAAM,EAAE;EAFH,CAAT;AAIH,CALD;AAOAV,GAAG,CAACE,GAAJ,CAAQ,cAAR,EAAwBS,aAAxB;AACAX,GAAG,CAACE,GAAJ,CAAQ,gBAAR,EAA0BU,cAA1B;AACAZ,GAAG,CAACE,GAAJ,CAAQ,kBAAR,EAA4BW,gBAA5B;AAGA,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACAd,GAAG,CAACiB,MAAJ,CAAWH,IAAX,EAAiB,MAAM;EACnBI,OAAO,CAACC,GAAR,CAAY,8BAA8BL,IAA1C;AACH,CAFD,E,CAIA;;AACA,IAAIM,oBAAJ,GAAgBC,YAAhB,CAA6BrB,GAA7B,EAAkCsB,SAAlC"}},"mtime":1657104457937},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst env = process.env.NODE_ENV || \"development\";\nconst DB_URL = env === \"container\" ? process.env.DB_URL_TEST : env === \"production\" ? process.env.DB_URL_PROD : env === \"development\" ? process.env.DB_URL_DEV : process.env.DB_URL_DEV;\n\nconst db = _mongoose.default.connect(\"mongodb+srv://sandberg-g:jLx6i4RujUt84k4@cluster0.mjmat.mongodb.net/vhmis?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}).then(connection => {\n  console.log(\"Connected to MongoDB Successful\");\n}).catch(err => {\n  console.log(\"Database url: \" + DB_URL);\n  console.log(err);\n});\n\nvar _default = db;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJEQl9VUkwiLCJEQl9VUkxfVEVTVCIsIkRCX1VSTF9QUk9EIiwiREJfVVJMX0RFViIsImRiIiwibW9uZ29vc2UiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidGhlbiIsImNvbm5lY3Rpb24iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiXSwic291cmNlUm9vdCI6Ii9ob21lL3JjYS9EZXNrdG9wL3Jlc3RmdWwtcHJhY3RpY2FsL3NlcnZlci9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2RvdGVudi9jb25maWcnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcImRldmVsb3BtZW50XCI7XG5jb25zdCBEQl9VUkwgPVxuICAgIGVudiA9PT0gXCJjb250YWluZXJcIiA/IHByb2Nlc3MuZW52LkRCX1VSTF9URVNUIDpcbiAgICAgICAgZW52ID09PSBcInByb2R1Y3Rpb25cIiA/IHByb2Nlc3MuZW52LkRCX1VSTF9QUk9EIDpcbiAgICAgICAgICAgIGVudiA9PT0gXCJkZXZlbG9wbWVudFwiID8gcHJvY2Vzcy5lbnYuREJfVVJMX0RFViA6XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuREJfVVJMX0RFVjtcblxuY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0KFwibW9uZ29kYitzcnY6Ly9zYW5kYmVyZy1nOmpMeDZpNFJ1alV0ODRrNEBjbHVzdGVyMC5tam1hdC5tb25nb2RiLm5ldC92aG1pcz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIiwge1xuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG59KVxuLnRoZW4oKGNvbm5lY3Rpb24pID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RlZCB0byBNb25nb0RCIFN1Y2Nlc3NmdWxcIik7XG59KVxuLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSB1cmw6IFwiK0RCX1VSTCk7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGRiOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUNELEdBQVIsQ0FBWUUsUUFBWixJQUF3QixhQUFwQztBQUNBLE1BQU1DLE1BQU0sR0FDUkgsR0FBRyxLQUFLLFdBQVIsR0FBc0JDLE9BQU8sQ0FBQ0QsR0FBUixDQUFZSSxXQUFsQyxHQUNJSixHQUFHLEtBQUssWUFBUixHQUF1QkMsT0FBTyxDQUFDRCxHQUFSLENBQVlLLFdBQW5DLEdBQ0lMLEdBQUcsS0FBSyxhQUFSLEdBQXdCQyxPQUFPLENBQUNELEdBQVIsQ0FBWU0sVUFBcEMsR0FDSUwsT0FBTyxDQUFDRCxHQUFSLENBQVlNLFVBSjVCOztBQU1BLE1BQU1DLEVBQUUsR0FBR0MsaUJBQUEsQ0FBU0MsT0FBVCxDQUFpQix1R0FBakIsRUFBMEg7RUFDaklDLGVBQWUsRUFBRSxJQURnSDtFQUVqSUMsa0JBQWtCLEVBQUU7QUFGNkcsQ0FBMUgsRUFJVkMsSUFKVSxDQUlKQyxVQUFELElBQWdCO0VBQ2xCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQ0FBWjtBQUNILENBTlUsRUFPVkMsS0FQVSxDQU9KQyxHQUFHLElBQUk7RUFDVkgsT0FBTyxDQUFDQyxHQUFSLENBQVksbUJBQWlCWixNQUE3QjtFQUNBVyxPQUFPLENBQUNDLEdBQVIsQ0FBWUUsR0FBWjtBQUNILENBVlUsQ0FBWDs7ZUFZZVYsRSJ9","map":{"version":3,"names":["env","process","NODE_ENV","DB_URL","DB_URL_TEST","DB_URL_PROD","DB_URL_DEV","db","mongoose","connect","useNewUrlParser","useUnifiedTopology","then","connection","console","log","catch","err"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/","sources":["index.js"],"sourcesContent":["import 'dotenv/config';\nimport mongoose from \"mongoose\";\n\nconst env = process.env.NODE_ENV || \"development\";\nconst DB_URL =\n    env === \"container\" ? process.env.DB_URL_TEST :\n        env === \"production\" ? process.env.DB_URL_PROD :\n            env === \"development\" ? process.env.DB_URL_DEV :\n                process.env.DB_URL_DEV;\n\nconst db = mongoose.connect(\"mongodb+srv://sandberg-g:jLx6i4RujUt84k4@cluster0.mjmat.mongodb.net/vhmis?retryWrites=true&w=majority\", {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n})\n.then((connection) => {\n    console.log(\"Connected to MongoDB Successful\");\n})\n.catch(err => {\n    console.log(\"Database url: \"+DB_URL);\n    console.log(err);\n})\n\nexport default db;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;AACA,MAAMC,MAAM,GACRH,GAAG,KAAK,WAAR,GAAsBC,OAAO,CAACD,GAAR,CAAYI,WAAlC,GACIJ,GAAG,KAAK,YAAR,GAAuBC,OAAO,CAACD,GAAR,CAAYK,WAAnC,GACIL,GAAG,KAAK,aAAR,GAAwBC,OAAO,CAACD,GAAR,CAAYM,UAApC,GACIL,OAAO,CAACD,GAAR,CAAYM,UAJ5B;;AAMA,MAAMC,EAAE,GAAGC,iBAAA,CAASC,OAAT,CAAiB,uGAAjB,EAA0H;EACjIC,eAAe,EAAE,IADgH;EAEjIC,kBAAkB,EAAE;AAF6G,CAA1H,EAIVC,IAJU,CAIJC,UAAD,IAAgB;EAClBC,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACH,CANU,EAOVC,KAPU,CAOJC,GAAG,IAAI;EACVH,OAAO,CAACC,GAAR,CAAY,mBAAiBZ,MAA7B;EACAW,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH,CAVU,CAAX;;eAYeV,E"}},"mtime":1657104354109},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/routes/auth.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _admin = require(\"../controllers/admin.controller\");\n\nvar _auth = _interopRequireDefault(require(\"../middlewares/auth.middleware\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.post('/register', _admin.signup);\nrouter.post('/signin', _admin.signin);\nrouter.get('/profile', _auth.default, _admin.getProfile);\nconst authDto = {\n  names: '',\n  email: '',\n  phone: '',\n  nationalId: '',\n  password: ''\n};\n(0, _swaggiffy.registerSchema)('AuthDto', authDto);\n(0, _swaggiffy.registerDefinition)(router, {\n  tags: \"Auth\",\n  mappedSchema: \"AuthDto\",\n  basePath: \"/api/v1/auth\"\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0Iiwic2lnbnVwIiwic2lnbmluIiwiZ2V0IiwiQXV0aE1pZGRsZXdhcmUiLCJnZXRQcm9maWxlIiwiYXV0aER0byIsIm5hbWVzIiwiZW1haWwiLCJwaG9uZSIsIm5hdGlvbmFsSWQiLCJwYXNzd29yZCIsInJlZ2lzdGVyU2NoZW1hIiwicmVnaXN0ZXJEZWZpbml0aW9uIiwidGFncyIsIm1hcHBlZFNjaGVtYSIsImJhc2VQYXRoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yY2EvRGVza3RvcC9yZXN0ZnVsLXByYWN0aWNhbC9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGgucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZpbml0aW9uLCByZWdpc3RlclNjaGVtYSB9IGZyb20gJ3N3YWdnaWZmeSc7XG5pbXBvcnQgeyBzaWdudXAsIHNpZ25pbiwgZ2V0UHJvZmlsZSB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2FkbWluLmNvbnRyb2xsZXInO1xuaW1wb3J0IEF1dGhNaWRkbGV3YXJlIGZyb20gJy4uL21pZGRsZXdhcmVzL2F1dGgubWlkZGxld2FyZSc7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgc2lnbnVwKTtcbnJvdXRlci5wb3N0KCcvc2lnbmluJywgc2lnbmluKTtcbnJvdXRlci5nZXQoJy9wcm9maWxlJywgQXV0aE1pZGRsZXdhcmUsIGdldFByb2ZpbGUpO1xuXG5jb25zdCBhdXRoRHRvID0ge1xuICAgIG5hbWVzOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgcGhvbmU6ICcnLFxuICAgIG5hdGlvbmFsSWQ6ICcnLFxuICAgIHBhc3N3b3JkOiAnJ1xufVxucmVnaXN0ZXJTY2hlbWEoJ0F1dGhEdG8nLCBhdXRoRHRvKTtcbnJlZ2lzdGVyRGVmaW5pdGlvbihyb3V0ZXIsIHsgdGFnczogXCJBdXRoXCIsIG1hcHBlZFNjaGVtYTogXCJBdXRoRHRvXCIsIGJhc2VQYXRoOiBcIi9hcGkvdjEvYXV0aFwiIH0pO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBQSxHQUFmO0FBRUFELE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFdBQVosRUFBeUJDLGFBQXpCO0FBQ0FILE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFNBQVosRUFBdUJFLGFBQXZCO0FBQ0FKLE1BQU0sQ0FBQ0ssR0FBUCxDQUFXLFVBQVgsRUFBdUJDLGFBQXZCLEVBQXVDQyxpQkFBdkM7QUFFQSxNQUFNQyxPQUFPLEdBQUc7RUFDWkMsS0FBSyxFQUFFLEVBREs7RUFFWkMsS0FBSyxFQUFFLEVBRks7RUFHWkMsS0FBSyxFQUFFLEVBSEs7RUFJWkMsVUFBVSxFQUFFLEVBSkE7RUFLWkMsUUFBUSxFQUFFO0FBTEUsQ0FBaEI7QUFPQSxJQUFBQyx5QkFBQSxFQUFlLFNBQWYsRUFBMEJOLE9BQTFCO0FBQ0EsSUFBQU8sNkJBQUEsRUFBbUJmLE1BQW5CLEVBQTJCO0VBQUVnQixJQUFJLEVBQUUsTUFBUjtFQUFnQkMsWUFBWSxFQUFFLFNBQTlCO0VBQXlDQyxRQUFRLEVBQUU7QUFBbkQsQ0FBM0I7ZUFDZWxCLE0ifQ==","map":{"version":3,"names":["router","Router","post","signup","signin","get","AuthMiddleware","getProfile","authDto","names","email","phone","nationalId","password","registerSchema","registerDefinition","tags","mappedSchema","basePath"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/routes/","sources":["auth.routes.js"],"sourcesContent":["import { Router } from 'express';\nimport { registerDefinition, registerSchema } from 'swaggiffy';\nimport { signup, signin, getProfile } from '../controllers/admin.controller';\nimport AuthMiddleware from '../middlewares/auth.middleware';\n\nconst router = Router();\n\nrouter.post('/register', signup);\nrouter.post('/signin', signin);\nrouter.get('/profile', AuthMiddleware, getProfile);\n\nconst authDto = {\n    names: '',\n    email: '',\n    phone: '',\n    nationalId: '',\n    password: ''\n}\nregisterSchema('AuthDto', authDto);\nregisterDefinition(router, { tags: \"Auth\", mappedSchema: \"AuthDto\", basePath: \"/api/v1/auth\" });\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,WAAZ,EAAyBC,aAAzB;AACAH,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuBE,aAAvB;AACAJ,MAAM,CAACK,GAAP,CAAW,UAAX,EAAuBC,aAAvB,EAAuCC,iBAAvC;AAEA,MAAMC,OAAO,GAAG;EACZC,KAAK,EAAE,EADK;EAEZC,KAAK,EAAE,EAFK;EAGZC,KAAK,EAAE,EAHK;EAIZC,UAAU,EAAE,EAJA;EAKZC,QAAQ,EAAE;AALE,CAAhB;AAOA,IAAAC,yBAAA,EAAe,SAAf,EAA0BN,OAA1B;AACA,IAAAO,6BAAA,EAAmBf,MAAnB,EAA2B;EAAEgB,IAAI,EAAE,MAAR;EAAgBC,YAAY,EAAE,SAA9B;EAAyCC,QAAQ,EAAE;AAAnD,CAA3B;eACelB,M"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/controllers/admin.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.signin = exports.getProfile = void 0;\n\nvar _admin = _interopRequireDefault(require(\"../database/models/admin.model\"));\n\nvar _hashPassword = require(\"../utils/hash-password\");\n\nvar _jsonwebtoken = require(\"jsonwebtoken\");\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst signup = async (req, res) => {\n  const {\n    error\n  } = validateUser(req.body);\n\n  if (error) {\n    return res.status(400).send(error.details[0].message);\n  }\n\n  const {\n    names,\n    email,\n    phone,\n    nationalId,\n    password\n  } = req.body;\n  const userExist = await _admin.default.findOne({\n    email\n  });\n  if (userExist) return res.status(400).json({\n    success: false,\n    message: \"Email and NID must be unique\"\n  });\n  const hashedPassword = await (0, _hashPassword.hashPassword)(password);\n\n  try {\n    const user = new _admin.default({\n      names,\n      email,\n      password: hashedPassword,\n      phone,\n      nationalId\n    });\n    await user.save();\n    return res.status(201).json({\n      success: true,\n      message: \"User created successfully\",\n      data: user\n    });\n  } catch (error) {\n    return res.status(400).json({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.signup = signup;\n\nconst signin = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n\n  try {\n    const user = await _admin.default.findOne({\n      email\n    });\n    if (!user) return res.status(400).json({\n      success: false,\n      message: \"Invalid Credentials\"\n    });\n    const isMatch = await (0, _hashPassword.comparePassword)(password, user.password);\n    if (!isMatch) return res.status(400).json({\n      success: false,\n      message: \"Invalid Credentials\"\n    });\n    const token = (0, _jsonwebtoken.sign)({\n      _id: user._id,\n      email,\n      name: user.name\n    }, process.env.JWT_KEY, {\n      expiresIn: '1d'\n    });\n    return res.status(200).json({\n      success: true,\n      message: \"User logged in successfully\",\n      data: {\n        token,\n        user\n      }\n    });\n  } catch (error) {\n    return res.status(400).json({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.signin = signin;\n\nconst getProfile = async (req, res) => {\n  return res.status(200).json({\n    success: true,\n    data: req.user\n  });\n};\n\nexports.getProfile = getProfile;\n\nfunction validateUser(user) {\n  const schema = _joi.default.object({\n    names: _joi.default.string().max(255).min(3).required(),\n    phone: _joi.default.string().max(12).min(10).required(),\n    email: _joi.default.string().max(255).min(3).required().email(),\n    password: _joi.default.string().max(255).min(6).required(),\n    nationalId: _joi.default.string().max(16).min(16).required()\n  });\n\n  return schema.validate(user);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzaWdudXAiLCJyZXEiLCJyZXMiLCJlcnJvciIsInZhbGlkYXRlVXNlciIsImJvZHkiLCJzdGF0dXMiLCJzZW5kIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJuYW1lcyIsImVtYWlsIiwicGhvbmUiLCJuYXRpb25hbElkIiwicGFzc3dvcmQiLCJ1c2VyRXhpc3QiLCJBZG1pbiIsImZpbmRPbmUiLCJqc29uIiwic3VjY2VzcyIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaFBhc3N3b3JkIiwidXNlciIsInNhdmUiLCJkYXRhIiwic2lnbmluIiwiaXNNYXRjaCIsImNvbXBhcmVQYXNzd29yZCIsInRva2VuIiwic2lnbiIsIl9pZCIsIm5hbWUiLCJwcm9jZXNzIiwiZW52IiwiSldUX0tFWSIsImV4cGlyZXNJbiIsImdldFByb2ZpbGUiLCJzY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJzdHJpbmciLCJtYXgiLCJtaW4iLCJyZXF1aXJlZCIsInZhbGlkYXRlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yY2EvRGVza3RvcC9yZXN0ZnVsLXByYWN0aWNhbC9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYWRtaW4uY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWRtaW4gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzL2FkbWluLm1vZGVsJztcbmltcG9ydCB7IGhhc2hQYXNzd29yZCwgY29tcGFyZVBhc3N3b3JkIH0gZnJvbSAnLi4vdXRpbHMvaGFzaC1wYXNzd29yZCc7XG5pbXBvcnQgeyBzaWduIH0gZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuZXhwb3J0IGNvbnN0IHNpZ251cCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IHZhbGlkYXRlVXNlcihyZXEuYm9keSk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnJvci5kZXRhaWxzWzBdLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmFtZXMsIGVtYWlsLCBwaG9uZSwgbmF0aW9uYWxJZCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlckV4aXN0ID0gYXdhaXQgQWRtaW4uZmluZE9uZSh7IGVtYWlsIH0pO1xuICAgIGlmICh1c2VyRXhpc3QpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkVtYWlsIGFuZCBOSUQgbXVzdCBiZSB1bmlxdWVcIiB9KTtcblxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgQWRtaW4oeyBuYW1lcywgZW1haWwsIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCwgcGhvbmUsIG5hdGlvbmFsSWQgfSk7XG4gICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiVXNlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLCBkYXRhOiB1c2VyIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBjb25zdCBzaWduaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcblxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgQWRtaW4uZmluZE9uZSh7IGVtYWlsIH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgQ3JlZGVudGlhbHNcIiB9KTtcblxuICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgaWYgKCFpc01hdGNoKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIENyZWRlbnRpYWxzXCIgfSk7XG5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBzaWduKHsgX2lkOiB1c2VyLl9pZCwgZW1haWwsIG5hbWU6IHVzZXIubmFtZSB9LCBwcm9jZXNzLmVudi5KV1RfS0VZLCB7IGV4cGlyZXNJbjogJzFkJyB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJVc2VyIGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlcIiwgZGF0YTogeyB0b2tlbiwgdXNlciB9IH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZ2V0UHJvZmlsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlcS51c2VyIH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVVzZXIodXNlcikge1xuICAgIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgICBuYW1lczogSm9pLnN0cmluZygpLm1heCgyNTUpLm1pbigzKS5yZXF1aXJlZCgpLFxuICAgICAgICBwaG9uZTogSm9pLnN0cmluZygpLm1heCgxMikubWluKDEwKS5yZXF1aXJlZCgpLFxuICAgICAgICBlbWFpbDogSm9pLnN0cmluZygpLm1heCgyNTUpLm1pbigzKS5yZXF1aXJlZCgpLmVtYWlsKCksXG4gICAgICAgIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCkubWF4KDI1NSkubWluKDYpLnJlcXVpcmVkKCksXG4gICAgICAgIG5hdGlvbmFsSWQ6IEpvaS5zdHJpbmcoKS5tYXgoMTYpLm1pbigxNikucmVxdWlyZWQoKSxcbiAgICB9KTtcblxuICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUodXNlcik7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFTyxNQUFNQSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0VBQ3RDLE1BQU07SUFBRUM7RUFBRixJQUFZQyxZQUFZLENBQUNILEdBQUcsQ0FBQ0ksSUFBTCxDQUE5Qjs7RUFDQSxJQUFJRixLQUFKLEVBQVc7SUFDUCxPQUFPRCxHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQkosS0FBSyxDQUFDSyxPQUFOLENBQWMsQ0FBZCxFQUFpQkMsT0FBdEMsQ0FBUDtFQUNIOztFQUVELE1BQU07SUFBRUMsS0FBRjtJQUFTQyxLQUFUO0lBQWdCQyxLQUFoQjtJQUF1QkMsVUFBdkI7SUFBbUNDO0VBQW5DLElBQWdEYixHQUFHLENBQUNJLElBQTFEO0VBRUEsTUFBTVUsU0FBUyxHQUFHLE1BQU1DLGNBQUEsQ0FBTUMsT0FBTixDQUFjO0lBQUVOO0VBQUYsQ0FBZCxDQUF4QjtFQUNBLElBQUlJLFNBQUosRUFBZSxPQUFPYixHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCWSxJQUFoQixDQUFxQjtJQUFFQyxPQUFPLEVBQUUsS0FBWDtJQUFrQlYsT0FBTyxFQUFFO0VBQTNCLENBQXJCLENBQVA7RUFFZixNQUFNVyxjQUFjLEdBQUcsTUFBTSxJQUFBQywwQkFBQSxFQUFhUCxRQUFiLENBQTdCOztFQUVBLElBQUk7SUFDQSxNQUFNUSxJQUFJLEdB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","map":{"version":3,"names":["signup","req","res","error","validateUser","body","status","send","details","message","names","email","phone","nationalId","password","userExist","Admin","findOne","json","success","hashedPassword","hashPassword","user","save","data","signin","isMatch","comparePassword","token","sign","_id","name","process","env","JWT_KEY","expiresIn","getProfile","schema","Joi","object","string","max","min","required","validate"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/controllers/","sources":["admin.controller.js"],"sourcesContent":["import Admin from '../database/models/admin.model';\nimport { hashPassword, comparePassword } from '../utils/hash-password';\nimport { sign } from 'jsonwebtoken';\nimport Joi from 'joi';\n\nexport const signup = async (req, res) => {\n    const { error } = validateUser(req.body);\n    if (error) {\n        return res.status(400).send(error.details[0].message);\n    }\n\n    const { names, email, phone, nationalId, password } = req.body;\n\n    const userExist = await Admin.findOne({ email });\n    if (userExist) return res.status(400).json({ success: false, message: \"Email and NID must be unique\" });\n\n    const hashedPassword = await hashPassword(password);\n\n    try {\n        const user = new Admin({ names, email, password: hashedPassword, phone, nationalId });\n        await user.save()\n        return res.status(201).json({ success: true, message: \"User created successfully\", data: user });\n\n    } catch (error) {\n        return res.status(400).json({ success: false, message: error.message });\n    }\n\n}\n\nexport const signin = async (req, res) => {\n\n    const { email, password } = req.body;\n    try {\n        const user = await Admin.findOne({ email });\n        if (!user) return res.status(400).json({ success: false, message: \"Invalid Credentials\" });\n\n        const isMatch = await comparePassword(password, user.password);\n        if (!isMatch) return res.status(400).json({ success: false, message: \"Invalid Credentials\" });\n\n        const token = sign({ _id: user._id, email, name: user.name }, process.env.JWT_KEY, { expiresIn: '1d' });\n        return res.status(200).json({ success: true, message: \"User logged in successfully\", data: { token, user } });\n\n    } catch (error) {\n        return res.status(400).json({ success: false, message: error.message });\n    }\n}\n\nexport const getProfile = async (req, res) => {\n    return res.status(200).json({ success: true, data: req.user });\n}\n\nfunction validateUser(user) {\n    const schema = Joi.object({\n        names: Joi.string().max(255).min(3).required(),\n        phone: Joi.string().max(12).min(10).required(),\n        email: Joi.string().max(255).min(3).required().email(),\n        password: Joi.string().max(255).min(6).required(),\n        nationalId: Joi.string().max(16).min(16).required(),\n    });\n\n    return schema.validate(user);\n}"],"mappings":"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"}},"mtime":1657104279373},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/models/admin.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema({\n  names: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  phone: {\n    type: String,\n    required: true\n  },\n  nationalId: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  profilePic: {\n    type: String,\n    default: \"https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?k=20&m=1223671392&s=612x612&w=0&h=lGpj2vWAI3WUT1JeJWm1PRoHT3V15_1pdcTn2szdwQ0=\"\n  },\n  isActive: {\n    type: Boolean,\n    default: true\n  }\n}, {\n  timestamps: true\n});\n\n(0, _swaggiffy.registerSchema)('Admin', Schema, {\n  orm: 'mongoose'\n});\n\nconst Admin = _mongoose.default.model(\"Admin\", Schema);\n\nvar _default = Admin;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIm5hbWVzIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ1bmlxdWUiLCJwaG9uZSIsIm5hdGlvbmFsSWQiLCJwYXNzd29yZCIsInByb2ZpbGVQaWMiLCJkZWZhdWx0IiwiaXNBY3RpdmUiLCJCb29sZWFuIiwidGltZXN0YW1wcyIsInJlZ2lzdGVyU2NoZW1hIiwib3JtIiwiQWRtaW4iLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJhZG1pbi5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgeyByZWdpc3RlclNjaGVtYSB9IGZyb20gXCJzd2FnZ2lmZnlcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBuYW1lczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgcGhvbmU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIG5hdGlvbmFsSWQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHByb2ZpbGVQaWM6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBcImh0dHBzOi8vbWVkaWEuaXN0b2NrcGhvdG8uY29tL3ZlY3RvcnMvZGVmYXVsdC1wcm9maWxlLXBpY3R1cmUtYXZhdGFyLXBob3RvLXBsYWNlaG9sZGVyLXZlY3Rvci1pbGx1c3RyYXRpb24tdmVjdG9yLWlkMTIyMzY3MTM5Mj9rPTIwJm09MTIyMzY3MTM5MiZzPTYxMng2MTImdz0wJmg9bEdwajJ2V0FJM1dVVDFKZUpXbTFQUm9IVDNWMTVfMXBkY1RuMnN6ZHdRMD1cIixcbiAgICB9LFxuICAgIGlzQWN0aXZlOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxucmVnaXN0ZXJTY2hlbWEoJ0FkbWluJywgU2NoZW1hLCB7IG9ybTogJ21vbmdvb3NlJyB9KTtcbmNvbnN0IEFkbWluID0gbW9uZ29vc2UubW9kZWwoXCJBZG1pblwiLCBTY2hlbWEpO1xuZXhwb3J0IGRlZmF1bHQgQWRtaW47Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQVQsQ0FBZ0I7RUFDM0JFLEtBQUssRUFBRTtJQUNIQyxJQUFJLEVBQUVDLE1BREg7SUFFSEMsUUFBUSxFQUFFO0VBRlAsQ0FEb0I7RUFLM0JDLEtBQUssRUFBRTtJQUNISCxJQUFJLEVBQUVDLE1BREg7SUFFSEMsUUFBUSxFQUFFLElBRlA7SUFHSEUsTUFBTSxFQUFFO0VBSEwsQ0FMb0I7RUFVM0JDLEtBQUssRUFBRTtJQUNITCxJQUFJLEVBQUVDLE1BREg7SUFFSEMsUUFBUSxFQUFFO0VBRlAsQ0FWb0I7RUFjM0JJLFVBQVUsRUFBRTtJQUNSTixJQUFJLEVBQUVDLE1BREU7SUFFUkMsUUFBUSxFQUFFLElBRkY7SUFHUkUsTUFBTSxFQUFFO0VBSEEsQ0FkZTtFQW1CM0JHLFFBQVEsRUFBRTtJQUNOUCxJQUFJLEVBQUVDLE1BREE7SUFFTkMsUUFBUSxFQUFFO0VBRkosQ0FuQmlCO0VBdUIzQk0sVUFBVSxFQUFFO0lBQ1JSLElBQUksRUFBRUMsTUFERTtJQUVSUSxPQUFPLEVBQUU7RUFGRCxDQXZCZTtFQTJCM0JDLFFBQVEsRUFBRTtJQUNOVixJQUFJLEVBQUVXLE9BREE7SUFFTkYsT0FBTyxFQUFFO0VBRkg7QUEzQmlCLENBQWhCLEVBK0JaO0VBQ0NHLFVBQVUsRUFBRTtBQURiLENBL0JZLENBQWY7O0FBbUNBLElBQUFDLHlCQUFBLEVBQWUsT0FBZixFQUF3QmhCLE1BQXhCLEVBQWdDO0VBQUVpQixHQUFHLEVBQUU7QUFBUCxDQUFoQzs7QUFDQSxNQUFNQyxLQUFLLEdBQUdqQixpQkFBQSxDQUFTa0IsS0FBVCxDQUFlLE9BQWYsRUFBd0JuQixNQUF4QixDQUFkOztlQUNla0IsSyJ9","map":{"version":3,"names":["Schema","mongoose","names","type","String","required","email","unique","phone","nationalId","password","profilePic","default","isActive","Boolean","timestamps","registerSchema","orm","Admin","model"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/models/","sources":["admin.model.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { registerSchema } from \"swaggiffy\";\n\nconst Schema = mongoose.Schema({\n    names: {\n        type: String,\n        required: true,\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n    },\n    phone: {\n        type: String,\n        required: true,\n    },\n    nationalId: {\n        type: String,\n        required: true,\n        unique: true,\n    },\n    password: {\n        type: String,\n        required: true,\n    },\n    profilePic: {\n        type: String,\n        default: \"https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?k=20&m=1223671392&s=612x612&w=0&h=lGpj2vWAI3WUT1JeJWm1PRoHT3V15_1pdcTn2szdwQ0=\",\n    },\n    isActive: {\n        type: Boolean,\n        default: true,\n    },\n}, {\n    timestamps: true\n});\n\nregisterSchema('Admin', Schema, { orm: 'mongoose' });\nconst Admin = mongoose.model(\"Admin\", Schema);\nexport default Admin;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAT,CAAgB;EAC3BE,KAAK,EAAE;IACHC,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CADoB;EAK3BC,KAAK,EAAE;IACHH,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHE,MAAM,EAAE;EAHL,CALoB;EAU3BC,KAAK,EAAE;IACHL,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CAVoB;EAc3BI,UAAU,EAAE;IACRN,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,IAFF;IAGRE,MAAM,EAAE;EAHA,CAde;EAmB3BG,QAAQ,EAAE;IACNP,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CAnBiB;EAuB3BM,UAAU,EAAE;IACRR,IAAI,EAAEC,MADE;IAERQ,OAAO,EAAE;EAFD,CAvBe;EA2B3BC,QAAQ,EAAE;IACNV,IAAI,EAAEW,OADA;IAENF,OAAO,EAAE;EAFH;AA3BiB,CAAhB,EA+BZ;EACCG,UAAU,EAAE;AADb,CA/BY,CAAf;;AAmCA,IAAAC,yBAAA,EAAe,OAAf,EAAwBhB,MAAxB,EAAgC;EAAEiB,GAAG,EAAE;AAAP,CAAhC;;AACA,MAAMC,KAAK,GAAGjB,iBAAA,CAASkB,KAAT,CAAe,OAAf,EAAwBnB,MAAxB,CAAd;;eACekB,K"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/utils/hash-password.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hashPassword = exports.comparePassword = void 0;\n\nvar _argon = require(\"argon2\");\n\nconst KEY = process.env.BCRYPT_KEY;\n\nconst hashPassword = password => {\n  return (0, _argon.hash)(password, 10, {\n    key: KEY\n  });\n};\n\nexports.hashPassword = hashPassword;\n\nconst comparePassword = (password, hash) => {\n  try {\n    return (0, _argon.verify)(hash, password, {\n      key: KEY\n    });\n  } catch (err) {\n    return false;\n  }\n};\n\nexports.comparePassword = comparePassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJLRVkiLCJwcm9jZXNzIiwiZW52IiwiQkNSWVBUX0tFWSIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsImtleSIsImNvbXBhcmVQYXNzd29yZCIsInZlcmlmeSIsImVyciJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbImhhc2gtcGFzc3dvcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGFzaCwgdmVyaWZ5IH0gZnJvbSAnYXJnb24yJztcblxuY29uc3QgS0VZID0gcHJvY2Vzcy5lbnYuQkNSWVBUX0tFWTtcblxuZXhwb3J0IGNvbnN0IGhhc2hQYXNzd29yZCA9ICAocGFzc3dvcmQpID0+IHtcbiAgICByZXR1cm4gaGFzaChwYXNzd29yZCwgMTAsIHsga2V5OiBLRVkgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb21wYXJlUGFzc3dvcmQgPSAgKHBhc3N3b3JkLCBoYXNoKSA9PiB7XG4gICAgdHJ5e1xuICAgICAgICByZXR1cm4gdmVyaWZ5KGhhc2gsIHBhc3N3b3JkLCB7IGtleTogS0VZIH0pO1xuICAgIH1cbiAgICBjYXRjaChlcnIpe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBeEI7O0FBRU8sTUFBTUMsWUFBWSxHQUFLQyxRQUFELElBQWM7RUFDdkMsT0FBTyxJQUFBQyxXQUFBLEVBQUtELFFBQUwsRUFBZSxFQUFmLEVBQW1CO0lBQUVFLEdBQUcsRUFBRVA7RUFBUCxDQUFuQixDQUFQO0FBQ0gsQ0FGTTs7OztBQUlBLE1BQU1RLGVBQWUsR0FBSSxDQUFDSCxRQUFELEVBQVdDLElBQVgsS0FBb0I7RUFDaEQsSUFBRztJQUNDLE9BQU8sSUFBQUcsYUFBQSxFQUFPSCxJQUFQLEVBQWFELFFBQWIsRUFBdUI7TUFBRUUsR0FBRyxFQUFFUDtJQUFQLENBQXZCLENBQVA7RUFDSCxDQUZELENBR0EsT0FBTVUsR0FBTixFQUFVO0lBQ04sT0FBTyxLQUFQO0VBQ0g7QUFDSixDQVBNIn0=","map":{"version":3,"names":["KEY","process","env","BCRYPT_KEY","hashPassword","password","hash","key","comparePassword","verify","err"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/utils/","sources":["hash-password.js"],"sourcesContent":["import { hash, verify } from 'argon2';\n\nconst KEY = process.env.BCRYPT_KEY;\n\nexport const hashPassword =  (password) => {\n    return hash(password, 10, { key: KEY });\n}\n\nexport const comparePassword =  (password, hash) => {\n    try{\n        return verify(hash, password, { key: KEY });\n    }\n    catch(err){\n        return false;\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,UAAxB;;AAEO,MAAMC,YAAY,GAAKC,QAAD,IAAc;EACvC,OAAO,IAAAC,WAAA,EAAKD,QAAL,EAAe,EAAf,EAAmB;IAAEE,GAAG,EAAEP;EAAP,CAAnB,CAAP;AACH,CAFM;;;;AAIA,MAAMQ,eAAe,GAAI,CAACH,QAAD,EAAWC,IAAX,KAAoB;EAChD,IAAG;IACC,OAAO,IAAAG,aAAA,EAAOH,IAAP,EAAaD,QAAb,EAAuB;MAAEE,GAAG,EAAEP;IAAP,CAAvB,CAAP;EACH,CAFD,CAGA,OAAMU,GAAN,EAAU;IACN,OAAO,KAAP;EACH;AACJ,CAPM"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/middlewares/auth.middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsonwebtoken = require(\"jsonwebtoken\");\n\nconst AuthMiddleware = async (req, res, next) => {\n  try {\n    const bearerToken = req.headers.authorization;\n    const token = bearerToken.split(' ')[1];\n    if (!token) return res.status(401).json({\n      success: false,\n      message: 'Unauthorized'\n    });\n    const decoded = (0, _jsonwebtoken.decode)(token, {\n      key: \"Mh45aPja\"\n    });\n    if (!decoded) return res.status(401).json({\n      success: false,\n      message: 'Unauthorized'\n    });\n    req.user = decoded;\n  } catch (e) {\n    return res.status(401).json({\n      success: false,\n      message: \"Unauthorized\"\n    });\n  }\n\n  next();\n};\n\nvar _default = AuthMiddleware;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdXRoTWlkZGxld2FyZSIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidG9rZW4iLCJzcGxpdCIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImRlY29kZWQiLCJkZWNvZGUiLCJrZXkiLCJ1c2VyIiwiZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbImF1dGgubWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGUgfSBmcm9tICdqc29ud2VidG9rZW4nO1xuXG5jb25zdCBBdXRoTWlkZGxld2FyZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJlYXJlclRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICBjb25zdCB0b2tlbiA9IGJlYXJlclRva2VuLnNwbGl0KCcgJylbMV07XG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUodG9rZW4sIHsga2V5OiBcIk1oNDVhUGphXCIgfSk7XG4gICAgaWYgKCFkZWNvZGVkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgcmVxLnVzZXIgPSBkZWNvZGVkO1xuICB9XG4gIGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVW5hdXRob3JpemVkXCIgfSk7XG4gIH1cblxuXG4gIG5leHQoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXV0aE1pZGRsZXdhcmU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQSxNQUFNQSxjQUFjLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUMvQyxJQUFJO0lBQ0YsTUFBTUMsV0FBVyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBaEM7SUFDQSxNQUFNQyxLQUFLLEdBQUdILFdBQVcsQ0FBQ0ksS0FBWixDQUFrQixHQUFsQixFQUF1QixDQUF2QixDQUFkO0lBQ0EsSUFBSSxDQUFDRCxLQUFMLEVBQVksT0FBT0wsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7TUFBRUMsT0FBTyxFQUFFLEtBQVg7TUFBa0JDLE9BQU8sRUFBRTtJQUEzQixDQUFyQixDQUFQO0lBQ1osTUFBTUMsT0FBTyxHQUFHLElBQUFDLG9CQUFBLEVBQU9QLEtBQVAsRUFBYztNQUFFUSxHQUFHLEVBQUU7SUFBUCxDQUFkLENBQWhCO0lBQ0EsSUFBSSxDQUFDRixPQUFMLEVBQWMsT0FBT1gsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7TUFBRUMsT0FBTyxFQUFFLEtBQVg7TUFBa0JDLE9BQU8sRUFBRTtJQUEzQixDQUFyQixDQUFQO0lBQ2RYLEdBQUcsQ0FBQ2UsSUFBSixHQUFXSCxPQUFYO0VBQ0QsQ0FQRCxDQVFBLE9BQU9JLENBQVAsRUFBVTtJQUNSLE9BQU9mLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO01BQUVDLE9BQU8sRUFBRSxLQUFYO01BQWtCQyxPQUFPLEVBQUU7SUFBM0IsQ0FBckIsQ0FBUDtFQUNEOztFQUdEVCxJQUFJO0FBQ0wsQ0FmRDs7ZUFpQmVILGMifQ==","map":{"version":3,"names":["AuthMiddleware","req","res","next","bearerToken","headers","authorization","token","split","status","json","success","message","decoded","decode","key","user","e"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/middlewares/","sources":["auth.middleware.js"],"sourcesContent":["import { decode } from 'jsonwebtoken';\n\nconst AuthMiddleware = async (req, res, next) => {\n  try {\n    const bearerToken = req.headers.authorization;\n    const token = bearerToken.split(' ')[1];\n    if (!token) return res.status(401).json({ success: false, message: 'Unauthorized' });\n    const decoded = decode(token, { key: \"Mh45aPja\" });\n    if (!decoded) return res.status(401).json({ success: false, message: 'Unauthorized' });\n    req.user = decoded;\n  }\n  catch (e) {\n    return res.status(401).json({ success: false, message: \"Unauthorized\" });\n  }\n\n\n  next();\n}\n\nexport default AuthMiddleware;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,cAAc,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC/C,IAAI;IACF,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAhC;IACA,MAAMC,KAAK,GAAGH,WAAW,CAACI,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAd;IACA,IAAI,CAACD,KAAL,EAAY,OAAOL,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEC,OAAO,EAAE,KAAX;MAAkBC,OAAO,EAAE;IAA3B,CAArB,CAAP;IACZ,MAAMC,OAAO,GAAG,IAAAC,oBAAA,EAAOP,KAAP,EAAc;MAAEQ,GAAG,EAAE;IAAP,CAAd,CAAhB;IACA,IAAI,CAACF,OAAL,EAAc,OAAOX,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEC,OAAO,EAAE,KAAX;MAAkBC,OAAO,EAAE;IAA3B,CAArB,CAAP;IACdX,GAAG,CAACe,IAAJ,GAAWH,OAAX;EACD,CAPD,CAQA,OAAOI,CAAP,EAAU;IACR,OAAOf,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEC,OAAO,EAAE,KAAX;MAAkBC,OAAO,EAAE;IAA3B,CAArB,CAAP;EACD;;EAGDT,IAAI;AACL,CAfD;;eAiBeH,c"}},"mtime":1657104279373},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/routes/owner.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _owner = require(\"../controllers/owner.controller\");\n\nconst router = (0, _express.Router)();\nrouter.post('/', _owner.registerOwner);\nrouter.put('/:id', _owner.updateOwner);\nrouter.get('/', _owner.getAllOwners);\nrouter.get('/:id', _owner.getOwnerById);\nrouter.get('/email/:email', _owner.getOwnerByEmail);\nrouter.delete('/:id', _owner.deleteOwner);\n(0, _swaggiffy.registerDefinition)(router, {\n  tags: 'Owners',\n  mappedSchema: 'Owner',\n  basePath: '/api/v1/owners'\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJPd25lciIsInB1dCIsInVwZGF0ZU93bmVyIiwiZ2V0IiwiZ2V0QWxsT3duZXJzIiwiZ2V0T3duZXJCeUlkIiwiZ2V0T3duZXJCeUVtYWlsIiwiZGVsZXRlIiwiZGVsZXRlT3duZXIiLCJyZWdpc3RlckRlZmluaXRpb24iLCJ0YWdzIiwibWFwcGVkU2NoZW1hIiwiYmFzZVBhdGgiXSwic291cmNlUm9vdCI6Ii9ob21lL3JjYS9EZXNrdG9wL3Jlc3RmdWwtcHJhY3RpY2FsL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsib3duZXIucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZpbml0aW9uIH0gZnJvbSAnc3dhZ2dpZmZ5JztcbmltcG9ydCB7IHJlZ2lzdGVyT3duZXIsIGRlbGV0ZU93bmVyLCBnZXRBbGxPd25lcnMsIGdldE93bmVyQnlFbWFpbCwgZ2V0T3duZXJCeUlkLCB1cGRhdGVPd25lciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL293bmVyLmNvbnRyb2xsZXInO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnBvc3QoJy8nLCByZWdpc3Rlck93bmVyKTtcbnJvdXRlci5wdXQoJy86aWQnLCB1cGRhdGVPd25lcik7XG5yb3V0ZXIuZ2V0KCcvJywgZ2V0QWxsT3duZXJzKTtcbnJvdXRlci5nZXQoJy86aWQnLCBnZXRPd25lckJ5SWQpO1xucm91dGVyLmdldCgnL2VtYWlsLzplbWFpbCcsIGdldE93bmVyQnlFbWFpbCk7XG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgZGVsZXRlT3duZXIpO1xuXG5yZWdpc3RlckRlZmluaXRpb24ocm91dGVyLCB7IHRhZ3M6ICdPd25lcnMnLCBtYXBwZWRTY2hlbWE6ICdPd25lcicsIGJhc2VQYXRoOiAnL2FwaS92MS9vd25lcnMnIH0pO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFBQyxlQUFBLEdBQWY7QUFFQUQsTUFBTSxDQUFDRSxJQUFQLENBQVksR0FBWixFQUFpQkMsb0JBQWpCO0FBQ0FILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLE1BQVgsRUFBbUJDLGtCQUFuQjtBQUNBTCxNQUFNLENBQUNNLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxtQkFBaEI7QUFDQVAsTUFBTSxDQUFDTSxHQUFQLENBQVcsTUFBWCxFQUFtQkUsbUJBQW5CO0FBQ0FSLE1BQU0sQ0FBQ00sR0FBUCxDQUFXLGVBQVgsRUFBNEJHLHNCQUE1QjtBQUNBVCxNQUFNLENBQUNVLE1BQVAsQ0FBYyxNQUFkLEVBQXNCQyxrQkFBdEI7QUFFQSxJQUFBQyw2QkFBQSxFQUFtQlosTUFBbkIsRUFBMkI7RUFBRWEsSUFBSSxFQUFFLFFBQVI7RUFBa0JDLFlBQVksRUFBRSxPQUFoQztFQUF5Q0MsUUFBUSxFQUFFO0FBQW5ELENBQTNCO2VBQ2VmLE0ifQ==","map":{"version":3,"names":["router","Router","post","registerOwner","put","updateOwner","get","getAllOwners","getOwnerById","getOwnerByEmail","delete","deleteOwner","registerDefinition","tags","mappedSchema","basePath"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/routes/","sources":["owner.routes.js"],"sourcesContent":["import { Router } from 'express';\nimport { registerDefinition } from 'swaggiffy';\nimport { registerOwner, deleteOwner, getAllOwners, getOwnerByEmail, getOwnerById, updateOwner } from '../controllers/owner.controller';\n\nconst router = Router();\n\nrouter.post('/', registerOwner);\nrouter.put('/:id', updateOwner);\nrouter.get('/', getAllOwners);\nrouter.get('/:id', getOwnerById);\nrouter.get('/email/:email', getOwnerByEmail);\nrouter.delete('/:id', deleteOwner);\n\nregisterDefinition(router, { tags: 'Owners', mappedSchema: 'Owner', basePath: '/api/v1/owners' });\nexport default router;"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,GAAZ,EAAiBC,oBAAjB;AACAH,MAAM,CAACI,GAAP,CAAW,MAAX,EAAmBC,kBAAnB;AACAL,MAAM,CAACM,GAAP,CAAW,GAAX,EAAgBC,mBAAhB;AACAP,MAAM,CAACM,GAAP,CAAW,MAAX,EAAmBE,mBAAnB;AACAR,MAAM,CAACM,GAAP,CAAW,eAAX,EAA4BG,sBAA5B;AACAT,MAAM,CAACU,MAAP,CAAc,MAAd,EAAsBC,kBAAtB;AAEA,IAAAC,6BAAA,EAAmBZ,MAAnB,EAA2B;EAAEa,IAAI,EAAE,QAAR;EAAkBC,YAAY,EAAE,OAAhC;EAAyCC,QAAQ,EAAE;AAAnD,CAA3B;eACef,M"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/controllers/owner.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateOwner = exports.registerOwner = exports.getOwnerById = exports.getOwnerByEmail = exports.getAllOwners = exports.deleteOwner = void 0;\n\nvar _owner = _interopRequireDefault(require(\"../database/models/owner.model\"));\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//create Owner\nconst registerOwner = async (req, res) => {\n  const {\n    error\n  } = validateOwner(req.body);\n  if (error) return res.status(400).send({\n    success: false,\n    message: error.details[0].message\n  });\n  const owner = new _owner.default({\n    names: req.body.names,\n    phone: req.body.phone,\n    nationalId: req.body.nationalId,\n    address: req.body.address\n  });\n\n  try {\n    await owner.save();\n    res.send({\n      success: true,\n      message: 'Owner created successfully',\n      data: owner\n    });\n  } catch (err) {\n    res.status(500).send({\n      success: false,\n      message: err.message\n    });\n  }\n};\n\nexports.registerOwner = registerOwner;\n\nconst getAllOwners = async (req, res) => {\n  const owners = await _owner.default.find();\n  return res.status(200).json({\n    success: true,\n    data: owners\n  });\n};\n\nexports.getAllOwners = getAllOwners;\n\nconst getOwnerById = async (req, res) => {\n  const uowner = await _owner.default.findOne({\n    _id: req.params.id\n  });\n  if (!uowner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: uowner\n  });\n};\n\nexports.getOwnerById = getOwnerById;\n\nconst getOwnerByEmail = async (req, res) => {\n  const uowner = await _owner.default.findOne({\n    email: req.params.email\n  });\n  if (!uowner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: uowner\n  });\n};\n\nexports.getOwnerByEmail = getOwnerByEmail;\n\nconst updateOwner = async (req, res) => {\n  const uowner = await _owner.default.findOne({\n    _id: req.params.id\n  });\n  if (!uowner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  const newOwner = await _owner.default.findOneAndUpdate({\n    _id: req.params.id\n  }, req.body, {\n    new: true\n  });\n  return res.status(200).json({\n    success: true,\n    data: newOwner\n  });\n};\n\nexports.updateOwner = updateOwner;\n\nconst deleteOwner = async (req, res) => {\n  const owner = await _owner.default.findOne({\n    _id: req.params.id\n  });\n  if (!owner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  await _owner.default.findOneAndDelete({\n    _id: req.params.id\n  });\n  return res.status(200).json({\n    success: true,\n    data: owner\n  });\n}; //validate Owner\n\n\nexports.deleteOwner = deleteOwner;\n\nfunction validateOwner(owner) {\n  const schema = _joi.default.object({\n    names: _joi.default.string().min(3).max(50).required(),\n    phone: _joi.default.string().min(10).max(12).required(),\n    nationalId: _joi.default.string().min(16).max(16).required(),\n    address: _joi.default.string().min(3).max(50).required()\n  });\n\n  return schema.validate(owner);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3Rlck93bmVyIiwicmVxIiwicmVzIiwiZXJyb3IiLCJ2YWxpZGF0ZU93bmVyIiwiYm9keSIsInN0YXR1cyIsInNlbmQiLCJzdWNjZXNzIiwibWVzc2FnZSIsImRldGFpbHMiLCJvd25lciIsIk93bmVycyIsIm5hbWVzIiwicGhvbmUiLCJuYXRpb25hbElkIiwiYWRkcmVzcyIsInNhdmUiLCJkYXRhIiwiZXJyIiwiZ2V0QWxsT3duZXJzIiwib3duZXJzIiwiZmluZCIsImpzb24iLCJnZXRPd25lckJ5SWQiLCJ1b3duZXIiLCJmaW5kT25lIiwiX2lkIiwicGFyYW1zIiwiaWQiLCJnZXRPd25lckJ5RW1haWwiLCJlbWFpbCIsInVwZGF0ZU93bmVyIiwibmV3T3duZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibmV3IiwiZGVsZXRlT3duZXIiLCJmaW5kT25lQW5kRGVsZXRlIiwic2NoZW1hIiwiSm9pIiwib2JqZWN0Iiwic3RyaW5nIiwibWluIiwibWF4IiwicmVxdWlyZWQiLCJ2YWxpZGF0ZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm93bmVyLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE93bmVycyBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMvb3duZXIubW9kZWwnO1xuaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuXG4vL2NyZWF0ZSBPd25lclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyT3duZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IGVycm9yIH0gPSB2YWxpZGF0ZU93bmVyKHJlcS5ib2R5KTtcbiAgICBpZiAoZXJyb3IpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5kZXRhaWxzWzBdLm1lc3NhZ2VcbiAgICB9KTtcblxuICAgIGNvbnN0IG93bmVyID0gbmV3IE93bmVycyh7XG4gICAgICAgIG5hbWVzOiByZXEuYm9keS5uYW1lcyxcbiAgICAgICAgcGhvbmU6IHJlcS5ib2R5LnBob25lLFxuICAgICAgICBuYXRpb25hbElkOiByZXEuYm9keS5uYXRpb25hbElkLFxuICAgICAgICBhZGRyZXNzOiByZXEuYm9keS5hZGRyZXNzLFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG93bmVyLnNhdmUoKTtcbiAgICAgICAgcmVzLnNlbmQoeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnT3duZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCBkYXRhOiBvd25lciB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGNvbnN0IGdldEFsbE93bmVycyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG93bmVycyA9IGF3YWl0IE93bmVycy5maW5kKCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogb3duZXJzIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0T3duZXJCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdW93bmVyID0gYXdhaXQgT3duZXJzLmZpbmRPbmUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSk7XG4gICAgaWYgKCF1b3duZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk93bmVyIGRvZXMgbm90IGV4aXN0XCIgfSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdW93bmVyIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0T3duZXJCeUVtYWlsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdW93bmVyID0gYXdhaXQgT3duZXJzLmZpbmRPbmUoeyBlbWFpbDogcmVxLnBhcmFtcy5lbWFpbCB9KTtcbiAgICBpZiAoIXVvd25lcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiT3duZXIgZG9lcyBub3QgZXhpc3RcIiB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB1b3duZXIgfSk7XG59XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVPd25lciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVvd25lciA9IGF3YWl0IE93bmVycy5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdW93bmVyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJPd25lciBkb2VzIG5vdCBleGlzdFwiIH0pO1xuICAgIGNvbnN0IG5ld093bmVyID0gYXdhaXQgT3duZXJzLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgcmVxLmJvZHksIHsgbmV3OiB0cnVlIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG5ld093bmVyIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZGVsZXRlT3duZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvd25lciA9IGF3YWl0IE93bmVycy5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghb3duZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk93bmVyIGRvZXMgbm90IGV4aXN0XCIgfSk7XG5cbiAgICBhd2FpdCBPd25lcnMuZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBvd25lciB9KTtcbn1cblxuLy92YWxpZGF0ZSBPd25lclxuZnVuY3Rpb24gdmFsaWRhdGVPd25lcihvd25lcikge1xuICAgIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgICBuYW1lczogSm9pLnN0cmluZygpLm1pbigzKS5tYXgoNTApLnJlcXVpcmVkKCksXG4gICAgICAgIHBob25lOiBKb2kuc3RyaW5nKCkubWluKDEwKS5tYXgoMTIpLnJlcXVpcmVkKCksXG4gICAgICAgIG5hdGlvbmFsSWQ6IEpvaS5zdHJpbmcoKS5taW4oMTYpLm1heCgxNikucmVxdWlyZWQoKSxcbiAgICAgICAgYWRkcmVzczogSm9pLnN0cmluZygpLm1pbigzKS5tYXgoNTApLnJlcXVpcmVkKCksXG4gICAgfSk7XG4gICAgcmV0dXJuIHNjaGVtYS52YWxpZGF0ZShvd25lcik7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQTtBQUNPLE1BQU1BLGFBQWEsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7RUFDN0MsTUFBTTtJQUFFQztFQUFGLElBQVlDLGFBQWEsQ0FBQ0gsR0FBRyxDQUFDSSxJQUFMLENBQS9CO0VBQ0EsSUFBSUYsS0FBSixFQUFXLE9BQU9ELEdBQUcsQ0FBQ0ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0lBQ25DQyxPQUFPLEVBQUUsS0FEMEI7SUFFbkNDLE9BQU8sRUFBRU4sS0FBSyxDQUFDTyxPQUFOLENBQWMsQ0FBZCxFQUFpQkQ7RUFGUyxDQUFyQixDQUFQO0VBS1gsTUFBTUUsS0FBSyxHQUFHLElBQUlDLGNBQUosQ0FBVztJQUNyQkMsS0FBSyxFQUFFWixHQUFHLENBQUNJLElBQUosQ0FBU1EsS0FE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","map":{"version":3,"names":["registerOwner","req","res","error","validateOwner","body","status","send","success","message","details","owner","Owners","names","phone","nationalId","address","save","data","err","getAllOwners","owners","find","json","getOwnerById","uowner","findOne","_id","params","id","getOwnerByEmail","email","updateOwner","newOwner","findOneAndUpdate","new","deleteOwner","findOneAndDelete","schema","Joi","object","string","min","max","required","validate"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/controllers/","sources":["owner.controller.js"],"sourcesContent":["import Owners from '../database/models/owner.model';\nimport Joi from 'joi';\n\n//create Owner\nexport const registerOwner = async (req, res) => {\n    const { error } = validateOwner(req.body);\n    if (error) return res.status(400).send({\n        success: false,\n        message: error.details[0].message\n    });\n\n    const owner = new Owners({\n        names: req.body.names,\n        phone: req.body.phone,\n        nationalId: req.body.nationalId,\n        address: req.body.address,\n    });\n    try {\n        await owner.save();\n        res.send({ success: true, message: 'Owner created successfully', data: owner });\n    }\n    catch (err) {\n        res.status(500).send({ success: false, message: err.message });\n    }\n\n}\n\nexport const getAllOwners = async (req, res) => {\n    const owners = await Owners.find();\n    return res.status(200).json({ success: true, data: owners });\n}\n\nexport const getOwnerById = async (req, res) => {\n    const uowner = await Owners.findOne({ _id: req.params.id });\n    if (!uowner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n    return res.status(200).json({ success: true, data: uowner });\n}\n\nexport const getOwnerByEmail = async (req, res) => {\n    const uowner = await Owners.findOne({ email: req.params.email });\n    if (!uowner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n    return res.status(200).json({ success: true, data: uowner });\n}\n\nexport const updateOwner = async (req, res) => {\n    const uowner = await Owners.findOne({ _id: req.params.id });\n    if (!uowner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n    const newOwner = await Owners.findOneAndUpdate({ _id: req.params.id }, req.body, { new: true });\n    return res.status(200).json({ success: true, data: newOwner });\n}\n\nexport const deleteOwner = async (req, res) => {\n    const owner = await Owners.findOne({ _id: req.params.id });\n    if (!owner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n\n    await Owners.findOneAndDelete({ _id: req.params.id });\n    return res.status(200).json({ success: true, data: owner });\n}\n\n//validate Owner\nfunction validateOwner(owner) {\n    const schema = Joi.object({\n        names: Joi.string().min(3).max(50).required(),\n        phone: Joi.string().min(10).max(12).required(),\n        nationalId: Joi.string().min(16).max(16).required(),\n        address: Joi.string().min(3).max(50).required(),\n    });\n    return schema.validate(owner);\n}"],"mappings":"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"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/models/owner.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema({\n  names: {\n    type: String,\n    required: true\n  },\n  phone: {\n    type: String,\n    required: true\n  },\n  nationalId: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  address: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\n(0, _swaggiffy.registerSchema)('CarOwner', Schema, {\n  orm: 'mongoose'\n}); //create mongoose virtual ref for vehicle\n\nSchema.virtual(\"vehicles\", {\n  ref: \"Vehicle\",\n  localField: \"_id\",\n  foreignField: \"ownerId\"\n});\n\nconst Owner = _mongoose.default.model(\"Owner\", Schema);\n\nvar _default = Owner;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIm5hbWVzIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwicGhvbmUiLCJuYXRpb25hbElkIiwidW5pcXVlIiwiYWRkcmVzcyIsInRpbWVzdGFtcHMiLCJyZWdpc3RlclNjaGVtYSIsIm9ybSIsInZpcnR1YWwiLCJyZWYiLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiT3duZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJvd25lci5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgeyByZWdpc3RlclNjaGVtYSB9IGZyb20gXCJzd2FnZ2lmZnlcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBuYW1lczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgcGhvbmU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIG5hdGlvbmFsSWQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG5cbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxucmVnaXN0ZXJTY2hlbWEoJ0Nhck93bmVyJywgU2NoZW1hLCB7IG9ybTogJ21vbmdvb3NlJyB9KTtcblxuLy9jcmVhdGUgbW9uZ29vc2UgdmlydHVhbCByZWYgZm9yIHZlaGljbGVcblNjaGVtYS52aXJ0dWFsKFwidmVoaWNsZXNcIiwge1xuICAgIHJlZjogXCJWZWhpY2xlXCIsXG4gICAgbG9jYWxGaWVsZDogXCJfaWRcIixcbiAgICBmb3JlaWduRmllbGQ6IFwib3duZXJJZFwiLFxufSlcblxuY29uc3QgT3duZXIgPSBtb25nb29zZS5tb2RlbChcIk93bmVyXCIsIFNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBPd25lcjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsaUJBQUEsQ0FBU0QsTUFBVCxDQUFnQjtFQUMzQkUsS0FBSyxFQUFFO0lBQ0hDLElBQUksRUFBRUMsTUFESDtJQUVIQyxRQUFRLEVBQUU7RUFGUCxDQURvQjtFQUszQkMsS0FBSyxFQUFFO0lBQ0hILElBQUksRUFBRUMsTUFESDtJQUVIQyxRQUFRLEVBQUU7RUFGUCxDQUxvQjtFQVMzQkUsVUFBVSxFQUFFO0lBQ1JKLElBQUksRUFBRUMsTUFERTtJQUVSQyxRQUFRLEVBQUUsSUFGRjtJQUdSRyxNQUFNLEVBQUU7RUFIQSxDQVRlO0VBYzNCQyxPQUFPLEVBQUU7SUFDTE4sSUFBSSxFQUFFQyxNQUREO0lBRUxDLFFBQVEsRUFBRTtFQUZMO0FBZGtCLENBQWhCLEVBbUJaO0VBQ0NLLFVBQVUsRUFBRTtBQURiLENBbkJZLENBQWY7O0FBdUJBLElBQUFDLHlCQUFBLEVBQWUsVUFBZixFQUEyQlgsTUFBM0IsRUFBbUM7RUFBRVksR0FBRyxFQUFFO0FBQVAsQ0FBbkMsRSxDQUVBOztBQUNBWixNQUFNLENBQUNhLE9BQVAsQ0FBZSxVQUFmLEVBQTJCO0VBQ3ZCQyxHQUFHLEVBQUUsU0FEa0I7RUFFdkJDLFVBQVUsRUFBRSxLQUZXO0VBR3ZCQyxZQUFZLEVBQUU7QUFIUyxDQUEzQjs7QUFNQSxNQUFNQyxLQUFLLEdBQUdoQixpQkFBQSxDQUFTaUIsS0FBVCxDQUFlLE9BQWYsRUFBd0JsQixNQUF4QixDQUFkOztlQUNlaUIsSyJ9","map":{"version":3,"names":["Schema","mongoose","names","type","String","required","phone","nationalId","unique","address","timestamps","registerSchema","orm","virtual","ref","localField","foreignField","Owner","model"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/models/","sources":["owner.model.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { registerSchema } from \"swaggiffy\";\n\nconst Schema = mongoose.Schema({\n    names: {\n        type: String,\n        required: true,\n    },\n    phone: {\n        type: String,\n        required: true,\n    },\n    nationalId: {\n        type: String,\n        required: true,\n        unique: true,\n    },\n    address: {\n        type: String,\n        required: true,\n    },\n\n}, {\n    timestamps: true\n});\n\nregisterSchema('CarOwner', Schema, { orm: 'mongoose' });\n\n//create mongoose virtual ref for vehicle\nSchema.virtual(\"vehicles\", {\n    ref: \"Vehicle\",\n    localField: \"_id\",\n    foreignField: \"ownerId\",\n})\n\nconst Owner = mongoose.model(\"Owner\", Schema);\nexport default Owner;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAT,CAAgB;EAC3BE,KAAK,EAAE;IACHC,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CADoB;EAK3BC,KAAK,EAAE;IACHH,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CALoB;EAS3BE,UAAU,EAAE;IACRJ,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,IAFF;IAGRG,MAAM,EAAE;EAHA,CATe;EAc3BC,OAAO,EAAE;IACLN,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL;AAdkB,CAAhB,EAmBZ;EACCK,UAAU,EAAE;AADb,CAnBY,CAAf;;AAuBA,IAAAC,yBAAA,EAAe,UAAf,EAA2BX,MAA3B,EAAmC;EAAEY,GAAG,EAAE;AAAP,CAAnC,E,CAEA;;AACAZ,MAAM,CAACa,OAAP,CAAe,UAAf,EAA2B;EACvBC,GAAG,EAAE,SADkB;EAEvBC,UAAU,EAAE,KAFW;EAGvBC,YAAY,EAAE;AAHS,CAA3B;;AAMA,MAAMC,KAAK,GAAGhB,iBAAA,CAASiB,KAAT,CAAe,OAAf,EAAwBlB,MAAxB,CAAd;;eACeiB,K"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/routes/vehicle.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _vehicle = require(\"../controllers/vehicle.controller\");\n\nvar _auth = _interopRequireDefault(require(\"../middlewares/auth.middleware\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.post('/', _auth.default, _vehicle.registerVehicle);\nrouter.get('/', _vehicle.getAllVehicles);\nrouter.get('/:id', _vehicle.getVehicleById);\nrouter.get('/owner/:id', _vehicle.getVehiclesByOwnerId);\nrouter.put('/:id', _vehicle.updateVehicle);\nrouter.delete('/:id', _vehicle.deleteVehicle); // router.put('/:id/vote', AuthMiddleware, vote);\n\n(0, _swaggiffy.registerDefinition)(router, {\n  tags: \"Vehicles\",\n  mappedSchema: \"Vehicle\",\n  basePath: \"/api/v1/vehicle\"\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiQXV0aE1pZGRsZXdhcmUiLCJyZWdpc3RlclZlaGljbGUiLCJnZXQiLCJnZXRBbGxWZWhpY2xlcyIsImdldFZlaGljbGVCeUlkIiwiZ2V0VmVoaWNsZXNCeU93bmVySWQiLCJwdXQiLCJ1cGRhdGVWZWhpY2xlIiwiZGVsZXRlIiwiZGVsZXRlVmVoaWNsZSIsInJlZ2lzdGVyRGVmaW5pdGlvbiIsInRhZ3MiLCJtYXBwZWRTY2hlbWEiLCJiYXNlUGF0aCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ2ZWhpY2xlLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZpbml0aW9uIH0gZnJvbSBcInN3YWdnaWZmeVwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJWZWhpY2xlLCBkZWxldGVWZWhpY2xlLCBnZXRBbGxWZWhpY2xlcywgZ2V0VmVoaWNsZUJ5SWQsIGdldFZlaGljbGVzQnlPd25lcklkLCB1cGRhdGVWZWhpY2xlIH0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL3ZlaGljbGUuY29udHJvbGxlclwiO1xuaW1wb3J0IEF1dGhNaWRkbGV3YXJlIGZyb20gXCIuLi9taWRkbGV3YXJlcy9hdXRoLm1pZGRsZXdhcmVcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5cbnJvdXRlci5wb3N0KCcvJywgQXV0aE1pZGRsZXdhcmUsIHJlZ2lzdGVyVmVoaWNsZSk7XG5yb3V0ZXIuZ2V0KCcvJywgZ2V0QWxsVmVoaWNsZXMpO1xucm91dGVyLmdldCgnLzppZCcsIGdldFZlaGljbGVCeUlkKTtcbnJvdXRlci5nZXQoJy9vd25lci86aWQnLCBnZXRWZWhpY2xlc0J5T3duZXJJZCk7XG5yb3V0ZXIucHV0KCcvOmlkJywgdXBkYXRlVmVoaWNsZSk7XG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgZGVsZXRlVmVoaWNsZSk7XG4vLyByb3V0ZXIucHV0KCcvOmlkL3ZvdGUnLCBBdXRoTWlkZGxld2FyZSwgdm90ZSk7XG5cbnJlZ2lzdGVyRGVmaW5pdGlvbihyb3V0ZXIsIHsgdGFnczogXCJWZWhpY2xlc1wiLCBtYXBwZWRTY2hlbWE6IFwiVmVoaWNsZVwiLCBiYXNlUGF0aDogXCIvYXBpL3YxL3ZlaGljbGVcIiB9KTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUFDLGVBQUEsR0FBZjtBQUVBRCxNQUFNLENBQUNFLElBQVAsQ0FBWSxHQUFaLEVBQWlCQyxhQUFqQixFQUFpQ0Msd0JBQWpDO0FBQ0FKLE1BQU0sQ0FBQ0ssR0FBUCxDQUFXLEdBQVgsRUFBZ0JDLHVCQUFoQjtBQUNBTixNQUFNLENBQUNLLEdBQVAsQ0FBVyxNQUFYLEVBQW1CRSx1QkFBbkI7QUFDQVAsTUFBTSxDQUFDSyxHQUFQLENBQVcsWUFBWCxFQUF5QkcsNkJBQXpCO0FBQ0FSLE1BQU0sQ0FBQ1MsR0FBUCxDQUFXLE1BQVgsRUFBbUJDLHNCQUFuQjtBQUNBVixNQUFNLENBQUNXLE1BQVAsQ0FBYyxNQUFkLEVBQXNCQyxzQkFBdEIsRSxDQUNBOztBQUVBLElBQUFDLDZCQUFBLEVBQW1CYixNQUFuQixFQUEyQjtFQUFFYyxJQUFJLEVBQUUsVUFBUjtFQUFvQkMsWUFBWSxFQUFFLFNBQWxDO0VBQTZDQyxRQUFRLEVBQUU7QUFBdkQsQ0FBM0I7ZUFFZWhCLE0ifQ==","map":{"version":3,"names":["router","Router","post","AuthMiddleware","registerVehicle","get","getAllVehicles","getVehicleById","getVehiclesByOwnerId","put","updateVehicle","delete","deleteVehicle","registerDefinition","tags","mappedSchema","basePath"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/routes/","sources":["vehicle.routes.js"],"sourcesContent":["import { Router } from \"express\";\nimport { registerDefinition } from \"swaggiffy\";\nimport { registerVehicle, deleteVehicle, getAllVehicles, getVehicleById, getVehiclesByOwnerId, updateVehicle } from \"../controllers/vehicle.controller\";\nimport AuthMiddleware from \"../middlewares/auth.middleware\";\n\nconst router = Router();\n\nrouter.post('/', AuthMiddleware, registerVehicle);\nrouter.get('/', getAllVehicles);\nrouter.get('/:id', getVehicleById);\nrouter.get('/owner/:id', getVehiclesByOwnerId);\nrouter.put('/:id', updateVehicle);\nrouter.delete('/:id', deleteVehicle);\n// router.put('/:id/vote', AuthMiddleware, vote);\n\nregisterDefinition(router, { tags: \"Vehicles\", mappedSchema: \"Vehicle\", basePath: \"/api/v1/vehicle\" });\n\nexport default router;"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,GAAZ,EAAiBC,aAAjB,EAAiCC,wBAAjC;AACAJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAgBC,uBAAhB;AACAN,MAAM,CAACK,GAAP,CAAW,MAAX,EAAmBE,uBAAnB;AACAP,MAAM,CAACK,GAAP,CAAW,YAAX,EAAyBG,6BAAzB;AACAR,MAAM,CAACS,GAAP,CAAW,MAAX,EAAmBC,sBAAnB;AACAV,MAAM,CAACW,MAAP,CAAc,MAAd,EAAsBC,sBAAtB,E,CACA;;AAEA,IAAAC,6BAAA,EAAmBb,MAAnB,EAA2B;EAAEc,IAAI,EAAE,UAAR;EAAoBC,YAAY,EAAE,SAAlC;EAA6CC,QAAQ,EAAE;AAAvD,CAA3B;eAEehB,M"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/controllers/vehicle.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateVehicle = exports.registerVehicle = exports.getVehiclesByOwnerId = exports.getVehicleById = exports.getAllVehicles = exports.deleteVehicle = void 0;\n\nvar _vehicle = _interopRequireDefault(require(\"../database/models/vehicle.model\"));\n\nvar _admin = _interopRequireDefault(require(\"../database/models/admin.model\"));\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst registerVehicle = async (req, res) => {\n  const {\n    error\n  } = validateVehicle(req.body);\n  if (error) return res.status(400).send({\n    success: false,\n    message: error.details[0].message\n  }); //validate plateNumber to be of format RA-X-NNN-X\n\n  const {\n    chasisNumber,\n    manufacturer,\n    manufactureYear,\n    model,\n    price,\n    color,\n    plateNumber,\n    ownerId\n  } = req.body; //check if owner exists\n\n  const owner = await _admin.default.findById(ownerId);\n  if (!owner) return res.status(400).send({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  const vehicle = new _vehicle.default({\n    chasisNumber,\n    manufacturer,\n    manufactureYear,\n    model,\n    price,\n    color,\n    plateNumber,\n    ownerId\n  });\n\n  try {\n    await vehicle.save();\n    return res.status(201).json({\n      success: true,\n      data: vehicle\n    });\n  } catch (error) {\n    return res.status(400).send({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.registerVehicle = registerVehicle;\n\nconst getAllVehicles = async (req, res) => {\n  try {\n    const vehicles = await _vehicle.default.find();\n    return res.status(200).json({\n      success: true,\n      data: vehicles\n    });\n  } catch (error) {\n    return res.status(400).send({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.getAllVehicles = getAllVehicles;\n\nconst getVehicleById = async (req, res) => {\n  const vehicle = await _vehicle.default.fin({\n    _id: req.params.id\n  });\n  if (!vehicle) return res.status(404).json({\n    success: false,\n    message: \"Vehicle does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: vehicle\n  });\n};\n\nexports.getVehicleById = getVehicleById;\n\nconst getVehiclesByOwnerId = async (req, res) => {\n  //find all vehicles by ownerId\n  const vehicles = await _vehicle.default.find({\n    ownerId: req.params.id\n  });\n  if (!vehicles) return res.status(404).json({\n    success: false,\n    message: \"Vehicles does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: vehicles\n  });\n};\n\nexports.getVehiclesByOwnerId = getVehiclesByOwnerId;\n\nconst updateVehicle = async (req, res) => {\n  const vehicle = await _vehicle.default.findOne({\n    _id: req.params.id\n  });\n  if (!vehicle) return res.status(404).json({\n    success: false,\n    message: \"Vehicle does not exist\"\n  });\n  const updated = await _vehicle.default.findOneAndUpdate({\n    _id: req.params.id\n  }, req.body, {\n    new: true\n  });\n  return res.status(200).json({\n    success: true,\n    data: updated\n  });\n};\n\nexports.updateVehicle = updateVehicle;\n\nconst deleteVehicle = async (req, res) => {\n  const vehicle = await _vehicle.default.findOne({\n    _id: req.params.id\n  });\n  if (!vehicle) return res.status(404).json({\n    success: false,\n    message: \"Vehicle does not exist\"\n  });\n  await _vehicle.default.findOneAndDelete({\n    _id: req.params.id\n  });\n  return res.status(200).json({\n    success: true,\n    data: vehicle\n  });\n};\n\nexports.deleteVehicle = deleteVehicle;\n\nfunction validateVehicle(vh) {\n  const schema = _joi.default.object({\n    chasisNumber: _joi.default.string().min(4).max(30).required(),\n    manufacturer: _joi.default.string().min(4).max(30).required(),\n    manufactureYear: _joi.default.number().min(1900).max(2020).required(),\n    model: _joi.default.string().min(4).max(30).required(),\n    price: _joi.default.number().min(1).max(1000000000).required(),\n    color: _joi.default.string().min(4).max(30),\n    plateNumber: _joi.default.string().min(4).max(7).required(),\n    ownerId: _joi.default.string().min(4).max(30)\n  });\n\n  return schema.validate(vh);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlclZlaGljbGUiLCJyZXEiLCJyZXMiLCJlcnJvciIsInZhbGlkYXRlVmVoaWNsZSIsImJvZHkiLCJzdGF0dXMiLCJzZW5kIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiY2hhc2lzTnVtYmVyIiwibWFudWZhY3R1cmVyIiwibWFudWZhY3R1cmVZZWFyIiwibW9kZWwiLCJwcmljZSIsImNvbG9yIiwicGxhdGVOdW1iZXIiLCJvd25lcklkIiwib3duZXIiLCJBZG1pbiIsImZpbmRCeUlkIiwidmVoaWNsZSIsIlZlaGljbGUiLCJzYXZlIiwianNvbiIsImRhdGEiLCJnZXRBbGxWZWhpY2xlcyIsInZlaGljbGVzIiwiZmluZCIsImdldFZlaGljbGVCeUlkIiwiZmluIiwiX2lkIiwicGFyYW1zIiwiaWQiLCJnZXRWZWhpY2xlc0J5T3duZXJJZCIsInVwZGF0ZVZlaGljbGUiLCJmaW5kT25lIiwidXBkYXRlZCIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJkZWxldGVWZWhpY2xlIiwiZmluZE9uZUFuZERlbGV0ZSIsInZoIiwic2NoZW1hIiwiSm9pIiwib2JqZWN0Iiwic3RyaW5nIiwibWluIiwibWF4IiwicmVxdWlyZWQiLCJudW1iZXIiLCJ2YWxpZGF0ZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInZlaGljbGUuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmVoaWNsZSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMvdmVoaWNsZS5tb2RlbCc7XG5pbXBvcnQgQWRtaW4gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzL2FkbWluLm1vZGVsJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVmVoaWNsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IHZhbGlkYXRlVmVoaWNsZShyZXEuYm9keSk7XG4gICAgaWYgKGVycm9yKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IuZGV0YWlsc1swXS5tZXNzYWdlXG4gICAgfSk7XG5cbiAgICAvL3ZhbGlkYXRlIHBsYXRlTnVtYmVyIHRvIGJlIG9mIGZvcm1hdCBSQS1YLU5OTi1YXG5cbiAgICBcblxuXG4gICAgY29uc3Qge1xuICAgICAgICBjaGFzaXNOdW1iZXIsXG4gICAgICAgIG1hbnVmYWN0dXJlcixcbiAgICAgICAgbWFudWZhY3R1cmVZZWFyLFxuICAgICAgICBtb2RlbCxcbiAgICAgICAgcHJpY2UsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICBwbGF0ZU51bWJlcixcbiAgICAgICAgb3duZXJJZFxuICAgIH0gPSByZXEuYm9keTtcblxuICAgIC8vY2hlY2sgaWYgb3duZXIgZXhpc3RzXG4gICAgY29uc3Qgb3duZXIgPSBhd2FpdCBBZG1pbi5maW5kQnlJZChvd25lcklkKTtcbiAgICBpZiAoIW93bmVyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogXCJPd25lciBkb2VzIG5vdCBleGlzdFwiXG4gICAgfSk7XG5cbiAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFZlaGljbGUoe1xuICAgICAgICBjaGFzaXNOdW1iZXIsXG4gICAgICAgIG1hbnVmYWN0dXJlcixcbiAgICAgICAgbWFudWZhY3R1cmVZZWFyLFxuICAgICAgICBtb2RlbCxcbiAgICAgICAgcHJpY2UsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICBwbGF0ZU51bWJlcixcbiAgICAgICAgb3duZXJJZFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHZlaGljbGUuc2F2ZSgpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB2ZWhpY2xlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBjb25zdCBnZXRBbGxWZWhpY2xlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZlaGljbGVzID0gYXdhaXQgVmVoaWNsZS5maW5kKCk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHZlaGljbGVzIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjb25zdCBnZXRWZWhpY2xlQnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHZlaGljbGUgPSBhd2FpdCBWZWhpY2xlLmZpbih7IF9pZDogcmVxLnBhcmFtcy5pZCB9KTtcbiAgICBpZiAoIXZlaGljbGUpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlZlaGljbGUgZG9lcyBub3QgZXhpc3RcIiB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB2ZWhpY2xlIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0VmVoaWNsZXNCeU93bmVySWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAvL2ZpbmQgYWxsIHZlaGljbGVzIGJ5IG93bmVySWRcbiAgICBjb25zdCB2ZWhpY2xlcyA9IGF3YWl0IFZlaGljbGUuZmluZCh7IG93bmVySWQ6IHJlcS5wYXJhbXMuaWQgfSk7XG4gICAgaWYgKCF2ZWhpY2xlcykgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVmVoaWNsZXMgZG9lcyBub3QgZXhpc3RcIiB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB2ZWhpY2xlcyB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVZlaGljbGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB2ZWhpY2xlID0gYXdhaXQgVmVoaWNsZS5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdmVoaWNsZSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVmVoaWNsZSBkb2VzIG5vdCBleGlzdFwiIH0pO1xuXG4gICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IFZlaGljbGUuZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9LCByZXEuYm9keSwgeyBuZXc6IHRydWUgfSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdXBkYXRlZCB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVZlaGljbGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB2ZWhpY2xlID0gYXdhaXQgVmVoaWNsZS5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdmVoaWNsZSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVmVoaWNsZSBkb2VzIG5vdCBleGlzdFwiIH0pO1xuICAgIGF3YWl0IFZlaGljbGUuZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB2ZWhpY2xlIH0pO1xufVxuXG5cbmZ1bmN0aW9uIHZhbGlkYXRlVmVoaWNsZSh2aCkge1xuICAgIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgICBjaGFzaXNOdW1iZXI6IEpvaS5zdHJpbmcoKS5taW4oNCkubWF4KDMwKS5yZXF1aXJlZCgpLFxuICAgICAgICBtYW51ZmFjdHVyZXI6IEpvaS5zdHJpbmcoKS5taW4oNCkubWF4KDMwKS5yZXF1aXJlZCgpLFxuICAgICAgICBtYW51ZmFjdHVyZVllYXI6IEpvaS5udW1iZXIoKS5taW4oMTkwMCkubWF4KDIwMjApLnJlcXVpcmVkKCksXG4gICAgICAgIG1vZGVsOiBKb2kuc3RyaW5nKCkubWluKDQpLm1heCgzMCkucmVxdWlyZWQoKSxcbiAgICAgICAgcHJpY2U6IEpvaS5udW1iZXIoKS5taW4oMSkubWF4KDEwMDAwMDAwMDApLnJlcXVpcmVkKCksXG4gICAgICAgIGNvbG9yOiBKb2kuc3RyaW5nKCkubWluKDQpLm1heCgzMCksXG4gICAgICAgIHBsYXRlTnVtYmVyOiBKb2kuc3RyaW5nKCkubWluKDQpLm1heCg3KS5yZXF1aXJlZCgpLFxuICAgICAgICBvd25lcklkOiBKb2kuc3RyaW5nKCkubWluKDQpLm1heCgzMCksXG4gICAgfSlcblxuICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUodmgpO1xufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRU8sTUFBTUEsZUFBZSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtFQUMvQyxNQUFNO0lBQUVDO0VBQUYsSUFBWUMsZUFBZSxDQUFDSCxHQUFHLENBQUNJLElBQUwsQ0FBakM7RUFDQSxJQUFJRixLQUFKLEVBQVcs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","map":{"version":3,"names":["registerVehicle","req","res","error","validateVehicle","body","status","send","success","message","details","chasisNumber","manufacturer","manufactureYear","model","price","color","plateNumber","ownerId","owner","Admin","findById","vehicle","Vehicle","save","json","data","getAllVehicles","vehicles","find","getVehicleById","fin","_id","params","id","getVehiclesByOwnerId","updateVehicle","findOne","updated","findOneAndUpdate","new","deleteVehicle","findOneAndDelete","vh","schema","Joi","object","string","min","max","required","number","validate"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/controllers/","sources":["vehicle.controller.js"],"sourcesContent":["import Vehicle from '../database/models/vehicle.model';\nimport Admin from '../database/models/admin.model';\nimport Joi from 'joi';\n\nexport const registerVehicle = async (req, res) => {\n    const { error } = validateVehicle(req.body);\n    if (error) return res.status(400).send({\n        success: false,\n        message: error.details[0].message\n    });\n\n    //validate plateNumber to be of format RA-X-NNN-X\n\n    \n\n\n    const {\n        chasisNumber,\n        manufacturer,\n        manufactureYear,\n        model,\n        price,\n        color,\n        plateNumber,\n        ownerId\n    } = req.body;\n\n    //check if owner exists\n    const owner = await Admin.findById(ownerId);\n    if (!owner) return res.status(400).send({\n        success: false,\n        message: \"Owner does not exist\"\n    });\n\n    const vehicle = new Vehicle({\n        chasisNumber,\n        manufacturer,\n        manufactureYear,\n        model,\n        price,\n        color,\n        plateNumber,\n        ownerId\n    });\n    try {\n        await vehicle.save();\n        return res.status(201).json({ success: true, data: vehicle });\n    } catch (error) {\n        return res.status(400).send({\n            success: false,\n            message: error.message\n        });\n    }\n\n}\n\nexport const getAllVehicles = async (req, res) => {\n    try {\n        const vehicles = await Vehicle.find();\n        return res.status(200).json({ success: true, data: vehicles });\n    } catch (error) {\n        return res.status(400).send({\n            success: false,\n            message: error.message\n        });\n    }\n}\n\n\nexport const getVehicleById = async (req, res) => {\n    const vehicle = await Vehicle.fin({ _id: req.params.id });\n    if (!vehicle) return res.status(404).json({ success: false, message: \"Vehicle does not exist\" });\n    return res.status(200).json({ success: true, data: vehicle });\n}\n\nexport const getVehiclesByOwnerId = async (req, res) => {\n    //find all vehicles by ownerId\n    const vehicles = await Vehicle.find({ ownerId: req.params.id });\n    if (!vehicles) return res.status(404).json({ success: false, message: \"Vehicles does not exist\" });\n    return res.status(200).json({ success: true, data: vehicles });\n}\n\nexport const updateVehicle = async (req, res) => {\n    const vehicle = await Vehicle.findOne({ _id: req.params.id });\n    if (!vehicle) return res.status(404).json({ success: false, message: \"Vehicle does not exist\" });\n\n    const updated = await Vehicle.findOneAndUpdate({ _id: req.params.id }, req.body, { new: true });\n    return res.status(200).json({ success: true, data: updated });\n}\n\nexport const deleteVehicle = async (req, res) => {\n    const vehicle = await Vehicle.findOne({ _id: req.params.id });\n    if (!vehicle) return res.status(404).json({ success: false, message: \"Vehicle does not exist\" });\n    await Vehicle.findOneAndDelete({ _id: req.params.id });\n    return res.status(200).json({ success: true, data: vehicle });\n}\n\n\nfunction validateVehicle(vh) {\n    const schema = Joi.object({\n        chasisNumber: Joi.string().min(4).max(30).required(),\n        manufacturer: Joi.string().min(4).max(30).required(),\n        manufactureYear: Joi.number().min(1900).max(2020).required(),\n        model: Joi.string().min(4).max(30).required(),\n        price: Joi.number().min(1).max(1000000000).required(),\n        color: Joi.string().min(4).max(30),\n        plateNumber: Joi.string().min(4).max(7).required(),\n        ownerId: Joi.string().min(4).max(30),\n    })\n\n    return schema.validate(vh);\n}"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEO,MAAMA,eAAe,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EAC/C,MAAM;IAAEC;EAAF,IAAYC,eAAe,CAACH,GAAG,CAACI,IAAL,CAAjC;EACA,IAAIF,KAAJ,EAAW,OAAOD,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;IACnCC,OAAO,EAAE,KAD0B;IAEnCC,OAAO,EAAEN,KAAK,CAACO,OAAN,CAAc,CAAd,EAAiBD;EAFS,CAArB,CAAP,CAFoC,CAO/C;;EAKA,MAAM;IACFE,YADE;IAEFC,YAFE;IAGFC,eAHE;IAIFC,KAJE;IAKFC,KALE;IAMFC,KANE;IAOFC,WAPE;IAQFC;EARE,IASFjB,GAAG,CAACI,IATR,CAZ+C,CAuB/C;;EACA,MAAMc,KAAK,GAAG,MAAMC,cAAA,CAAMC,QAAN,CAAeH,OAAf,CAApB;EACA,IAAI,CAACC,KAAL,EAAY,OAAOjB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;IACpCC,OAAO,EAAE,KAD2B;IAEpCC,OAAO,EAAE;EAF2B,CAArB,CAAP;EAKZ,MAAMa,OAAO,GAAG,IAAIC,gBAAJ,CAAY;IACxBZ,YADwB;IAExBC,YAFwB;IAGxBC,eAHwB;IAIxBC,KAJwB;IAKxBC,KALwB;IAMxBC,KANwB;IAOxBC,WAPwB;IAQxBC;EARwB,CAAZ,CAAhB;;EAUA,IAAI;IACA,MAAMI,OAAO,CAACE,IAAR,EAAN;IACA,OAAOtB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;MAAEjB,OAAO,EAAE,IAAX;MAAiBkB,IAAI,EAAEJ;IAAvB,CAArB,CAAP;EACH,CAHD,CAGE,OAAOnB,KAAP,EAAc;IACZ,OAAOD,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MACxBC,OAAO,EAAE,KADe;MAExBC,OAAO,EAAEN,KAAK,CAACM;IAFS,CAArB,CAAP;EAIH;AAEJ,CAlDM;;;;AAoDA,MAAMkB,cAAc,GAAG,OAAO1B,GAAP,EAAYC,GAAZ,KAAoB;EAC9C,IAAI;IACA,MAAM0B,QAAQ,GAAG,MAAML,gBAAA,CAAQM,IAAR,EAAvB;IACA,OAAO3B,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;MAAEjB,OAAO,EAAE,IAAX;MAAiBkB,IAAI,EAAEE;IAAvB,CAArB,CAAP;EACH,CAHD,CAGE,OAAOzB,KAAP,EAAc;IACZ,OAAOD,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MACxBC,OAAO,EAAE,KADe;MAExBC,OAAO,EAAEN,KAAK,CAACM;IAFS,CAArB,CAAP;EAIH;AACJ,CAVM;;;;AAaA,MAAMqB,cAAc,GAAG,OAAO7B,GAAP,EAAYC,GAAZ,KAAoB;EAC9C,MAAMoB,OAAO,GAAG,MAAMC,gBAAA,CAAQQ,GAAR,CAAY;IAAEC,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAZ,CAAtB;EACA,IAAI,CAACZ,OAAL,EAAc,OAAOpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EACd,OAAOP,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEJ;EAAvB,CAArB,CAAP;AACH,CAJM;;;;AAMA,MAAMa,oBAAoB,GAAG,OAAOlC,GAAP,EAAYC,GAAZ,KAAoB;EACpD;EACA,MAAM0B,QAAQ,GAAG,MAAML,gBAAA,CAAQM,IAAR,CAAa;IAAEX,OAAO,EAAEjB,GAAG,CAACgC,MAAJ,CAAWC;EAAtB,CAAb,CAAvB;EACA,IAAI,CAACN,QAAL,EAAe,OAAO1B,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EACf,OAAOP,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEE;EAAvB,CAArB,CAAP;AACH,CALM;;;;AAOA,MAAMQ,aAAa,GAAG,OAAOnC,GAAP,EAAYC,GAAZ,KAAoB;EAC7C,MAAMoB,OAAO,GAAG,MAAMC,gBAAA,CAAQc,OAAR,CAAgB;IAAEL,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAhB,CAAtB;EACA,IAAI,CAACZ,OAAL,EAAc,OAAOpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EAEd,MAAM6B,OAAO,GAAG,MAAMf,gBAAA,CAAQgB,gBAAR,CAAyB;IAAEP,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAzB,EAAiDjC,GAAG,CAACI,IAArD,EAA2D;IAAEmC,GAAG,EAAE;EAAP,CAA3D,CAAtB;EACA,OAAOtC,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEY;EAAvB,CAArB,CAAP;AACH,CANM;;;;AAQA,MAAMG,aAAa,GAAG,OAAOxC,GAAP,EAAYC,GAAZ,KAAoB;EAC7C,MAAMoB,OAAO,GAAG,MAAMC,gBAAA,CAAQc,OAAR,CAAgB;IAAEL,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAhB,CAAtB;EACA,IAAI,CAACZ,OAAL,EAAc,OAAOpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EACd,MAAMc,gBAAA,CAAQmB,gBAAR,CAAyB;IAAEV,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAzB,CAAN;EACA,OAAOhC,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEJ;EAAvB,CAArB,CAAP;AACH,CALM;;;;AAQP,SAASlB,eAAT,CAAyBuC,EAAzB,EAA6B;EACzB,MAAMC,MAAM,GAAGC,YAAA,CAAIC,MAAJ,CAAW;IACtBnC,YAAY,EAAEkC,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EADQ;IAEtBtC,YAAY,EAAEiC,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EAFQ;IAGtBrC,eAAe,EAAEgC,YAAA,CAAIM,MAAJ,GAAaH,GAAb,CAAiB,IAAjB,EAAuBC,GAAvB,CAA2B,IAA3B,EAAiCC,QAAjC,EAHK;IAItBpC,KAAK,EAAE+B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EAJe;IAKtBnC,KAAK,EAAE8B,YAAA,CAAIM,MAAJ,GAAaH,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,UAAxB,EAAoCC,QAApC,EALe;IAMtBlC,KAAK,EAAE6B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,CANe;IAOtBhC,WAAW,EAAE4B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,CAAxB,EAA2BC,QAA3B,EAPS;IAQtBhC,OAAO,EAAE2B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB;EARa,CAAX,CAAf;;EAWA,OAAOL,MAAM,CAACQ,QAAP,CAAgBT,EAAhB,CAAP;AACH"}},"mtime":1657104279373},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/models/vehicle.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema({\n  chasisNumber: {\n    type: String,\n    required: true,\n    unique: true,\n    maxLength: 20\n  },\n  manufacturer: {\n    type: String,\n    required: true,\n    maxLength: 60\n  },\n  manufactureYear: {\n    type: Number,\n    required: true,\n    maxLength: 4\n  },\n  model: {\n    type: String,\n    required: true,\n    maxLength: 60\n  },\n  price: {\n    type: Number,\n    required: true,\n    maxLength: 10\n  },\n  color: {\n    type: String,\n    default: \"white\",\n    maxLength: 60\n  },\n  plateNumber: {\n    type: String,\n    required: true,\n    unique: true,\n    maxLength: 8\n  },\n  ownerId: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"Owner\",\n    required: false\n  }\n}, {\n  timestamps: true\n});\n\n(0, _swaggiffy.registerSchema)('Vehicle', Schema, {\n  orm: 'mongoose'\n}); //create mongoose virtual ref for owner\n\nSchema.virtual(\"owner\", {\n  ref: \"Owner\",\n  localField: \"ownerId\",\n  foreignField: \"_id\",\n  justOne: true\n});\n\nconst Vehicle = _mongoose.default.model(\"Vehicle\", Schema);\n\nvar _default = Vehicle;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsImNoYXNpc051bWJlciIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsIm1heExlbmd0aCIsIm1hbnVmYWN0dXJlciIsIm1hbnVmYWN0dXJlWWVhciIsIk51bWJlciIsIm1vZGVsIiwicHJpY2UiLCJjb2xvciIsImRlZmF1bHQiLCJwbGF0ZU51bWJlciIsIm93bmVySWQiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidGltZXN0YW1wcyIsInJlZ2lzdGVyU2NoZW1hIiwib3JtIiwidmlydHVhbCIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJqdXN0T25lIiwiVmVoaWNsZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJ2ZWhpY2xlLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCB7IHJlZ2lzdGVyU2NoZW1hIH0gZnJvbSBcInN3YWdnaWZmeVwiO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWEoe1xuICAgIGNoYXNpc051bWJlcjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIG1heExlbmd0aDogMjAsXG4gICAgfSxcbiAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4TGVuZ3RoOiA2MCxcbiAgICB9LFxuICAgIG1hbnVmYWN0dXJlWWVhcjoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhMZW5ndGg6IDQsXG4gICAgfSxcbiAgICBtb2RlbDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhMZW5ndGg6IDYwLFxuICAgIH0sXG4gICAgcHJpY2U6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4TGVuZ3RoOiAxMCxcbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogXCJ3aGl0ZVwiLFxuICAgICAgICBtYXhMZW5ndGg6IDYwLFxuICAgIH0sXG4gICAgcGxhdGVOdW1iZXI6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBtYXhMZW5ndGg6IDgsXG4gICAgfSxcbiAgICBvd25lcklkOiB7XG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgcmVmOiBcIk93bmVyXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB9XG5cbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxucmVnaXN0ZXJTY2hlbWEoJ1ZlaGljbGUnLCBTY2hlbWEsIHsgb3JtOiAnbW9uZ29vc2UnIH0pO1xuLy9jcmVhdGUgbW9uZ29vc2UgdmlydHVhbCByZWYgZm9yIG93bmVyXG5TY2hlbWEudmlydHVhbChcIm93bmVyXCIsIHtcbiAgICByZWY6IFwiT3duZXJcIixcbiAgICBsb2NhbEZpZWxkOiBcIm93bmVySWRcIixcbiAgICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXG4gICAganVzdE9uZTogdHJ1ZVxufSk7XG5cbmNvbnN0IFZlaGljbGUgPSBtb25nb29zZS5tb2RlbChcIlZlaGljbGVcIiwgU2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IFZlaGljbGU7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQVQsQ0FBZ0I7RUFDM0JFLFlBQVksRUFBRTtJQUNWQyxJQUFJLEVBQUVDLE1BREk7SUFFVkMsUUFBUSxFQUFFLElBRkE7SUFHVkMsTUFBTSxFQUFFLElBSEU7SUFJVkMsU0FBUyxFQUFFO0VBSkQsQ0FEYTtFQU8zQkMsWUFBWSxFQUFFO0lBQ1ZMLElBQUksRUFBRUMsTUFESTtJQUVWQyxRQUFRLEVBQUUsSUFGQTtJQUdWRSxTQUFTLEVBQUU7RUFIRCxDQVBhO0VBWTNCRSxlQUFlLEVBQUU7SUFDYk4sSUFBSSxFQUFFTyxNQURPO0lBRWJMLFFBQVEsRUFBRSxJQUZHO0lBR2JFLFNBQVMsRUFBRTtFQUhFLENBWlU7RUFpQjNCSSxLQUFLLEVBQUU7SUFDSFIsSUFBSSxFQUFFQyxNQURIO0lBRUhDLFFBQVEsRUFBRSxJQUZQO0lBR0hFLFNBQVMsRUFBRTtFQUhSLENBakJvQjtFQXNCM0JLLEtBQUssRUFBRTtJQUNIVCxJQUFJLEVBQUVPLE1BREg7SUFFSEwsUUFBUSxFQUFFLElBRlA7SUFHSEUsU0FBUyxFQUFFO0VBSFIsQ0F0Qm9CO0VBMkIzQk0sS0FBSyxFQUFFO0lBQ0hWLElBQUksRUFBRUMsTUFESDtJQUVIVSxPQUFPLEVBQUUsT0FGTjtJQUdIUCxTQUFTLEVBQUU7RUFIUixDQTNCb0I7RUFnQzNCUSxXQUFXLEVBQUU7SUFDVFosSUFBSSxFQUFFQyxNQURHO0lBRVRDLFFBQVEsRUFBRSxJQUZEO0lBR1RDLE1BQU0sRUFBRSxJQUhDO0lBSVRDLFNBQVMsRUFBRTtFQUpGLENBaENjO0VBc0MzQlMsT0FBTyxFQUFFO0lBQ0xiLElBQUksRUFBRUYsaUJBQUEsQ0FBU0QsTUFBVCxDQUFnQmlCLEtBQWhCLENBQXNCQyxRQUR2QjtJQUVMQyxHQUFHLEVBQUUsT0FGQTtJQUdMZCxRQUFRLEVBQUU7RUFITDtBQXRDa0IsQ0FBaEIsRUE0Q1o7RUFDQ2UsVUFBVSxFQUFFO0FBRGIsQ0E1Q1ksQ0FBZjs7QUFnREEsSUFBQUMseUJBQUEsRUFBZSxTQUFmLEVBQTBCckIsTUFBMUIsRUFBa0M7RUFBRXNCLEdBQUcsRUFBRTtBQUFQLENBQWxDLEUsQ0FDQTs7QUFDQXRCLE1BQU0sQ0FBQ3VCLE9BQVAsQ0FBZSxPQUFmLEVBQXdCO0VBQ3BCSixHQUFHLEVBQUUsT0FEZTtFQUVwQkssVUFBVSxFQUFFLFNBRlE7RUFHcEJDLFlBQVksRUFBRSxLQUhNO0VBSXBCQyxPQUFPLEVBQUU7QUFKVyxDQUF4Qjs7QUFPQSxNQUFNQyxPQUFPLEdBQUcxQixpQkFBQSxDQUFTVSxLQUFULENBQWUsU0FBZixFQUEwQlgsTUFBMUIsQ0FBaEI7O2VBQ2UyQixPIn0=","map":{"version":3,"names":["Schema","mongoose","chasisNumber","type","String","required","unique","maxLength","manufacturer","manufactureYear","Number","model","price","color","default","plateNumber","ownerId","Types","ObjectId","ref","timestamps","registerSchema","orm","virtual","localField","foreignField","justOne","Vehicle"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/models/","sources":["vehicle.model.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { registerSchema } from \"swaggiffy\";\n\nconst Schema = mongoose.Schema({\n    chasisNumber: {\n        type: String,\n        required: true,\n        unique: true,\n        maxLength: 20,\n    },\n    manufacturer: {\n        type: String,\n        required: true,\n        maxLength: 60,\n    },\n    manufactureYear: {\n        type: Number,\n        required: true,\n        maxLength: 4,\n    },\n    model: {\n        type: String,\n        required: true,\n        maxLength: 60,\n    },\n    price: {\n        type: Number,\n        required: true,\n        maxLength: 10,\n    },\n    color: {\n        type: String,\n        default: \"white\",\n        maxLength: 60,\n    },\n    plateNumber: {\n        type: String,\n        required: true,\n        unique: true,\n        maxLength: 8,\n    },\n    ownerId: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Owner\",\n        required: false,\n    }\n\n}, {\n    timestamps: true\n});\n\nregisterSchema('Vehicle', Schema, { orm: 'mongoose' });\n//create mongoose virtual ref for owner\nSchema.virtual(\"owner\", {\n    ref: \"Owner\",\n    localField: \"ownerId\",\n    foreignField: \"_id\",\n    justOne: true\n});\n\nconst Vehicle = mongoose.model(\"Vehicle\", Schema);\nexport default Vehicle;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAT,CAAgB;EAC3BE,YAAY,EAAE;IACVC,IAAI,EAAEC,MADI;IAEVC,QAAQ,EAAE,IAFA;IAGVC,MAAM,EAAE,IAHE;IAIVC,SAAS,EAAE;EAJD,CADa;EAO3BC,YAAY,EAAE;IACVL,IAAI,EAAEC,MADI;IAEVC,QAAQ,EAAE,IAFA;IAGVE,SAAS,EAAE;EAHD,CAPa;EAY3BE,eAAe,EAAE;IACbN,IAAI,EAAEO,MADO;IAEbL,QAAQ,EAAE,IAFG;IAGbE,SAAS,EAAE;EAHE,CAZU;EAiB3BI,KAAK,EAAE;IACHR,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHE,SAAS,EAAE;EAHR,CAjBoB;EAsB3BK,KAAK,EAAE;IACHT,IAAI,EAAEO,MADH;IAEHL,QAAQ,EAAE,IAFP;IAGHE,SAAS,EAAE;EAHR,CAtBoB;EA2B3BM,KAAK,EAAE;IACHV,IAAI,EAAEC,MADH;IAEHU,OAAO,EAAE,OAFN;IAGHP,SAAS,EAAE;EAHR,CA3BoB;EAgC3BQ,WAAW,EAAE;IACTZ,IAAI,EAAEC,MADG;IAETC,QAAQ,EAAE,IAFD;IAGTC,MAAM,EAAE,IAHC;IAITC,SAAS,EAAE;EAJF,CAhCc;EAsC3BS,OAAO,EAAE;IACLb,IAAI,EAAEF,iBAAA,CAASD,MAAT,CAAgBiB,KAAhB,CAAsBC,QADvB;IAELC,GAAG,EAAE,OAFA;IAGLd,QAAQ,EAAE;EAHL;AAtCkB,CAAhB,EA4CZ;EACCe,UAAU,EAAE;AADb,CA5CY,CAAf;;AAgDA,IAAAC,yBAAA,EAAe,SAAf,EAA0BrB,MAA1B,EAAkC;EAAEsB,GAAG,EAAE;AAAP,CAAlC,E,CACA;;AACAtB,MAAM,CAACuB,OAAP,CAAe,OAAf,EAAwB;EACpBJ,GAAG,EAAE,OADe;EAEpBK,UAAU,EAAE,SAFQ;EAGpBC,YAAY,EAAE,KAHM;EAIpBC,OAAO,EAAE;AAJW,CAAxB;;AAOA,MAAMC,OAAO,GAAG1B,iBAAA,CAASU,KAAT,CAAe,SAAf,EAA0BX,MAA1B,CAAhB;;eACe2B,O"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst env = process.env.NODE_ENV || \"development\";\nconst DB_URL = env === \"container\" ? process.env.DB_URL_TEST : env === \"production\" ? process.env.DB_URL_PROD : env === \"development\" ? process.env.DB_URL_DEV : process.env.DB_URL_DEV;\n\nconst db = _mongoose.default.connect(\"mongodb+srv://sandberg-g:jLx6i4RujUt84k4@cluster0.mjmat.mongodb.net/vhmis?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}).then(connection => {\n  console.log(\"Connected to MongoDB Successful\");\n}).catch(err => {\n  console.log(\"Database url: \" + DB_URL);\n  console.log(err);\n});\n\nvar _default = db;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJEQl9VUkwiLCJEQl9VUkxfVEVTVCIsIkRCX1VSTF9QUk9EIiwiREJfVVJMX0RFViIsImRiIiwibW9uZ29vc2UiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidGhlbiIsImNvbm5lY3Rpb24iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiXSwic291cmNlUm9vdCI6Ii9ob21lL3JjYS9EZXNrdG9wL3Jlc3RmdWwtcHJhY3RpY2FsL3NlcnZlci9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2RvdGVudi9jb25maWcnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcImRldmVsb3BtZW50XCI7XG5jb25zdCBEQl9VUkwgPVxuICAgIGVudiA9PT0gXCJjb250YWluZXJcIiA/IHByb2Nlc3MuZW52LkRCX1VSTF9URVNUIDpcbiAgICAgICAgZW52ID09PSBcInByb2R1Y3Rpb25cIiA/IHByb2Nlc3MuZW52LkRCX1VSTF9QUk9EIDpcbiAgICAgICAgICAgIGVudiA9PT0gXCJkZXZlbG9wbWVudFwiID8gcHJvY2Vzcy5lbnYuREJfVVJMX0RFViA6XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuREJfVVJMX0RFVjtcblxuY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0KFwibW9uZ29kYitzcnY6Ly9zYW5kYmVyZy1nOmpMeDZpNFJ1alV0ODRrNEBjbHVzdGVyMC5tam1hdC5tb25nb2RiLm5ldC92aG1pcz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIiwge1xuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG59KVxuLnRoZW4oKGNvbm5lY3Rpb24pID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RlZCB0byBNb25nb0RCIFN1Y2Nlc3NmdWxcIik7XG59KVxuLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSB1cmw6IFwiK0RCX1VSTCk7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGRiOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUNELEdBQVIsQ0FBWUUsUUFBWixJQUF3QixhQUFwQztBQUNBLE1BQU1DLE1BQU0sR0FDUkgsR0FBRyxLQUFLLFdBQVIsR0FBc0JDLE9BQU8sQ0FBQ0QsR0FBUixDQUFZSSxXQUFsQyxHQUNJSixHQUFHLEtBQUssWUFBUixHQUF1QkMsT0FBTyxDQUFDRCxHQUFSLENBQVlLLFdBQW5DLEdBQ0lMLEdBQUcsS0FBSyxhQUFSLEdBQXdCQyxPQUFPLENBQUNELEdBQVIsQ0FBWU0sVUFBcEMsR0FDSUwsT0FBTyxDQUFDRCxHQUFSLENBQVlNLFVBSjVCOztBQU1BLE1BQU1DLEVBQUUsR0FBR0MsaUJBQUEsQ0FBU0MsT0FBVCxDQUFpQix1R0FBakIsRUFBMEg7RUFDaklDLGVBQWUsRUFBRSxJQURnSDtFQUVqSUMsa0JBQWtCLEVBQUU7QUFGNkcsQ0FBMUgsRUFJVkMsSUFKVSxDQUlKQyxVQUFELElBQWdCO0VBQ2xCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQ0FBWjtBQUNILENBTlUsRUFPVkMsS0FQVSxDQU9KQyxHQUFHLElBQUk7RUFDVkgsT0FBTyxDQUFDQyxHQUFSLENBQVksbUJBQWlCWixNQUE3QjtFQUNBVyxPQUFPLENBQUNDLEdBQVIsQ0FBWUUsR0FBWjtBQUNILENBVlUsQ0FBWDs7ZUFZZVYsRSJ9","map":{"version":3,"names":["env","process","NODE_ENV","DB_URL","DB_URL_TEST","DB_URL_PROD","DB_URL_DEV","db","mongoose","connect","useNewUrlParser","useUnifiedTopology","then","connection","console","log","catch","err"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/","sources":["index.js"],"sourcesContent":["import 'dotenv/config';\nimport mongoose from \"mongoose\";\n\nconst env = process.env.NODE_ENV || \"development\";\nconst DB_URL =\n    env === \"container\" ? process.env.DB_URL_TEST :\n        env === \"production\" ? process.env.DB_URL_PROD :\n            env === \"development\" ? process.env.DB_URL_DEV :\n                process.env.DB_URL_DEV;\n\nconst db = mongoose.connect(\"mongodb+srv://sandberg-g:jLx6i4RujUt84k4@cluster0.mjmat.mongodb.net/vhmis?retryWrites=true&w=majority\", {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n})\n.then((connection) => {\n    console.log(\"Connected to MongoDB Successful\");\n})\n.catch(err => {\n    console.log(\"Database url: \"+DB_URL);\n    console.log(err);\n})\n\nexport default db;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;AACA,MAAMC,MAAM,GACRH,GAAG,KAAK,WAAR,GAAsBC,OAAO,CAACD,GAAR,CAAYI,WAAlC,GACIJ,GAAG,KAAK,YAAR,GAAuBC,OAAO,CAACD,GAAR,CAAYK,WAAnC,GACIL,GAAG,KAAK,aAAR,GAAwBC,OAAO,CAACD,GAAR,CAAYM,UAApC,GACIL,OAAO,CAACD,GAAR,CAAYM,UAJ5B;;AAMA,MAAMC,EAAE,GAAGC,iBAAA,CAASC,OAAT,CAAiB,uGAAjB,EAA0H;EACjIC,eAAe,EAAE,IADgH;EAEjIC,kBAAkB,EAAE;AAF6G,CAA1H,EAIVC,IAJU,CAIJC,UAAD,IAAgB;EAClBC,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACH,CANU,EAOVC,KAPU,CAOJC,GAAG,IAAI;EACVH,OAAO,CAACC,GAAR,CAAY,mBAAiBZ,MAA7B;EACAW,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH,CAVU,CAAX;;eAYeV,E"}},"mtime":1657104354109},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/routes/auth.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _admin = require(\"../controllers/admin.controller\");\n\nvar _auth = _interopRequireDefault(require(\"../middlewares/auth.middleware\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.post('/register', _admin.signup);\nrouter.post('/signin', _admin.signin);\nrouter.get('/profile', _auth.default, _admin.getProfile);\nconst authDto = {\n  names: '',\n  email: '',\n  phone: '',\n  nationalId: '',\n  password: ''\n};\n(0, _swaggiffy.registerSchema)('AuthDto', authDto);\n(0, _swaggiffy.registerDefinition)(router, {\n  tags: \"Auth\",\n  mappedSchema: \"AuthDto\",\n  basePath: \"/api/v1/auth\"\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0Iiwic2lnbnVwIiwic2lnbmluIiwiZ2V0IiwiQXV0aE1pZGRsZXdhcmUiLCJnZXRQcm9maWxlIiwiYXV0aER0byIsIm5hbWVzIiwiZW1haWwiLCJwaG9uZSIsIm5hdGlvbmFsSWQiLCJwYXNzd29yZCIsInJlZ2lzdGVyU2NoZW1hIiwicmVnaXN0ZXJEZWZpbml0aW9uIiwidGFncyIsIm1hcHBlZFNjaGVtYSIsImJhc2VQYXRoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yY2EvRGVza3RvcC9yZXN0ZnVsLXByYWN0aWNhbC9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGgucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZpbml0aW9uLCByZWdpc3RlclNjaGVtYSB9IGZyb20gJ3N3YWdnaWZmeSc7XG5pbXBvcnQgeyBzaWdudXAsIHNpZ25pbiwgZ2V0UHJvZmlsZSB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2FkbWluLmNvbnRyb2xsZXInO1xuaW1wb3J0IEF1dGhNaWRkbGV3YXJlIGZyb20gJy4uL21pZGRsZXdhcmVzL2F1dGgubWlkZGxld2FyZSc7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgc2lnbnVwKTtcbnJvdXRlci5wb3N0KCcvc2lnbmluJywgc2lnbmluKTtcbnJvdXRlci5nZXQoJy9wcm9maWxlJywgQXV0aE1pZGRsZXdhcmUsIGdldFByb2ZpbGUpO1xuXG5jb25zdCBhdXRoRHRvID0ge1xuICAgIG5hbWVzOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgcGhvbmU6ICcnLFxuICAgIG5hdGlvbmFsSWQ6ICcnLFxuICAgIHBhc3N3b3JkOiAnJ1xufVxucmVnaXN0ZXJTY2hlbWEoJ0F1dGhEdG8nLCBhdXRoRHRvKTtcbnJlZ2lzdGVyRGVmaW5pdGlvbihyb3V0ZXIsIHsgdGFnczogXCJBdXRoXCIsIG1hcHBlZFNjaGVtYTogXCJBdXRoRHRvXCIsIGJhc2VQYXRoOiBcIi9hcGkvdjEvYXV0aFwiIH0pO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBQSxHQUFmO0FBRUFELE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFdBQVosRUFBeUJDLGFBQXpCO0FBQ0FILE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFNBQVosRUFBdUJFLGFBQXZCO0FBQ0FKLE1BQU0sQ0FBQ0ssR0FBUCxDQUFXLFVBQVgsRUFBdUJDLGFBQXZCLEVBQXVDQyxpQkFBdkM7QUFFQSxNQUFNQyxPQUFPLEdBQUc7RUFDWkMsS0FBSyxFQUFFLEVBREs7RUFFWkMsS0FBSyxFQUFFLEVBRks7RUFHWkMsS0FBSyxFQUFFLEVBSEs7RUFJWkMsVUFBVSxFQUFFLEVBSkE7RUFLWkMsUUFBUSxFQUFFO0FBTEUsQ0FBaEI7QUFPQSxJQUFBQyx5QkFBQSxFQUFlLFNBQWYsRUFBMEJOLE9BQTFCO0FBQ0EsSUFBQU8sNkJBQUEsRUFBbUJmLE1BQW5CLEVBQTJCO0VBQUVnQixJQUFJLEVBQUUsTUFBUjtFQUFnQkMsWUFBWSxFQUFFLFNBQTlCO0VBQXlDQyxRQUFRLEVBQUU7QUFBbkQsQ0FBM0I7ZUFDZWxCLE0ifQ==","map":{"version":3,"names":["router","Router","post","signup","signin","get","AuthMiddleware","getProfile","authDto","names","email","phone","nationalId","password","registerSchema","registerDefinition","tags","mappedSchema","basePath"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/routes/","sources":["auth.routes.js"],"sourcesContent":["import { Router } from 'express';\nimport { registerDefinition, registerSchema } from 'swaggiffy';\nimport { signup, signin, getProfile } from '../controllers/admin.controller';\nimport AuthMiddleware from '../middlewares/auth.middleware';\n\nconst router = Router();\n\nrouter.post('/register', signup);\nrouter.post('/signin', signin);\nrouter.get('/profile', AuthMiddleware, getProfile);\n\nconst authDto = {\n    names: '',\n    email: '',\n    phone: '',\n    nationalId: '',\n    password: ''\n}\nregisterSchema('AuthDto', authDto);\nregisterDefinition(router, { tags: \"Auth\", mappedSchema: \"AuthDto\", basePath: \"/api/v1/auth\" });\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,WAAZ,EAAyBC,aAAzB;AACAH,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuBE,aAAvB;AACAJ,MAAM,CAACK,GAAP,CAAW,UAAX,EAAuBC,aAAvB,EAAuCC,iBAAvC;AAEA,MAAMC,OAAO,GAAG;EACZC,KAAK,EAAE,EADK;EAEZC,KAAK,EAAE,EAFK;EAGZC,KAAK,EAAE,EAHK;EAIZC,UAAU,EAAE,EAJA;EAKZC,QAAQ,EAAE;AALE,CAAhB;AAOA,IAAAC,yBAAA,EAAe,SAAf,EAA0BN,OAA1B;AACA,IAAAO,6BAAA,EAAmBf,MAAnB,EAA2B;EAAEgB,IAAI,EAAE,MAAR;EAAgBC,YAAY,EAAE,SAA9B;EAAyCC,QAAQ,EAAE;AAAnD,CAA3B;eACelB,M"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/controllers/admin.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.signin = exports.getProfile = void 0;\n\nvar _admin = _interopRequireDefault(require(\"../database/models/admin.model\"));\n\nvar _hashPassword = require(\"../utils/hash-password\");\n\nvar _jsonwebtoken = require(\"jsonwebtoken\");\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst signup = async (req, res) => {\n  const {\n    error\n  } = validateUser(req.body);\n\n  if (error) {\n    return res.status(400).send(error.details[0].message);\n  }\n\n  const {\n    names,\n    email,\n    phone,\n    nationalId,\n    password\n  } = req.body;\n  const userExist = await _admin.default.findOne({\n    email\n  });\n  if (userExist) return res.status(400).json({\n    success: false,\n    message: \"Email and NID must be unique\"\n  });\n  const hashedPassword = await (0, _hashPassword.hashPassword)(password);\n\n  try {\n    const user = new _admin.default({\n      names,\n      email,\n      password: hashedPassword,\n      phone,\n      nationalId\n    });\n    await user.save();\n    return res.status(201).json({\n      success: true,\n      message: \"User created successfully\",\n      data: user\n    });\n  } catch (error) {\n    return res.status(400).json({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.signup = signup;\n\nconst signin = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n\n  try {\n    const user = await _admin.default.findOne({\n      email\n    });\n    if (!user) return res.status(400).json({\n      success: false,\n      message: \"Invalid Credentials\"\n    });\n    const isMatch = await (0, _hashPassword.comparePassword)(password, user.password);\n    if (!isMatch) return res.status(400).json({\n      success: false,\n      message: \"Invalid Credentials\"\n    });\n    const token = (0, _jsonwebtoken.sign)({\n      _id: user._id,\n      email,\n      name: user.name\n    }, process.env.JWT_KEY, {\n      expiresIn: '1d'\n    });\n    return res.status(200).json({\n      success: true,\n      message: \"User logged in successfully\",\n      data: {\n        token,\n        user\n      }\n    });\n  } catch (error) {\n    return res.status(400).json({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.signin = signin;\n\nconst getProfile = async (req, res) => {\n  return res.status(200).json({\n    success: true,\n    data: req.user\n  });\n};\n\nexports.getProfile = getProfile;\n\nfunction validateUser(user) {\n  const schema = _joi.default.object({\n    names: _joi.default.string().max(255).min(3).required(),\n    phone: _joi.default.string().max(12).min(10).required(),\n    email: _joi.default.string().max(255).min(3).required().email(),\n    password: _joi.default.string().max(255).min(6).required(),\n    nationalId: _joi.default.string().max(16).min(16).required()\n  });\n\n  return schema.validate(user);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzaWdudXAiLCJyZXEiLCJyZXMiLCJlcnJvciIsInZhbGlkYXRlVXNlciIsImJvZHkiLCJzdGF0dXMiLCJzZW5kIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJuYW1lcyIsImVtYWlsIiwicGhvbmUiLCJuYXRpb25hbElkIiwicGFzc3dvcmQiLCJ1c2VyRXhpc3QiLCJBZG1pbiIsImZpbmRPbmUiLCJqc29uIiwic3VjY2VzcyIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaFBhc3N3b3JkIiwidXNlciIsInNhdmUiLCJkYXRhIiwic2lnbmluIiwiaXNNYXRjaCIsImNvbXBhcmVQYXNzd29yZCIsInRva2VuIiwic2lnbiIsIl9pZCIsIm5hbWUiLCJwcm9jZXNzIiwiZW52IiwiSldUX0tFWSIsImV4cGlyZXNJbiIsImdldFByb2ZpbGUiLCJzY2hlbWEiLCJKb2kiLCJvYmplY3QiLCJzdHJpbmciLCJtYXgiLCJtaW4iLCJyZXF1aXJlZCIsInZhbGlkYXRlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yY2EvRGVza3RvcC9yZXN0ZnVsLXByYWN0aWNhbC9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYWRtaW4uY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWRtaW4gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzL2FkbWluLm1vZGVsJztcbmltcG9ydCB7IGhhc2hQYXNzd29yZCwgY29tcGFyZVBhc3N3b3JkIH0gZnJvbSAnLi4vdXRpbHMvaGFzaC1wYXNzd29yZCc7XG5pbXBvcnQgeyBzaWduIH0gZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuZXhwb3J0IGNvbnN0IHNpZ251cCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IHZhbGlkYXRlVXNlcihyZXEuYm9keSk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnJvci5kZXRhaWxzWzBdLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmFtZXMsIGVtYWlsLCBwaG9uZSwgbmF0aW9uYWxJZCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgdXNlckV4aXN0ID0gYXdhaXQgQWRtaW4uZmluZE9uZSh7IGVtYWlsIH0pO1xuICAgIGlmICh1c2VyRXhpc3QpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkVtYWlsIGFuZCBOSUQgbXVzdCBiZSB1bmlxdWVcIiB9KTtcblxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgQWRtaW4oeyBuYW1lcywgZW1haWwsIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCwgcGhvbmUsIG5hdGlvbmFsSWQgfSk7XG4gICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiVXNlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLCBkYXRhOiB1c2VyIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBjb25zdCBzaWduaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcblxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgQWRtaW4uZmluZE9uZSh7IGVtYWlsIH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgQ3JlZGVudGlhbHNcIiB9KTtcblxuICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgaWYgKCFpc01hdGNoKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIENyZWRlbnRpYWxzXCIgfSk7XG5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBzaWduKHsgX2lkOiB1c2VyLl9pZCwgZW1haWwsIG5hbWU6IHVzZXIubmFtZSB9LCBwcm9jZXNzLmVudi5KV1RfS0VZLCB7IGV4cGlyZXNJbjogJzFkJyB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJVc2VyIGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlcIiwgZGF0YTogeyB0b2tlbiwgdXNlciB9IH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZ2V0UHJvZmlsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlcS51c2VyIH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVVzZXIodXNlcikge1xuICAgIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgICBuYW1lczogSm9pLnN0cmluZygpLm1heCgyNTUpLm1pbigzKS5yZXF1aXJlZCgpLFxuICAgICAgICBwaG9uZTogSm9pLnN0cmluZygpLm1heCgxMikubWluKDEwKS5yZXF1aXJlZCgpLFxuICAgICAgICBlbWFpbDogSm9pLnN0cmluZygpLm1heCgyNTUpLm1pbigzKS5yZXF1aXJlZCgpLmVtYWlsKCksXG4gICAgICAgIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCkubWF4KDI1NSkubWluKDYpLnJlcXVpcmVkKCksXG4gICAgICAgIG5hdGlvbmFsSWQ6IEpvaS5zdHJpbmcoKS5tYXgoMTYpLm1pbigxNikucmVxdWlyZWQoKSxcbiAgICB9KTtcblxuICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUodXNlcik7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFTyxNQUFNQSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0VBQ3RDLE1BQU07SUFBRUM7RUFBRixJQUFZQyxZQUFZLENBQUNILEdBQUcsQ0FBQ0ksSUFBTCxDQUE5Qjs7RUFDQSxJQUFJRixLQUFKLEVBQVc7SUFDUCxPQUFPRCxHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQkosS0FBSyxDQUFDSyxPQUFOLENBQWMsQ0FBZCxFQUFpQkMsT0FBdEMsQ0FBUDtFQUNIOztFQUVELE1BQU07SUFBRUMsS0FBRjtJQUFTQyxLQUFUO0lBQWdCQyxLQUFoQjtJQUF1QkMsVUFBdkI7SUFBbUNDO0VBQW5DLElBQWdEYixHQUFHLENBQUNJLElBQTFEO0VBRUEsTUFBTVUsU0FBUyxHQUFHLE1BQU1DLGNBQUEsQ0FBTUMsT0FBTixDQUFjO0lBQUVOO0VBQUYsQ0FBZCxDQUF4QjtFQUNBLElBQUlJLFNBQUosRUFBZSxPQUFPYixHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCWSxJQUFoQixDQUFxQjtJQUFFQyxPQUFPLEVBQUUsS0FBWDtJQUFrQlYsT0FBTyxFQUFFO0VBQTNCLENBQXJCLENBQVA7RUFFZixNQUFNVyxjQUFjLEdBQUcsTUFBTSxJQUFBQywwQkFBQSxFQUFhUCxRQUFiLENBQTdCOztFQUVBLElBQUk7SUFDQSxNQUFNUSxJQUFJLEdB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","map":{"version":3,"names":["signup","req","res","error","validateUser","body","status","send","details","message","names","email","phone","nationalId","password","userExist","Admin","findOne","json","success","hashedPassword","hashPassword","user","save","data","signin","isMatch","comparePassword","token","sign","_id","name","process","env","JWT_KEY","expiresIn","getProfile","schema","Joi","object","string","max","min","required","validate"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/controllers/","sources":["admin.controller.js"],"sourcesContent":["import Admin from '../database/models/admin.model';\nimport { hashPassword, comparePassword } from '../utils/hash-password';\nimport { sign } from 'jsonwebtoken';\nimport Joi from 'joi';\n\nexport const signup = async (req, res) => {\n    const { error } = validateUser(req.body);\n    if (error) {\n        return res.status(400).send(error.details[0].message);\n    }\n\n    const { names, email, phone, nationalId, password } = req.body;\n\n    const userExist = await Admin.findOne({ email });\n    if (userExist) return res.status(400).json({ success: false, message: \"Email and NID must be unique\" });\n\n    const hashedPassword = await hashPassword(password);\n\n    try {\n        const user = new Admin({ names, email, password: hashedPassword, phone, nationalId });\n        await user.save()\n        return res.status(201).json({ success: true, message: \"User created successfully\", data: user });\n\n    } catch (error) {\n        return res.status(400).json({ success: false, message: error.message });\n    }\n\n}\n\nexport const signin = async (req, res) => {\n\n    const { email, password } = req.body;\n    try {\n        const user = await Admin.findOne({ email });\n        if (!user) return res.status(400).json({ success: false, message: \"Invalid Credentials\" });\n\n        const isMatch = await comparePassword(password, user.password);\n        if (!isMatch) return res.status(400).json({ success: false, message: \"Invalid Credentials\" });\n\n        const token = sign({ _id: user._id, email, name: user.name }, process.env.JWT_KEY, { expiresIn: '1d' });\n        return res.status(200).json({ success: true, message: \"User logged in successfully\", data: { token, user } });\n\n    } catch (error) {\n        return res.status(400).json({ success: false, message: error.message });\n    }\n}\n\nexport const getProfile = async (req, res) => {\n    return res.status(200).json({ success: true, data: req.user });\n}\n\nfunction validateUser(user) {\n    const schema = Joi.object({\n        names: Joi.string().max(255).min(3).required(),\n        phone: Joi.string().max(12).min(10).required(),\n        email: Joi.string().max(255).min(3).required().email(),\n        password: Joi.string().max(255).min(6).required(),\n        nationalId: Joi.string().max(16).min(16).required(),\n    });\n\n    return schema.validate(user);\n}"],"mappings":"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"}},"mtime":1657104279373},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/models/admin.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema({\n  names: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  phone: {\n    type: String,\n    required: true\n  },\n  nationalId: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  profilePic: {\n    type: String,\n    default: \"https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?k=20&m=1223671392&s=612x612&w=0&h=lGpj2vWAI3WUT1JeJWm1PRoHT3V15_1pdcTn2szdwQ0=\"\n  },\n  isActive: {\n    type: Boolean,\n    default: true\n  }\n}, {\n  timestamps: true\n});\n\n(0, _swaggiffy.registerSchema)('Admin', Schema, {\n  orm: 'mongoose'\n});\n\nconst Admin = _mongoose.default.model(\"Admin\", Schema);\n\nvar _default = Admin;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIm5hbWVzIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ1bmlxdWUiLCJwaG9uZSIsIm5hdGlvbmFsSWQiLCJwYXNzd29yZCIsInByb2ZpbGVQaWMiLCJkZWZhdWx0IiwiaXNBY3RpdmUiLCJCb29sZWFuIiwidGltZXN0YW1wcyIsInJlZ2lzdGVyU2NoZW1hIiwib3JtIiwiQWRtaW4iLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJhZG1pbi5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgeyByZWdpc3RlclNjaGVtYSB9IGZyb20gXCJzd2FnZ2lmZnlcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBuYW1lczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgcGhvbmU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIG5hdGlvbmFsSWQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHByb2ZpbGVQaWM6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBcImh0dHBzOi8vbWVkaWEuaXN0b2NrcGhvdG8uY29tL3ZlY3RvcnMvZGVmYXVsdC1wcm9maWxlLXBpY3R1cmUtYXZhdGFyLXBob3RvLXBsYWNlaG9sZGVyLXZlY3Rvci1pbGx1c3RyYXRpb24tdmVjdG9yLWlkMTIyMzY3MTM5Mj9rPTIwJm09MTIyMzY3MTM5MiZzPTYxMng2MTImdz0wJmg9bEdwajJ2V0FJM1dVVDFKZUpXbTFQUm9IVDNWMTVfMXBkY1RuMnN6ZHdRMD1cIixcbiAgICB9LFxuICAgIGlzQWN0aXZlOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxucmVnaXN0ZXJTY2hlbWEoJ0FkbWluJywgU2NoZW1hLCB7IG9ybTogJ21vbmdvb3NlJyB9KTtcbmNvbnN0IEFkbWluID0gbW9uZ29vc2UubW9kZWwoXCJBZG1pblwiLCBTY2hlbWEpO1xuZXhwb3J0IGRlZmF1bHQgQWRtaW47Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQVQsQ0FBZ0I7RUFDM0JFLEtBQUssRUFBRTtJQUNIQyxJQUFJLEVBQUVDLE1BREg7SUFFSEMsUUFBUSxFQUFFO0VBRlAsQ0FEb0I7RUFLM0JDLEtBQUssRUFBRTtJQUNISCxJQUFJLEVBQUVDLE1BREg7SUFFSEMsUUFBUSxFQUFFLElBRlA7SUFHSEUsTUFBTSxFQUFFO0VBSEwsQ0FMb0I7RUFVM0JDLEtBQUssRUFBRTtJQUNITCxJQUFJLEVBQUVDLE1BREg7SUFFSEMsUUFBUSxFQUFFO0VBRlAsQ0FWb0I7RUFjM0JJLFVBQVUsRUFBRTtJQUNSTixJQUFJLEVBQUVDLE1BREU7SUFFUkMsUUFBUSxFQUFFLElBRkY7SUFHUkUsTUFBTSxFQUFFO0VBSEEsQ0FkZTtFQW1CM0JHLFFBQVEsRUFBRTtJQUNOUCxJQUFJLEVBQUVDLE1BREE7SUFFTkMsUUFBUSxFQUFFO0VBRkosQ0FuQmlCO0VBdUIzQk0sVUFBVSxFQUFFO0lBQ1JSLElBQUksRUFBRUMsTUFERTtJQUVSUSxPQUFPLEVBQUU7RUFGRCxDQXZCZTtFQTJCM0JDLFFBQVEsRUFBRTtJQUNOVixJQUFJLEVBQUVXLE9BREE7SUFFTkYsT0FBTyxFQUFFO0VBRkg7QUEzQmlCLENBQWhCLEVBK0JaO0VBQ0NHLFVBQVUsRUFBRTtBQURiLENBL0JZLENBQWY7O0FBbUNBLElBQUFDLHlCQUFBLEVBQWUsT0FBZixFQUF3QmhCLE1BQXhCLEVBQWdDO0VBQUVpQixHQUFHLEVBQUU7QUFBUCxDQUFoQzs7QUFDQSxNQUFNQyxLQUFLLEdBQUdqQixpQkFBQSxDQUFTa0IsS0FBVCxDQUFlLE9BQWYsRUFBd0JuQixNQUF4QixDQUFkOztlQUNla0IsSyJ9","map":{"version":3,"names":["Schema","mongoose","names","type","String","required","email","unique","phone","nationalId","password","profilePic","default","isActive","Boolean","timestamps","registerSchema","orm","Admin","model"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/models/","sources":["admin.model.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { registerSchema } from \"swaggiffy\";\n\nconst Schema = mongoose.Schema({\n    names: {\n        type: String,\n        required: true,\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n    },\n    phone: {\n        type: String,\n        required: true,\n    },\n    nationalId: {\n        type: String,\n        required: true,\n        unique: true,\n    },\n    password: {\n        type: String,\n        required: true,\n    },\n    profilePic: {\n        type: String,\n        default: \"https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?k=20&m=1223671392&s=612x612&w=0&h=lGpj2vWAI3WUT1JeJWm1PRoHT3V15_1pdcTn2szdwQ0=\",\n    },\n    isActive: {\n        type: Boolean,\n        default: true,\n    },\n}, {\n    timestamps: true\n});\n\nregisterSchema('Admin', Schema, { orm: 'mongoose' });\nconst Admin = mongoose.model(\"Admin\", Schema);\nexport default Admin;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAT,CAAgB;EAC3BE,KAAK,EAAE;IACHC,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CADoB;EAK3BC,KAAK,EAAE;IACHH,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHE,MAAM,EAAE;EAHL,CALoB;EAU3BC,KAAK,EAAE;IACHL,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CAVoB;EAc3BI,UAAU,EAAE;IACRN,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,IAFF;IAGRE,MAAM,EAAE;EAHA,CAde;EAmB3BG,QAAQ,EAAE;IACNP,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CAnBiB;EAuB3BM,UAAU,EAAE;IACRR,IAAI,EAAEC,MADE;IAERQ,OAAO,EAAE;EAFD,CAvBe;EA2B3BC,QAAQ,EAAE;IACNV,IAAI,EAAEW,OADA;IAENF,OAAO,EAAE;EAFH;AA3BiB,CAAhB,EA+BZ;EACCG,UAAU,EAAE;AADb,CA/BY,CAAf;;AAmCA,IAAAC,yBAAA,EAAe,OAAf,EAAwBhB,MAAxB,EAAgC;EAAEiB,GAAG,EAAE;AAAP,CAAhC;;AACA,MAAMC,KAAK,GAAGjB,iBAAA,CAASkB,KAAT,CAAe,OAAf,EAAwBnB,MAAxB,CAAd;;eACekB,K"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/utils/hash-password.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hashPassword = exports.comparePassword = void 0;\n\nvar _argon = require(\"argon2\");\n\nconst KEY = process.env.BCRYPT_KEY;\n\nconst hashPassword = password => {\n  return (0, _argon.hash)(password, 10, {\n    key: KEY\n  });\n};\n\nexports.hashPassword = hashPassword;\n\nconst comparePassword = (password, hash) => {\n  try {\n    return (0, _argon.verify)(hash, password, {\n      key: KEY\n    });\n  } catch (err) {\n    return false;\n  }\n};\n\nexports.comparePassword = comparePassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJLRVkiLCJwcm9jZXNzIiwiZW52IiwiQkNSWVBUX0tFWSIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsImtleSIsImNvbXBhcmVQYXNzd29yZCIsInZlcmlmeSIsImVyciJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbImhhc2gtcGFzc3dvcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGFzaCwgdmVyaWZ5IH0gZnJvbSAnYXJnb24yJztcblxuY29uc3QgS0VZID0gcHJvY2Vzcy5lbnYuQkNSWVBUX0tFWTtcblxuZXhwb3J0IGNvbnN0IGhhc2hQYXNzd29yZCA9ICAocGFzc3dvcmQpID0+IHtcbiAgICByZXR1cm4gaGFzaChwYXNzd29yZCwgMTAsIHsga2V5OiBLRVkgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb21wYXJlUGFzc3dvcmQgPSAgKHBhc3N3b3JkLCBoYXNoKSA9PiB7XG4gICAgdHJ5e1xuICAgICAgICByZXR1cm4gdmVyaWZ5KGhhc2gsIHBhc3N3b3JkLCB7IGtleTogS0VZIH0pO1xuICAgIH1cbiAgICBjYXRjaChlcnIpe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBeEI7O0FBRU8sTUFBTUMsWUFBWSxHQUFLQyxRQUFELElBQWM7RUFDdkMsT0FBTyxJQUFBQyxXQUFBLEVBQUtELFFBQUwsRUFBZSxFQUFmLEVBQW1CO0lBQUVFLEdBQUcsRUFBRVA7RUFBUCxDQUFuQixDQUFQO0FBQ0gsQ0FGTTs7OztBQUlBLE1BQU1RLGVBQWUsR0FBSSxDQUFDSCxRQUFELEVBQVdDLElBQVgsS0FBb0I7RUFDaEQsSUFBRztJQUNDLE9BQU8sSUFBQUcsYUFBQSxFQUFPSCxJQUFQLEVBQWFELFFBQWIsRUFBdUI7TUFBRUUsR0FBRyxFQUFFUDtJQUFQLENBQXZCLENBQVA7RUFDSCxDQUZELENBR0EsT0FBTVUsR0FBTixFQUFVO0lBQ04sT0FBTyxLQUFQO0VBQ0g7QUFDSixDQVBNIn0=","map":{"version":3,"names":["KEY","process","env","BCRYPT_KEY","hashPassword","password","hash","key","comparePassword","verify","err"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/utils/","sources":["hash-password.js"],"sourcesContent":["import { hash, verify } from 'argon2';\n\nconst KEY = process.env.BCRYPT_KEY;\n\nexport const hashPassword =  (password) => {\n    return hash(password, 10, { key: KEY });\n}\n\nexport const comparePassword =  (password, hash) => {\n    try{\n        return verify(hash, password, { key: KEY });\n    }\n    catch(err){\n        return false;\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,UAAxB;;AAEO,MAAMC,YAAY,GAAKC,QAAD,IAAc;EACvC,OAAO,IAAAC,WAAA,EAAKD,QAAL,EAAe,EAAf,EAAmB;IAAEE,GAAG,EAAEP;EAAP,CAAnB,CAAP;AACH,CAFM;;;;AAIA,MAAMQ,eAAe,GAAI,CAACH,QAAD,EAAWC,IAAX,KAAoB;EAChD,IAAG;IACC,OAAO,IAAAG,aAAA,EAAOH,IAAP,EAAaD,QAAb,EAAuB;MAAEE,GAAG,EAAEP;IAAP,CAAvB,CAAP;EACH,CAFD,CAGA,OAAMU,GAAN,EAAU;IACN,OAAO,KAAP;EACH;AACJ,CAPM"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/middlewares/auth.middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsonwebtoken = require(\"jsonwebtoken\");\n\nconst AuthMiddleware = async (req, res, next) => {\n  try {\n    const bearerToken = req.headers.authorization;\n    const token = bearerToken.split(' ')[1];\n    if (!token) return res.status(401).json({\n      success: false,\n      message: 'Unauthorized'\n    });\n    const decoded = (0, _jsonwebtoken.decode)(token, {\n      key: process.env.JWT_KEY\n    });\n    if (!decoded) return res.status(401).json({\n      success: false,\n      message: 'Unauthorized'\n    });\n    req.user = decoded;\n  } catch (e) {\n    return res.status(401).json({\n      success: false,\n      message: \"Unauthorized\"\n    });\n  }\n\n  next();\n};\n\nvar _default = AuthMiddleware;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdXRoTWlkZGxld2FyZSIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidG9rZW4iLCJzcGxpdCIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImRlY29kZWQiLCJkZWNvZGUiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiSldUX0tFWSIsInVzZXIiLCJlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9yY2EvRGVza3RvcC9yZXN0ZnVsLXByYWN0aWNhbC9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiYXV0aC5taWRkbGV3YXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlY29kZSB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cbmNvbnN0IEF1dGhNaWRkbGV3YXJlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeXtcbiAgICBjb25zdCBiZWFyZXJUb2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgY29uc3QgdG9rZW4gPSBiZWFyZXJUb2tlbi5zcGxpdCgnICcpWzFdO1xuICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiwge2tleTogcHJvY2Vzcy5lbnYuSldUX0tFWX0pO1xuICAgICAgaWYoIWRlY29kZWQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgIHJlcS51c2VyID0gZGVjb2RlZDtcbiAgfVxuICBjYXRjaChlKXtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe3N1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZFwifSk7XG4gIH1cbiBcblxuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhNaWRkbGV3YXJlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsY0FBYyxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDL0MsSUFBRztJQUNELE1BQU1DLFdBQVcsR0FBR0gsR0FBRyxDQUFDSSxPQUFKLENBQVlDLGFBQWhDO0lBQ0EsTUFBTUMsS0FBSyxHQUFHSCxXQUFXLENBQUNJLEtBQVosQ0FBa0IsR0FBbEIsRUFBdUIsQ0FBdkIsQ0FBZDtJQUNFLElBQUksQ0FBQ0QsS0FBTCxFQUFZLE9BQU9MLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO01BQUVDLE9BQU8sRUFBRSxLQUFYO01BQWtCQyxPQUFPLEVBQUU7SUFBM0IsQ0FBckIsQ0FBUDtJQUNaLE1BQU1DLE9BQU8sR0FBRyxJQUFBQyxvQkFBQSxFQUFPUCxLQUFQLEVBQWM7TUFBQ1EsR0FBRyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7SUFBbEIsQ0FBZCxDQUFoQjtJQUNBLElBQUcsQ0FBQ0wsT0FBSixFQUFhLE9BQU9YLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO01BQUVDLE9BQU8sRUFBRSxLQUFYO01BQWtCQyxPQUFPLEVBQUU7SUFBM0IsQ0FBckIsQ0FBUDtJQUNiWCxHQUFHLENBQUNrQixJQUFKLEdBQVdOLE9BQVg7RUFDSCxDQVBELENBUUEsT0FBTU8sQ0FBTixFQUFRO0lBQ04sT0FBT2xCLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO01BQUNDLE9BQU8sRUFBRSxLQUFWO01BQWlCQyxPQUFPLEVBQUU7SUFBMUIsQ0FBckIsQ0FBUDtFQUNEOztFQUdEVCxJQUFJO0FBQ0wsQ0FmRDs7ZUFpQmVILGMifQ==","map":{"version":3,"names":["AuthMiddleware","req","res","next","bearerToken","headers","authorization","token","split","status","json","success","message","decoded","decode","key","process","env","JWT_KEY","user","e"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/middlewares/","sources":["auth.middleware.js"],"sourcesContent":["import { decode } from 'jsonwebtoken';\n\nconst AuthMiddleware = async (req, res, next) => {\n  try{\n    const bearerToken = req.headers.authorization;\n    const token = bearerToken.split(' ')[1];\n      if (!token) return res.status(401).json({ success: false, message: 'Unauthorized' });\n      const decoded = decode(token, {key: process.env.JWT_KEY});\n      if(!decoded) return res.status(401).json({ success: false, message: 'Unauthorized' });\n      req.user = decoded;\n  }\n  catch(e){\n    return res.status(401).json({success: false, message: \"Unauthorized\"});\n  }\n \n\n  next();\n}\n\nexport default AuthMiddleware;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,cAAc,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC/C,IAAG;IACD,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAhC;IACA,MAAMC,KAAK,GAAGH,WAAW,CAACI,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAd;IACE,IAAI,CAACD,KAAL,EAAY,OAAOL,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEC,OAAO,EAAE,KAAX;MAAkBC,OAAO,EAAE;IAA3B,CAArB,CAAP;IACZ,MAAMC,OAAO,GAAG,IAAAC,oBAAA,EAAOP,KAAP,EAAc;MAACQ,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC;IAAlB,CAAd,CAAhB;IACA,IAAG,CAACL,OAAJ,EAAa,OAAOX,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEC,OAAO,EAAE,KAAX;MAAkBC,OAAO,EAAE;IAA3B,CAArB,CAAP;IACbX,GAAG,CAACkB,IAAJ,GAAWN,OAAX;EACH,CAPD,CAQA,OAAMO,CAAN,EAAQ;IACN,OAAOlB,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAACC,OAAO,EAAE,KAAV;MAAiBC,OAAO,EAAE;IAA1B,CAArB,CAAP;EACD;;EAGDT,IAAI;AACL,CAfD;;eAiBeH,c"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/routes/owner.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _owner = require(\"../controllers/owner.controller\");\n\nconst router = (0, _express.Router)();\nrouter.post('/', _owner.registerOwner);\nrouter.put('/:id', _owner.updateOwner);\nrouter.get('/', _owner.getAllOwners);\nrouter.get('/:id', _owner.getOwnerById);\nrouter.get('/email/:email', _owner.getOwnerByEmail);\nrouter.delete('/:id', _owner.deleteOwner);\n(0, _swaggiffy.registerDefinition)(router, {\n  tags: 'Owners',\n  mappedSchema: 'Owner',\n  basePath: '/api/v1/owners'\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJPd25lciIsInB1dCIsInVwZGF0ZU93bmVyIiwiZ2V0IiwiZ2V0QWxsT3duZXJzIiwiZ2V0T3duZXJCeUlkIiwiZ2V0T3duZXJCeUVtYWlsIiwiZGVsZXRlIiwiZGVsZXRlT3duZXIiLCJyZWdpc3RlckRlZmluaXRpb24iLCJ0YWdzIiwibWFwcGVkU2NoZW1hIiwiYmFzZVBhdGgiXSwic291cmNlUm9vdCI6Ii9ob21lL3JjYS9EZXNrdG9wL3Jlc3RmdWwtcHJhY3RpY2FsL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXMiOlsib3duZXIucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZpbml0aW9uIH0gZnJvbSAnc3dhZ2dpZmZ5JztcbmltcG9ydCB7IHJlZ2lzdGVyT3duZXIsIGRlbGV0ZU93bmVyLCBnZXRBbGxPd25lcnMsIGdldE93bmVyQnlFbWFpbCwgZ2V0T3duZXJCeUlkLCB1cGRhdGVPd25lciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL293bmVyLmNvbnRyb2xsZXInO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnBvc3QoJy8nLCByZWdpc3Rlck93bmVyKTtcbnJvdXRlci5wdXQoJy86aWQnLCB1cGRhdGVPd25lcik7XG5yb3V0ZXIuZ2V0KCcvJywgZ2V0QWxsT3duZXJzKTtcbnJvdXRlci5nZXQoJy86aWQnLCBnZXRPd25lckJ5SWQpO1xucm91dGVyLmdldCgnL2VtYWlsLzplbWFpbCcsIGdldE93bmVyQnlFbWFpbCk7XG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgZGVsZXRlT3duZXIpO1xuXG5yZWdpc3RlckRlZmluaXRpb24ocm91dGVyLCB7IHRhZ3M6ICdPd25lcnMnLCBtYXBwZWRTY2hlbWE6ICdPd25lcicsIGJhc2VQYXRoOiAnL2FwaS92MS9vd25lcnMnIH0pO1xuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFBQyxlQUFBLEdBQWY7QUFFQUQsTUFBTSxDQUFDRSxJQUFQLENBQVksR0FBWixFQUFpQkMsb0JBQWpCO0FBQ0FILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLE1BQVgsRUFBbUJDLGtCQUFuQjtBQUNBTCxNQUFNLENBQUNNLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxtQkFBaEI7QUFDQVAsTUFBTSxDQUFDTSxHQUFQLENBQVcsTUFBWCxFQUFtQkUsbUJBQW5CO0FBQ0FSLE1BQU0sQ0FBQ00sR0FBUCxDQUFXLGVBQVgsRUFBNEJHLHNCQUE1QjtBQUNBVCxNQUFNLENBQUNVLE1BQVAsQ0FBYyxNQUFkLEVBQXNCQyxrQkFBdEI7QUFFQSxJQUFBQyw2QkFBQSxFQUFtQlosTUFBbkIsRUFBMkI7RUFBRWEsSUFBSSxFQUFFLFFBQVI7RUFBa0JDLFlBQVksRUFBRSxPQUFoQztFQUF5Q0MsUUFBUSxFQUFFO0FBQW5ELENBQTNCO2VBQ2VmLE0ifQ==","map":{"version":3,"names":["router","Router","post","registerOwner","put","updateOwner","get","getAllOwners","getOwnerById","getOwnerByEmail","delete","deleteOwner","registerDefinition","tags","mappedSchema","basePath"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/routes/","sources":["owner.routes.js"],"sourcesContent":["import { Router } from 'express';\nimport { registerDefinition } from 'swaggiffy';\nimport { registerOwner, deleteOwner, getAllOwners, getOwnerByEmail, getOwnerById, updateOwner } from '../controllers/owner.controller';\n\nconst router = Router();\n\nrouter.post('/', registerOwner);\nrouter.put('/:id', updateOwner);\nrouter.get('/', getAllOwners);\nrouter.get('/:id', getOwnerById);\nrouter.get('/email/:email', getOwnerByEmail);\nrouter.delete('/:id', deleteOwner);\n\nregisterDefinition(router, { tags: 'Owners', mappedSchema: 'Owner', basePath: '/api/v1/owners' });\nexport default router;"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,GAAZ,EAAiBC,oBAAjB;AACAH,MAAM,CAACI,GAAP,CAAW,MAAX,EAAmBC,kBAAnB;AACAL,MAAM,CAACM,GAAP,CAAW,GAAX,EAAgBC,mBAAhB;AACAP,MAAM,CAACM,GAAP,CAAW,MAAX,EAAmBE,mBAAnB;AACAR,MAAM,CAACM,GAAP,CAAW,eAAX,EAA4BG,sBAA5B;AACAT,MAAM,CAACU,MAAP,CAAc,MAAd,EAAsBC,kBAAtB;AAEA,IAAAC,6BAAA,EAAmBZ,MAAnB,EAA2B;EAAEa,IAAI,EAAE,QAAR;EAAkBC,YAAY,EAAE,OAAhC;EAAyCC,QAAQ,EAAE;AAAnD,CAA3B;eACef,M"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/controllers/owner.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateOwner = exports.registerOwner = exports.getOwnerById = exports.getOwnerByEmail = exports.getAllOwners = exports.deleteOwner = void 0;\n\nvar _owner = _interopRequireDefault(require(\"../database/models/owner.model\"));\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//create Owner\nconst registerOwner = async (req, res) => {\n  const {\n    error\n  } = validateOwner(req.body);\n  if (error) return res.status(400).send({\n    success: false,\n    message: error.details[0].message\n  });\n  const owner = new _owner.default({\n    names: req.body.names,\n    phone: req.body.phone,\n    nationalId: req.body.nationalId,\n    address: req.body.address\n  });\n\n  try {\n    await owner.save();\n    res.send({\n      success: true,\n      message: 'Owner created successfully',\n      data: owner\n    });\n  } catch (err) {\n    res.status(500).send({\n      success: false,\n      message: err.message\n    });\n  }\n};\n\nexports.registerOwner = registerOwner;\n\nconst getAllOwners = async (req, res) => {\n  const owners = await _owner.default.find();\n  return res.status(200).json({\n    success: true,\n    data: owners\n  });\n};\n\nexports.getAllOwners = getAllOwners;\n\nconst getOwnerById = async (req, res) => {\n  const uowner = await _owner.default.findOne({\n    _id: req.params.id\n  });\n  if (!uowner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: uowner\n  });\n};\n\nexports.getOwnerById = getOwnerById;\n\nconst getOwnerByEmail = async (req, res) => {\n  const uowner = await _owner.default.findOne({\n    email: req.params.email\n  });\n  if (!uowner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: uowner\n  });\n};\n\nexports.getOwnerByEmail = getOwnerByEmail;\n\nconst updateOwner = async (req, res) => {\n  const uowner = await _owner.default.findOne({\n    _id: req.params.id\n  });\n  if (!uowner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  const newOwner = await _owner.default.findOneAndUpdate({\n    _id: req.params.id\n  }, req.body, {\n    new: true\n  });\n  return res.status(200).json({\n    success: true,\n    data: newOwner\n  });\n};\n\nexports.updateOwner = updateOwner;\n\nconst deleteOwner = async (req, res) => {\n  const owner = await _owner.default.findOne({\n    _id: req.params.id\n  });\n  if (!owner) return res.status(400).json({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  await _owner.default.findOneAndDelete({\n    _id: req.params.id\n  });\n  return res.status(200).json({\n    success: true,\n    data: owner\n  });\n}; //validate Owner\n\n\nexports.deleteOwner = deleteOwner;\n\nfunction validateOwner(owner) {\n  const schema = _joi.default.object({\n    names: _joi.default.string().min(3).max(50).required(),\n    phone: _joi.default.string().min(10).max(12).required(),\n    nationalId: _joi.default.string().min(16).max(16).required(),\n    address: _joi.default.string().min(3).max(50).required()\n  });\n\n  return schema.validate(owner);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3Rlck93bmVyIiwicmVxIiwicmVzIiwiZXJyb3IiLCJ2YWxpZGF0ZU93bmVyIiwiYm9keSIsInN0YXR1cyIsInNlbmQiLCJzdWNjZXNzIiwibWVzc2FnZSIsImRldGFpbHMiLCJvd25lciIsIk93bmVycyIsIm5hbWVzIiwicGhvbmUiLCJuYXRpb25hbElkIiwiYWRkcmVzcyIsInNhdmUiLCJkYXRhIiwiZXJyIiwiZ2V0QWxsT3duZXJzIiwib3duZXJzIiwiZmluZCIsImpzb24iLCJnZXRPd25lckJ5SWQiLCJ1b3duZXIiLCJmaW5kT25lIiwiX2lkIiwicGFyYW1zIiwiaWQiLCJnZXRPd25lckJ5RW1haWwiLCJlbWFpbCIsInVwZGF0ZU93bmVyIiwibmV3T3duZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibmV3IiwiZGVsZXRlT3duZXIiLCJmaW5kT25lQW5kRGVsZXRlIiwic2NoZW1hIiwiSm9pIiwib2JqZWN0Iiwic3RyaW5nIiwibWluIiwibWF4IiwicmVxdWlyZWQiLCJ2YWxpZGF0ZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm93bmVyLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE93bmVycyBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMvb3duZXIubW9kZWwnO1xuaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuXG4vL2NyZWF0ZSBPd25lclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyT3duZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IGVycm9yIH0gPSB2YWxpZGF0ZU93bmVyKHJlcS5ib2R5KTtcbiAgICBpZiAoZXJyb3IpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5kZXRhaWxzWzBdLm1lc3NhZ2VcbiAgICB9KTtcblxuICAgIGNvbnN0IG93bmVyID0gbmV3IE93bmVycyh7XG4gICAgICAgIG5hbWVzOiByZXEuYm9keS5uYW1lcyxcbiAgICAgICAgcGhvbmU6IHJlcS5ib2R5LnBob25lLFxuICAgICAgICBuYXRpb25hbElkOiByZXEuYm9keS5uYXRpb25hbElkLFxuICAgICAgICBhZGRyZXNzOiByZXEuYm9keS5hZGRyZXNzLFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG93bmVyLnNhdmUoKTtcbiAgICAgICAgcmVzLnNlbmQoeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnT3duZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCBkYXRhOiBvd25lciB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGNvbnN0IGdldEFsbE93bmVycyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG93bmVycyA9IGF3YWl0IE93bmVycy5maW5kKCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogb3duZXJzIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0T3duZXJCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdW93bmVyID0gYXdhaXQgT3duZXJzLmZpbmRPbmUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSk7XG4gICAgaWYgKCF1b3duZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk93bmVyIGRvZXMgbm90IGV4aXN0XCIgfSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdW93bmVyIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0T3duZXJCeUVtYWlsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdW93bmVyID0gYXdhaXQgT3duZXJzLmZpbmRPbmUoeyBlbWFpbDogcmVxLnBhcmFtcy5lbWFpbCB9KTtcbiAgICBpZiAoIXVvd25lcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiT3duZXIgZG9lcyBub3QgZXhpc3RcIiB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB1b3duZXIgfSk7XG59XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVPd25lciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVvd25lciA9IGF3YWl0IE93bmVycy5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdW93bmVyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJPd25lciBkb2VzIG5vdCBleGlzdFwiIH0pO1xuICAgIGNvbnN0IG5ld093bmVyID0gYXdhaXQgT3duZXJzLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgcmVxLmJvZHksIHsgbmV3OiB0cnVlIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG5ld093bmVyIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZGVsZXRlT3duZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvd25lciA9IGF3YWl0IE93bmVycy5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghb3duZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk93bmVyIGRvZXMgbm90IGV4aXN0XCIgfSk7XG5cbiAgICBhd2FpdCBPd25lcnMuZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBvd25lciB9KTtcbn1cblxuLy92YWxpZGF0ZSBPd25lclxuZnVuY3Rpb24gdmFsaWRhdGVPd25lcihvd25lcikge1xuICAgIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgICBuYW1lczogSm9pLnN0cmluZygpLm1pbigzKS5tYXgoNTApLnJlcXVpcmVkKCksXG4gICAgICAgIHBob25lOiBKb2kuc3RyaW5nKCkubWluKDEwKS5tYXgoMTIpLnJlcXVpcmVkKCksXG4gICAgICAgIG5hdGlvbmFsSWQ6IEpvaS5zdHJpbmcoKS5taW4oMTYpLm1heCgxNikucmVxdWlyZWQoKSxcbiAgICAgICAgYWRkcmVzczogSm9pLnN0cmluZygpLm1pbigzKS5tYXgoNTApLnJlcXVpcmVkKCksXG4gICAgfSk7XG4gICAgcmV0dXJuIHNjaGVtYS52YWxpZGF0ZShvd25lcik7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQTtBQUNPLE1BQU1BLGFBQWEsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7RUFDN0MsTUFBTTtJQUFFQztFQUFGLElBQVlDLGFBQWEsQ0FBQ0gsR0FBRyxDQUFDSSxJQUFMLENBQS9CO0VBQ0EsSUFBSUYsS0FBSixFQUFXLE9BQU9ELEdBQUcsQ0FBQ0ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0lBQ25DQyxPQUFPLEVBQUUsS0FEMEI7SUFFbkNDLE9BQU8sRUFBRU4sS0FBSyxDQUFDTyxPQUFOLENBQWMsQ0FBZCxFQUFpQkQ7RUFGUyxDQUFyQixDQUFQO0VBS1gsTUFBTUUsS0FBSyxHQUFHLElBQUlDLGNBQUosQ0FBVztJQUNyQkMsS0FBSyxFQUFFWixHQUFHLENBQUNJLElBQUosQ0FBU1EsS0FE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","map":{"version":3,"names":["registerOwner","req","res","error","validateOwner","body","status","send","success","message","details","owner","Owners","names","phone","nationalId","address","save","data","err","getAllOwners","owners","find","json","getOwnerById","uowner","findOne","_id","params","id","getOwnerByEmail","email","updateOwner","newOwner","findOneAndUpdate","new","deleteOwner","findOneAndDelete","schema","Joi","object","string","min","max","required","validate"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/controllers/","sources":["owner.controller.js"],"sourcesContent":["import Owners from '../database/models/owner.model';\nimport Joi from 'joi';\n\n//create Owner\nexport const registerOwner = async (req, res) => {\n    const { error } = validateOwner(req.body);\n    if (error) return res.status(400).send({\n        success: false,\n        message: error.details[0].message\n    });\n\n    const owner = new Owners({\n        names: req.body.names,\n        phone: req.body.phone,\n        nationalId: req.body.nationalId,\n        address: req.body.address,\n    });\n    try {\n        await owner.save();\n        res.send({ success: true, message: 'Owner created successfully', data: owner });\n    }\n    catch (err) {\n        res.status(500).send({ success: false, message: err.message });\n    }\n\n}\n\nexport const getAllOwners = async (req, res) => {\n    const owners = await Owners.find();\n    return res.status(200).json({ success: true, data: owners });\n}\n\nexport const getOwnerById = async (req, res) => {\n    const uowner = await Owners.findOne({ _id: req.params.id });\n    if (!uowner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n    return res.status(200).json({ success: true, data: uowner });\n}\n\nexport const getOwnerByEmail = async (req, res) => {\n    const uowner = await Owners.findOne({ email: req.params.email });\n    if (!uowner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n    return res.status(200).json({ success: true, data: uowner });\n}\n\nexport const updateOwner = async (req, res) => {\n    const uowner = await Owners.findOne({ _id: req.params.id });\n    if (!uowner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n    const newOwner = await Owners.findOneAndUpdate({ _id: req.params.id }, req.body, { new: true });\n    return res.status(200).json({ success: true, data: newOwner });\n}\n\nexport const deleteOwner = async (req, res) => {\n    const owner = await Owners.findOne({ _id: req.params.id });\n    if (!owner) return res.status(400).json({ success: false, message: \"Owner does not exist\" });\n\n    await Owners.findOneAndDelete({ _id: req.params.id });\n    return res.status(200).json({ success: true, data: owner });\n}\n\n//validate Owner\nfunction validateOwner(owner) {\n    const schema = Joi.object({\n        names: Joi.string().min(3).max(50).required(),\n        phone: Joi.string().min(10).max(12).required(),\n        nationalId: Joi.string().min(16).max(16).required(),\n        address: Joi.string().min(3).max(50).required(),\n    });\n    return schema.validate(owner);\n}"],"mappings":"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"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/models/owner.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema({\n  names: {\n    type: String,\n    required: true\n  },\n  phone: {\n    type: String,\n    required: true\n  },\n  nationalId: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  address: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\n(0, _swaggiffy.registerSchema)('CarOwner', Schema, {\n  orm: 'mongoose'\n}); //create mongoose virtual ref for vehicle\n\nSchema.virtual(\"vehicles\", {\n  ref: \"Vehicle\",\n  localField: \"_id\",\n  foreignField: \"ownerId\"\n});\n\nconst Owner = _mongoose.default.model(\"Owner\", Schema);\n\nvar _default = Owner;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIm5hbWVzIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwicGhvbmUiLCJuYXRpb25hbElkIiwidW5pcXVlIiwiYWRkcmVzcyIsInRpbWVzdGFtcHMiLCJyZWdpc3RlclNjaGVtYSIsIm9ybSIsInZpcnR1YWwiLCJyZWYiLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiT3duZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJvd25lci5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgeyByZWdpc3RlclNjaGVtYSB9IGZyb20gXCJzd2FnZ2lmZnlcIjtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBuYW1lczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgcGhvbmU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIG5hdGlvbmFsSWQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG5cbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxucmVnaXN0ZXJTY2hlbWEoJ0Nhck93bmVyJywgU2NoZW1hLCB7IG9ybTogJ21vbmdvb3NlJyB9KTtcblxuLy9jcmVhdGUgbW9uZ29vc2UgdmlydHVhbCByZWYgZm9yIHZlaGljbGVcblNjaGVtYS52aXJ0dWFsKFwidmVoaWNsZXNcIiwge1xuICAgIHJlZjogXCJWZWhpY2xlXCIsXG4gICAgbG9jYWxGaWVsZDogXCJfaWRcIixcbiAgICBmb3JlaWduRmllbGQ6IFwib3duZXJJZFwiLFxufSlcblxuY29uc3QgT3duZXIgPSBtb25nb29zZS5tb2RlbChcIk93bmVyXCIsIFNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBPd25lcjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsaUJBQUEsQ0FBU0QsTUFBVCxDQUFnQjtFQUMzQkUsS0FBSyxFQUFFO0lBQ0hDLElBQUksRUFBRUMsTUFESDtJQUVIQyxRQUFRLEVBQUU7RUFGUCxDQURvQjtFQUszQkMsS0FBSyxFQUFFO0lBQ0hILElBQUksRUFBRUMsTUFESDtJQUVIQyxRQUFRLEVBQUU7RUFGUCxDQUxvQjtFQVMzQkUsVUFBVSxFQUFFO0lBQ1JKLElBQUksRUFBRUMsTUFERTtJQUVSQyxRQUFRLEVBQUUsSUFGRjtJQUdSRyxNQUFNLEVBQUU7RUFIQSxDQVRlO0VBYzNCQyxPQUFPLEVBQUU7SUFDTE4sSUFBSSxFQUFFQyxNQUREO0lBRUxDLFFBQVEsRUFBRTtFQUZMO0FBZGtCLENBQWhCLEVBbUJaO0VBQ0NLLFVBQVUsRUFBRTtBQURiLENBbkJZLENBQWY7O0FBdUJBLElBQUFDLHlCQUFBLEVBQWUsVUFBZixFQUEyQlgsTUFBM0IsRUFBbUM7RUFBRVksR0FBRyxFQUFFO0FBQVAsQ0FBbkMsRSxDQUVBOztBQUNBWixNQUFNLENBQUNhLE9BQVAsQ0FBZSxVQUFmLEVBQTJCO0VBQ3ZCQyxHQUFHLEVBQUUsU0FEa0I7RUFFdkJDLFVBQVUsRUFBRSxLQUZXO0VBR3ZCQyxZQUFZLEVBQUU7QUFIUyxDQUEzQjs7QUFNQSxNQUFNQyxLQUFLLEdBQUdoQixpQkFBQSxDQUFTaUIsS0FBVCxDQUFlLE9BQWYsRUFBd0JsQixNQUF4QixDQUFkOztlQUNlaUIsSyJ9","map":{"version":3,"names":["Schema","mongoose","names","type","String","required","phone","nationalId","unique","address","timestamps","registerSchema","orm","virtual","ref","localField","foreignField","Owner","model"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/models/","sources":["owner.model.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { registerSchema } from \"swaggiffy\";\n\nconst Schema = mongoose.Schema({\n    names: {\n        type: String,\n        required: true,\n    },\n    phone: {\n        type: String,\n        required: true,\n    },\n    nationalId: {\n        type: String,\n        required: true,\n        unique: true,\n    },\n    address: {\n        type: String,\n        required: true,\n    },\n\n}, {\n    timestamps: true\n});\n\nregisterSchema('CarOwner', Schema, { orm: 'mongoose' });\n\n//create mongoose virtual ref for vehicle\nSchema.virtual(\"vehicles\", {\n    ref: \"Vehicle\",\n    localField: \"_id\",\n    foreignField: \"ownerId\",\n})\n\nconst Owner = mongoose.model(\"Owner\", Schema);\nexport default Owner;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAT,CAAgB;EAC3BE,KAAK,EAAE;IACHC,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CADoB;EAK3BC,KAAK,EAAE;IACHH,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE;EAFP,CALoB;EAS3BE,UAAU,EAAE;IACRJ,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,IAFF;IAGRG,MAAM,EAAE;EAHA,CATe;EAc3BC,OAAO,EAAE;IACLN,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL;AAdkB,CAAhB,EAmBZ;EACCK,UAAU,EAAE;AADb,CAnBY,CAAf;;AAuBA,IAAAC,yBAAA,EAAe,UAAf,EAA2BX,MAA3B,EAAmC;EAAEY,GAAG,EAAE;AAAP,CAAnC,E,CAEA;;AACAZ,MAAM,CAACa,OAAP,CAAe,UAAf,EAA2B;EACvBC,GAAG,EAAE,SADkB;EAEvBC,UAAU,EAAE,KAFW;EAGvBC,YAAY,EAAE;AAHS,CAA3B;;AAMA,MAAMC,KAAK,GAAGhB,iBAAA,CAASiB,KAAT,CAAe,OAAf,EAAwBlB,MAAxB,CAAd;;eACeiB,K"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/routes/vehicle.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nvar _vehicle = require(\"../controllers/vehicle.controller\");\n\nvar _auth = _interopRequireDefault(require(\"../middlewares/auth.middleware\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.post('/', _auth.default, _vehicle.registerVehicle);\nrouter.get('/', _vehicle.getAllVehicles);\nrouter.get('/:id', _vehicle.getVehicleById);\nrouter.get('/owner/:id', _vehicle.getVehiclesByOwnerId);\nrouter.put('/:id', _vehicle.updateVehicle);\nrouter.delete('/:id', _vehicle.deleteVehicle); // router.put('/:id/vote', AuthMiddleware, vote);\n\n(0, _swaggiffy.registerDefinition)(router, {\n  tags: \"Vehicles\",\n  mappedSchema: \"Vehicle\",\n  basePath: \"/api/v1/vehicle\"\n});\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiQXV0aE1pZGRsZXdhcmUiLCJyZWdpc3RlclZlaGljbGUiLCJnZXQiLCJnZXRBbGxWZWhpY2xlcyIsImdldFZlaGljbGVCeUlkIiwiZ2V0VmVoaWNsZXNCeU93bmVySWQiLCJwdXQiLCJ1cGRhdGVWZWhpY2xlIiwiZGVsZXRlIiwiZGVsZXRlVmVoaWNsZSIsInJlZ2lzdGVyRGVmaW5pdGlvbiIsInRhZ3MiLCJtYXBwZWRTY2hlbWEiLCJiYXNlUGF0aCJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ2ZWhpY2xlLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZpbml0aW9uIH0gZnJvbSBcInN3YWdnaWZmeVwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJWZWhpY2xlLCBkZWxldGVWZWhpY2xlLCBnZXRBbGxWZWhpY2xlcywgZ2V0VmVoaWNsZUJ5SWQsIGdldFZlaGljbGVzQnlPd25lcklkLCB1cGRhdGVWZWhpY2xlIH0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL3ZlaGljbGUuY29udHJvbGxlclwiO1xuaW1wb3J0IEF1dGhNaWRkbGV3YXJlIGZyb20gXCIuLi9taWRkbGV3YXJlcy9hdXRoLm1pZGRsZXdhcmVcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5cbnJvdXRlci5wb3N0KCcvJywgQXV0aE1pZGRsZXdhcmUsIHJlZ2lzdGVyVmVoaWNsZSk7XG5yb3V0ZXIuZ2V0KCcvJywgZ2V0QWxsVmVoaWNsZXMpO1xucm91dGVyLmdldCgnLzppZCcsIGdldFZlaGljbGVCeUlkKTtcbnJvdXRlci5nZXQoJy9vd25lci86aWQnLCBnZXRWZWhpY2xlc0J5T3duZXJJZCk7XG5yb3V0ZXIucHV0KCcvOmlkJywgdXBkYXRlVmVoaWNsZSk7XG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgZGVsZXRlVmVoaWNsZSk7XG4vLyByb3V0ZXIucHV0KCcvOmlkL3ZvdGUnLCBBdXRoTWlkZGxld2FyZSwgdm90ZSk7XG5cbnJlZ2lzdGVyRGVmaW5pdGlvbihyb3V0ZXIsIHsgdGFnczogXCJWZWhpY2xlc1wiLCBtYXBwZWRTY2hlbWE6IFwiVmVoaWNsZVwiLCBiYXNlUGF0aDogXCIvYXBpL3YxL3ZlaGljbGVcIiB9KTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUFDLGVBQUEsR0FBZjtBQUVBRCxNQUFNLENBQUNFLElBQVAsQ0FBWSxHQUFaLEVBQWlCQyxhQUFqQixFQUFpQ0Msd0JBQWpDO0FBQ0FKLE1BQU0sQ0FBQ0ssR0FBUCxDQUFXLEdBQVgsRUFBZ0JDLHVCQUFoQjtBQUNBTixNQUFNLENBQUNLLEdBQVAsQ0FBVyxNQUFYLEVBQW1CRSx1QkFBbkI7QUFDQVAsTUFBTSxDQUFDSyxHQUFQLENBQVcsWUFBWCxFQUF5QkcsNkJBQXpCO0FBQ0FSLE1BQU0sQ0FBQ1MsR0FBUCxDQUFXLE1BQVgsRUFBbUJDLHNCQUFuQjtBQUNBVixNQUFNLENBQUNXLE1BQVAsQ0FBYyxNQUFkLEVBQXNCQyxzQkFBdEIsRSxDQUNBOztBQUVBLElBQUFDLDZCQUFBLEVBQW1CYixNQUFuQixFQUEyQjtFQUFFYyxJQUFJLEVBQUUsVUFBUjtFQUFvQkMsWUFBWSxFQUFFLFNBQWxDO0VBQTZDQyxRQUFRLEVBQUU7QUFBdkQsQ0FBM0I7ZUFFZWhCLE0ifQ==","map":{"version":3,"names":["router","Router","post","AuthMiddleware","registerVehicle","get","getAllVehicles","getVehicleById","getVehiclesByOwnerId","put","updateVehicle","delete","deleteVehicle","registerDefinition","tags","mappedSchema","basePath"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/routes/","sources":["vehicle.routes.js"],"sourcesContent":["import { Router } from \"express\";\nimport { registerDefinition } from \"swaggiffy\";\nimport { registerVehicle, deleteVehicle, getAllVehicles, getVehicleById, getVehiclesByOwnerId, updateVehicle } from \"../controllers/vehicle.controller\";\nimport AuthMiddleware from \"../middlewares/auth.middleware\";\n\nconst router = Router();\n\nrouter.post('/', AuthMiddleware, registerVehicle);\nrouter.get('/', getAllVehicles);\nrouter.get('/:id', getVehicleById);\nrouter.get('/owner/:id', getVehiclesByOwnerId);\nrouter.put('/:id', updateVehicle);\nrouter.delete('/:id', deleteVehicle);\n// router.put('/:id/vote', AuthMiddleware, vote);\n\nregisterDefinition(router, { tags: \"Vehicles\", mappedSchema: \"Vehicle\", basePath: \"/api/v1/vehicle\" });\n\nexport default router;"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,GAAZ,EAAiBC,aAAjB,EAAiCC,wBAAjC;AACAJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAgBC,uBAAhB;AACAN,MAAM,CAACK,GAAP,CAAW,MAAX,EAAmBE,uBAAnB;AACAP,MAAM,CAACK,GAAP,CAAW,YAAX,EAAyBG,6BAAzB;AACAR,MAAM,CAACS,GAAP,CAAW,MAAX,EAAmBC,sBAAnB;AACAV,MAAM,CAACW,MAAP,CAAc,MAAd,EAAsBC,sBAAtB,E,CACA;;AAEA,IAAAC,6BAAA,EAAmBb,MAAnB,EAA2B;EAAEc,IAAI,EAAE,UAAR;EAAoBC,YAAY,EAAE,SAAlC;EAA6CC,QAAQ,EAAE;AAAvD,CAA3B;eAEehB,M"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/controllers/vehicle.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateVehicle = exports.registerVehicle = exports.getVehiclesByOwnerId = exports.getVehicleById = exports.getAllVehicles = exports.deleteVehicle = void 0;\n\nvar _vehicle = _interopRequireDefault(require(\"../database/models/vehicle.model\"));\n\nvar _admin = _interopRequireDefault(require(\"../database/models/admin.model\"));\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst registerVehicle = async (req, res) => {\n  const {\n    error\n  } = validateVehicle(req.body);\n  if (error) return res.status(400).send({\n    success: false,\n    message: error.details[0].message\n  });\n  const {\n    chasisNumber,\n    manufacturer,\n    manufactureYear,\n    model,\n    price,\n    color,\n    plateNumber,\n    ownerId\n  } = req.body; //check if owner exists\n\n  const owner = await _admin.default.findById(ownerId);\n  if (!owner) return res.status(400).send({\n    success: false,\n    message: \"Owner does not exist\"\n  });\n  const vehicle = new _vehicle.default({\n    chasisNumber,\n    manufacturer,\n    manufactureYear,\n    model,\n    price,\n    color,\n    plateNumber,\n    ownerId\n  });\n\n  try {\n    await vehicle.save();\n    return res.status(201).json({\n      success: true,\n      data: vehicle\n    });\n  } catch (error) {\n    return res.status(400).send({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.registerVehicle = registerVehicle;\n\nconst getAllVehicles = async (req, res) => {\n  try {\n    const vehicles = await _vehicle.default.find();\n    return res.status(200).json({\n      success: true,\n      data: vehicles\n    });\n  } catch (error) {\n    return res.status(400).send({\n      success: false,\n      message: error.message\n    });\n  }\n};\n\nexports.getAllVehicles = getAllVehicles;\n\nconst getVehicleById = async (req, res) => {\n  const vehicle = await _vehicle.default.fin({\n    _id: req.params.id\n  });\n  if (!vehicle) return res.status(404).json({\n    success: false,\n    message: \"Vehicle does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: vehicle\n  });\n};\n\nexports.getVehicleById = getVehicleById;\n\nconst getVehiclesByOwnerId = async (req, res) => {\n  //find all vehicles by ownerId\n  const vehicles = await _vehicle.default.find({\n    ownerId: req.params.id\n  });\n  if (!vehicles) return res.status(404).json({\n    success: false,\n    message: \"Vehicles does not exist\"\n  });\n  return res.status(200).json({\n    success: true,\n    data: vehicles\n  });\n};\n\nexports.getVehiclesByOwnerId = getVehiclesByOwnerId;\n\nconst updateVehicle = async (req, res) => {\n  const vehicle = await _vehicle.default.findOne({\n    _id: req.params.id\n  });\n  if (!vehicle) return res.status(404).json({\n    success: false,\n    message: \"Vehicle does not exist\"\n  });\n  const updated = await _vehicle.default.findOneAndUpdate({\n    _id: req.params.id\n  }, req.body, {\n    new: true\n  });\n  return res.status(200).json({\n    success: true,\n    data: updated\n  });\n};\n\nexports.updateVehicle = updateVehicle;\n\nconst deleteVehicle = async (req, res) => {\n  const vehicle = await _vehicle.default.findOne({\n    _id: req.params.id\n  });\n  if (!vehicle) return res.status(404).json({\n    success: false,\n    message: \"Vehicle does not exist\"\n  });\n  await _vehicle.default.findOneAndDelete({\n    _id: req.params.id\n  });\n  return res.status(200).json({\n    success: true,\n    data: vehicle\n  });\n};\n\nexports.deleteVehicle = deleteVehicle;\n\nfunction validateVehicle(vh) {\n  const schema = _joi.default.object({\n    chasisNumber: _joi.default.string().min(4).max(30).required(),\n    manufacturer: _joi.default.string().min(4).max(30).required(),\n    manufactureYear: _joi.default.number().min(1900).max(2020).required(),\n    model: _joi.default.string().min(4).max(30).required(),\n    price: _joi.default.number().min(1).max(1000000000).required(),\n    color: _joi.default.string().min(4).max(30),\n    plateNumber: _joi.default.string().min(4).max(30).required(),\n    ownerId: _joi.default.string().min(4).max(30)\n  });\n\n  return schema.validate(vh);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlclZlaGljbGUiLCJyZXEiLCJyZXMiLCJlcnJvciIsInZhbGlkYXRlVmVoaWNsZSIsImJvZHkiLCJzdGF0dXMiLCJzZW5kIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiY2hhc2lzTnVtYmVyIiwibWFudWZhY3R1cmVyIiwibWFudWZhY3R1cmVZZWFyIiwibW9kZWwiLCJwcmljZSIsImNvbG9yIiwicGxhdGVOdW1iZXIiLCJvd25lcklkIiwib3duZXIiLCJBZG1pbiIsImZpbmRCeUlkIiwidmVoaWNsZSIsIlZlaGljbGUiLCJzYXZlIiwianNvbiIsImRhdGEiLCJnZXRBbGxWZWhpY2xlcyIsInZlaGljbGVzIiwiZmluZCIsImdldFZlaGljbGVCeUlkIiwiZmluIiwiX2lkIiwicGFyYW1zIiwiaWQiLCJnZXRWZWhpY2xlc0J5T3duZXJJZCIsInVwZGF0ZVZlaGljbGUiLCJmaW5kT25lIiwidXBkYXRlZCIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJkZWxldGVWZWhpY2xlIiwiZmluZE9uZUFuZERlbGV0ZSIsInZoIiwic2NoZW1hIiwiSm9pIiwib2JqZWN0Iiwic3RyaW5nIiwibWluIiwibWF4IiwicmVxdWlyZWQiLCJudW1iZXIiLCJ2YWxpZGF0ZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInZlaGljbGUuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmVoaWNsZSBmcm9tICcuLi9kYXRhYmFzZS9tb2RlbHMvdmVoaWNsZS5tb2RlbCc7XG5pbXBvcnQgQWRtaW4gZnJvbSAnLi4vZGF0YWJhc2UvbW9kZWxzL2FkbWluLm1vZGVsJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVmVoaWNsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IHZhbGlkYXRlVmVoaWNsZShyZXEuYm9keSk7XG4gICAgaWYgKGVycm9yKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IuZGV0YWlsc1swXS5tZXNzYWdlXG4gICAgfSk7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGNoYXNpc051bWJlcixcbiAgICAgICAgbWFudWZhY3R1cmVyLFxuICAgICAgICBtYW51ZmFjdHVyZVllYXIsXG4gICAgICAgIG1vZGVsLFxuICAgICAgICBwcmljZSxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIHBsYXRlTnVtYmVyLFxuICAgICAgICBvd25lcklkXG4gICAgfSA9IHJlcS5ib2R5O1xuXG4gICAgLy9jaGVjayBpZiBvd25lciBleGlzdHNcbiAgICBjb25zdCBvd25lciA9IGF3YWl0IEFkbWluLmZpbmRCeUlkKG93bmVySWQpO1xuICAgIGlmICghb3duZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIk93bmVyIGRvZXMgbm90IGV4aXN0XCJcbiAgICB9KTtcblxuICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgVmVoaWNsZSh7XG4gICAgICAgIGNoYXNpc051bWJlcixcbiAgICAgICAgbWFudWZhY3R1cmVyLFxuICAgICAgICBtYW51ZmFjdHVyZVllYXIsXG4gICAgICAgIG1vZGVsLFxuICAgICAgICBwcmljZSxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIHBsYXRlTnVtYmVyLFxuICAgICAgICBvd25lcklkXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdmVoaWNsZS5zYXZlKCk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHZlaGljbGUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGNvbnN0IGdldEFsbFZlaGljbGVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdmVoaWNsZXMgPSBhd2FpdCBWZWhpY2xlLmZpbmQoKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdmVoaWNsZXMgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGNvbnN0IGdldFZlaGljbGVCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdmVoaWNsZSA9IGF3YWl0IFZlaGljbGUuZmluKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIGlmICghdmVoaWNsZSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVmVoaWNsZSBkb2VzIG5vdCBleGlzdFwiIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHZlaGljbGUgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRWZWhpY2xlc0J5T3duZXJJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIC8vZmluZCBhbGwgdmVoaWNsZXMgYnkgb3duZXJJZFxuICAgIGNvbnN0IHZlaGljbGVzID0gYXdhaXQgVmVoaWNsZS5maW5kKHsgb3duZXJJZDogcmVxLnBhcmFtcy5pZCB9KTtcbiAgICBpZiAoIXZlaGljbGVzKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJWZWhpY2xlcyBkb2VzIG5vdCBleGlzdFwiIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHZlaGljbGVzIH0pO1xufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlVmVoaWNsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHZlaGljbGUgPSBhd2FpdCBWZWhpY2xlLmZpbmRPbmUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSk7XG4gICAgaWYgKCF2ZWhpY2xlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJWZWhpY2xlIGRvZXMgbm90IGV4aXN0XCIgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgVmVoaWNsZS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIHJlcS5ib2R5LCB7IG5ldzogdHJ1ZSB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB1cGRhdGVkIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZGVsZXRlVmVoaWNsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHZlaGljbGUgPSBhd2FpdCBWZWhpY2xlLmZpbmRPbmUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSk7XG4gICAgaWYgKCF2ZWhpY2xlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJWZWhpY2xlIGRvZXMgbm90IGV4aXN0XCIgfSk7XG4gICAgYXdhaXQgVmVoaWNsZS5maW5kT25lQW5kRGVsZXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHZlaGljbGUgfSk7XG59XG5cblxuZnVuY3Rpb24gdmFsaWRhdGVWZWhpY2xlKHZoKSB7XG4gICAgY29uc3Qgc2NoZW1hID0gSm9pLm9iamVjdCh7XG4gICAgICAgIGNoYXNpc051bWJlcjogSm9pLnN0cmluZygpLm1pbig0KS5tYXgoMzApLnJlcXVpcmVkKCksXG4gICAgICAgIG1hbnVmYWN0dXJlcjogSm9pLnN0cmluZygpLm1pbig0KS5tYXgoMzApLnJlcXVpcmVkKCksXG4gICAgICAgIG1hbnVmYWN0dXJlWWVhcjogSm9pLm51bWJlcigpLm1pbigxOTAwKS5tYXgoMjAyMCkucmVxdWlyZWQoKSxcbiAgICAgICAgbW9kZWw6IEpvaS5zdHJpbmcoKS5taW4oNCkubWF4KDMwKS5yZXF1aXJlZCgpLFxuICAgICAgICBwcmljZTogSm9pLm51bWJlcigpLm1pbigxKS5tYXgoMTAwMDAwMDAwMCkucmVxdWlyZWQoKSxcbiAgICAgICAgY29sb3I6IEpvaS5zdHJpbmcoKS5taW4oNCkubWF4KDMwKSxcbiAgICAgICAgcGxhdGVOdW1iZXI6IEpvaS5zdHJpbmcoKS5taW4oNCkubWF4KDMwKS5yZXF1aXJlZCgpLFxuICAgICAgICBvd25lcklkOiBKb2kuc3RyaW5nKCkubWluKDQpLm1heCgzMCksXG4gICAgfSlcblxuICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUodmgpO1xufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRU8sTUFBTUEsZUFBZSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtFQUMvQyxNQUFNO0lBQUVDO0VBQUYsSUFBWUMsZUFBZSxDQUFDSCxHQUFHLENBQUNJLElBQUwsQ0FBakM7RUFDQSxJQUFJRixLQUFKLEVBQVcsT0FBT0QsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7SUFDbkNDLE9BQU8sRUFB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","map":{"version":3,"names":["registerVehicle","req","res","error","validateVehicle","body","status","send","success","message","details","chasisNumber","manufacturer","manufactureYear","model","price","color","plateNumber","ownerId","owner","Admin","findById","vehicle","Vehicle","save","json","data","getAllVehicles","vehicles","find","getVehicleById","fin","_id","params","id","getVehiclesByOwnerId","updateVehicle","findOne","updated","findOneAndUpdate","new","deleteVehicle","findOneAndDelete","vh","schema","Joi","object","string","min","max","required","number","validate"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/controllers/","sources":["vehicle.controller.js"],"sourcesContent":["import Vehicle from '../database/models/vehicle.model';\nimport Admin from '../database/models/admin.model';\nimport Joi from 'joi';\n\nexport const registerVehicle = async (req, res) => {\n    const { error } = validateVehicle(req.body);\n    if (error) return res.status(400).send({\n        success: false,\n        message: error.details[0].message\n    });\n\n    const {\n        chasisNumber,\n        manufacturer,\n        manufactureYear,\n        model,\n        price,\n        color,\n        plateNumber,\n        ownerId\n    } = req.body;\n\n    //check if owner exists\n    const owner = await Admin.findById(ownerId);\n    if (!owner) return res.status(400).send({\n        success: false,\n        message: \"Owner does not exist\"\n    });\n\n    const vehicle = new Vehicle({\n        chasisNumber,\n        manufacturer,\n        manufactureYear,\n        model,\n        price,\n        color,\n        plateNumber,\n        ownerId\n    });\n    try {\n        await vehicle.save();\n        return res.status(201).json({ success: true, data: vehicle });\n    } catch (error) {\n        return res.status(400).send({\n            success: false,\n            message: error.message\n        });\n    }\n\n}\n\nexport const getAllVehicles = async (req, res) => {\n    try {\n        const vehicles = await Vehicle.find();\n        return res.status(200).json({ success: true, data: vehicles });\n    } catch (error) {\n        return res.status(400).send({\n            success: false,\n            message: error.message\n        });\n    }\n}\n\n\nexport const getVehicleById = async (req, res) => {\n    const vehicle = await Vehicle.fin({ _id: req.params.id });\n    if (!vehicle) return res.status(404).json({ success: false, message: \"Vehicle does not exist\" });\n    return res.status(200).json({ success: true, data: vehicle });\n}\n\nexport const getVehiclesByOwnerId = async (req, res) => {\n    //find all vehicles by ownerId\n    const vehicles = await Vehicle.find({ ownerId: req.params.id });\n    if (!vehicles) return res.status(404).json({ success: false, message: \"Vehicles does not exist\" });\n    return res.status(200).json({ success: true, data: vehicles });\n}\n\nexport const updateVehicle = async (req, res) => {\n    const vehicle = await Vehicle.findOne({ _id: req.params.id });\n    if (!vehicle) return res.status(404).json({ success: false, message: \"Vehicle does not exist\" });\n\n    const updated = await Vehicle.findOneAndUpdate({ _id: req.params.id }, req.body, { new: true });\n    return res.status(200).json({ success: true, data: updated });\n}\n\nexport const deleteVehicle = async (req, res) => {\n    const vehicle = await Vehicle.findOne({ _id: req.params.id });\n    if (!vehicle) return res.status(404).json({ success: false, message: \"Vehicle does not exist\" });\n    await Vehicle.findOneAndDelete({ _id: req.params.id });\n    return res.status(200).json({ success: true, data: vehicle });\n}\n\n\nfunction validateVehicle(vh) {\n    const schema = Joi.object({\n        chasisNumber: Joi.string().min(4).max(30).required(),\n        manufacturer: Joi.string().min(4).max(30).required(),\n        manufactureYear: Joi.number().min(1900).max(2020).required(),\n        model: Joi.string().min(4).max(30).required(),\n        price: Joi.number().min(1).max(1000000000).required(),\n        color: Joi.string().min(4).max(30),\n        plateNumber: Joi.string().min(4).max(30).required(),\n        ownerId: Joi.string().min(4).max(30),\n    })\n\n    return schema.validate(vh);\n}"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEO,MAAMA,eAAe,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EAC/C,MAAM;IAAEC;EAAF,IAAYC,eAAe,CAACH,GAAG,CAACI,IAAL,CAAjC;EACA,IAAIF,KAAJ,EAAW,OAAOD,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;IACnCC,OAAO,EAAE,KAD0B;IAEnCC,OAAO,EAAEN,KAAK,CAACO,OAAN,CAAc,CAAd,EAAiBD;EAFS,CAArB,CAAP;EAKX,MAAM;IACFE,YADE;IAEFC,YAFE;IAGFC,eAHE;IAIFC,KAJE;IAKFC,KALE;IAMFC,KANE;IAOFC,WAPE;IAQFC;EARE,IASFjB,GAAG,CAACI,IATR,CAP+C,CAkB/C;;EACA,MAAMc,KAAK,GAAG,MAAMC,cAAA,CAAMC,QAAN,CAAeH,OAAf,CAApB;EACA,IAAI,CAACC,KAAL,EAAY,OAAOjB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;IACpCC,OAAO,EAAE,KAD2B;IAEpCC,OAAO,EAAE;EAF2B,CAArB,CAAP;EAKZ,MAAMa,OAAO,GAAG,IAAIC,gBAAJ,CAAY;IACxBZ,YADwB;IAExBC,YAFwB;IAGxBC,eAHwB;IAIxBC,KAJwB;IAKxBC,KALwB;IAMxBC,KANwB;IAOxBC,WAPwB;IAQxBC;EARwB,CAAZ,CAAhB;;EAUA,IAAI;IACA,MAAMI,OAAO,CAACE,IAAR,EAAN;IACA,OAAOtB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;MAAEjB,OAAO,EAAE,IAAX;MAAiBkB,IAAI,EAAEJ;IAAvB,CAArB,CAAP;EACH,CAHD,CAGE,OAAOnB,KAAP,EAAc;IACZ,OAAOD,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MACxBC,OAAO,EAAE,KADe;MAExBC,OAAO,EAAEN,KAAK,CAACM;IAFS,CAArB,CAAP;EAIH;AAEJ,CA7CM;;;;AA+CA,MAAMkB,cAAc,GAAG,OAAO1B,GAAP,EAAYC,GAAZ,KAAoB;EAC9C,IAAI;IACA,MAAM0B,QAAQ,GAAG,MAAML,gBAAA,CAAQM,IAAR,EAAvB;IACA,OAAO3B,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;MAAEjB,OAAO,EAAE,IAAX;MAAiBkB,IAAI,EAAEE;IAAvB,CAArB,CAAP;EACH,CAHD,CAGE,OAAOzB,KAAP,EAAc;IACZ,OAAOD,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MACxBC,OAAO,EAAE,KADe;MAExBC,OAAO,EAAEN,KAAK,CAACM;IAFS,CAArB,CAAP;EAIH;AACJ,CAVM;;;;AAaA,MAAMqB,cAAc,GAAG,OAAO7B,GAAP,EAAYC,GAAZ,KAAoB;EAC9C,MAAMoB,OAAO,GAAG,MAAMC,gBAAA,CAAQQ,GAAR,CAAY;IAAEC,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAZ,CAAtB;EACA,IAAI,CAACZ,OAAL,EAAc,OAAOpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EACd,OAAOP,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEJ;EAAvB,CAArB,CAAP;AACH,CAJM;;;;AAMA,MAAMa,oBAAoB,GAAG,OAAOlC,GAAP,EAAYC,GAAZ,KAAoB;EACpD;EACA,MAAM0B,QAAQ,GAAG,MAAML,gBAAA,CAAQM,IAAR,CAAa;IAAEX,OAAO,EAAEjB,GAAG,CAACgC,MAAJ,CAAWC;EAAtB,CAAb,CAAvB;EACA,IAAI,CAACN,QAAL,EAAe,OAAO1B,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EACf,OAAOP,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEE;EAAvB,CAArB,CAAP;AACH,CALM;;;;AAOA,MAAMQ,aAAa,GAAG,OAAOnC,GAAP,EAAYC,GAAZ,KAAoB;EAC7C,MAAMoB,OAAO,GAAG,MAAMC,gBAAA,CAAQc,OAAR,CAAgB;IAAEL,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAhB,CAAtB;EACA,IAAI,CAACZ,OAAL,EAAc,OAAOpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EAEd,MAAM6B,OAAO,GAAG,MAAMf,gBAAA,CAAQgB,gBAAR,CAAyB;IAAEP,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAzB,EAAiDjC,GAAG,CAACI,IAArD,EAA2D;IAAEmC,GAAG,EAAE;EAAP,CAA3D,CAAtB;EACA,OAAOtC,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEY;EAAvB,CAArB,CAAP;AACH,CANM;;;;AAQA,MAAMG,aAAa,GAAG,OAAOxC,GAAP,EAAYC,GAAZ,KAAoB;EAC7C,MAAMoB,OAAO,GAAG,MAAMC,gBAAA,CAAQc,OAAR,CAAgB;IAAEL,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAhB,CAAtB;EACA,IAAI,CAACZ,OAAL,EAAc,OAAOpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,KAAX;IAAkBC,OAAO,EAAE;EAA3B,CAArB,CAAP;EACd,MAAMc,gBAAA,CAAQmB,gBAAR,CAAyB;IAAEV,GAAG,EAAE/B,GAAG,CAACgC,MAAJ,CAAWC;EAAlB,CAAzB,CAAN;EACA,OAAOhC,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqB;IAAEjB,OAAO,EAAE,IAAX;IAAiBkB,IAAI,EAAEJ;EAAvB,CAArB,CAAP;AACH,CALM;;;;AAQP,SAASlB,eAAT,CAAyBuC,EAAzB,EAA6B;EACzB,MAAMC,MAAM,GAAGC,YAAA,CAAIC,MAAJ,CAAW;IACtBnC,YAAY,EAAEkC,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EADQ;IAEtBtC,YAAY,EAAEiC,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EAFQ;IAGtBrC,eAAe,EAAEgC,YAAA,CAAIM,MAAJ,GAAaH,GAAb,CAAiB,IAAjB,EAAuBC,GAAvB,CAA2B,IAA3B,EAAiCC,QAAjC,EAHK;IAItBpC,KAAK,EAAE+B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EAJe;IAKtBnC,KAAK,EAAE8B,YAAA,CAAIM,MAAJ,GAAaH,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,UAAxB,EAAoCC,QAApC,EALe;IAMtBlC,KAAK,EAAE6B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,CANe;IAOtBhC,WAAW,EAAE4B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BC,QAA5B,EAPS;IAQtBhC,OAAO,EAAE2B,YAAA,CAAIE,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB;EARa,CAAX,CAAf;;EAWA,OAAOL,MAAM,CAACQ,QAAP,CAAgBT,EAAhB,CAAP;AACH"}},"mtime":1657098589037},"{\"assumptions\":{},\"sourceRoot\":\"/home/rca/Desktop/restful-practical/server/src/database/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/rca/Desktop/restful-practical/server\",\"filename\":\"/home/rca/Desktop/restful-practical/server/src/database/models/vehicle.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"/home/rca/Desktop/restful-practical/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.5:production":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _swaggiffy = require(\"swaggiffy\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema({\n  chasisNumber: {\n    type: String,\n    required: true,\n    unique: true,\n    maxLength: 20\n  },\n  manufacturer: {\n    type: String,\n    required: true,\n    maxLength: 60\n  },\n  manufactureYear: {\n    type: Number,\n    required: true,\n    maxLength: 4\n  },\n  model: {\n    type: String,\n    required: true,\n    maxLength: 60\n  },\n  price: {\n    type: Number,\n    required: true,\n    maxLength: 10\n  },\n  color: {\n    type: String,\n    default: \"white\",\n    maxLength: 60\n  },\n  plateNumber: {\n    type: String,\n    required: true,\n    unique: true,\n    maxLength: 8\n  },\n  ownerId: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"Owner\",\n    required: false\n  }\n}, {\n  timestamps: true\n});\n\n(0, _swaggiffy.registerSchema)('Vehicle', Schema, {\n  orm: 'mongoose'\n}); //create mongoose virtual ref for owner\n\nSchema.virtual(\"owner\", {\n  ref: \"Owner\",\n  localField: \"ownerId\",\n  foreignField: \"_id\",\n  justOne: true\n});\n\nconst Vehicle = _mongoose.default.model(\"Vehicle\", Schema);\n\nvar _default = Vehicle;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsImNoYXNpc051bWJlciIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsIm1heExlbmd0aCIsIm1hbnVmYWN0dXJlciIsIm1hbnVmYWN0dXJlWWVhciIsIk51bWJlciIsIm1vZGVsIiwicHJpY2UiLCJjb2xvciIsImRlZmF1bHQiLCJwbGF0ZU51bWJlciIsIm93bmVySWQiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidGltZXN0YW1wcyIsInJlZ2lzdGVyU2NoZW1hIiwib3JtIiwidmlydHVhbCIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJqdXN0T25lIiwiVmVoaWNsZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvcmNhL0Rlc2t0b3AvcmVzdGZ1bC1wcmFjdGljYWwvc2VydmVyL3NyYy9kYXRhYmFzZS9tb2RlbHMvIiwic291cmNlcyI6WyJ2ZWhpY2xlLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCB7IHJlZ2lzdGVyU2NoZW1hIH0gZnJvbSBcInN3YWdnaWZmeVwiO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWEoe1xuICAgIGNoYXNpc051bWJlcjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIG1heExlbmd0aDogMjAsXG4gICAgfSxcbiAgICBtYW51ZmFjdHVyZXI6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4TGVuZ3RoOiA2MCxcbiAgICB9LFxuICAgIG1hbnVmYWN0dXJlWWVhcjoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhMZW5ndGg6IDQsXG4gICAgfSxcbiAgICBtb2RlbDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhMZW5ndGg6IDYwLFxuICAgIH0sXG4gICAgcHJpY2U6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4TGVuZ3RoOiAxMCxcbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogXCJ3aGl0ZVwiLFxuICAgICAgICBtYXhMZW5ndGg6IDYwLFxuICAgIH0sXG4gICAgcGxhdGVOdW1iZXI6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBtYXhMZW5ndGg6IDgsXG4gICAgfSxcbiAgICBvd25lcklkOiB7XG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgcmVmOiBcIk93bmVyXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB9XG5cbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxucmVnaXN0ZXJTY2hlbWEoJ1ZlaGljbGUnLCBTY2hlbWEsIHsgb3JtOiAnbW9uZ29vc2UnIH0pO1xuLy9jcmVhdGUgbW9uZ29vc2UgdmlydHVhbCByZWYgZm9yIG93bmVyXG5TY2hlbWEudmlydHVhbChcIm93bmVyXCIsIHtcbiAgICByZWY6IFwiT3duZXJcIixcbiAgICBsb2NhbEZpZWxkOiBcIm93bmVySWRcIixcbiAgICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXG4gICAganVzdE9uZTogdHJ1ZVxufSk7XG5cbmNvbnN0IFZlaGljbGUgPSBtb25nb29zZS5tb2RlbChcIlZlaGljbGVcIiwgU2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IFZlaGljbGU7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQVQsQ0FBZ0I7RUFDM0JFLFlBQVksRUFBRTtJQUNWQyxJQUFJLEVBQUVDLE1BREk7SUFFVkMsUUFBUSxFQUFFLElBRkE7SUFHVkMsTUFBTSxFQUFFLElBSEU7SUFJVkMsU0FBUyxFQUFFO0VBSkQsQ0FEYTtFQU8zQkMsWUFBWSxFQUFFO0lBQ1ZMLElBQUksRUFBRUMsTUFESTtJQUVWQyxRQUFRLEVBQUUsSUFGQTtJQUdWRSxTQUFTLEVBQUU7RUFIRCxDQVBhO0VBWTNCRSxlQUFlLEVBQUU7SUFDYk4sSUFBSSxFQUFFTyxNQURPO0lBRWJMLFFBQVEsRUFBRSxJQUZHO0lBR2JFLFNBQVMsRUFBRTtFQUhFLENBWlU7RUFpQjNCSSxLQUFLLEVBQUU7SUFDSFIsSUFBSSxFQUFFQyxNQURIO0lBRUhDLFFBQVEsRUFBRSxJQUZQO0lBR0hFLFNBQVMsRUFBRTtFQUhSLENBakJvQjtFQXNCM0JLLEtBQUssRUFBRTtJQUNIVCxJQUFJLEVBQUVPLE1BREg7SUFFSEwsUUFBUSxFQUFFLElBRlA7SUFHSEUsU0FBUyxFQUFFO0VBSFIsQ0F0Qm9CO0VBMkIzQk0sS0FBSyxFQUFFO0lBQ0hWLElBQUksRUFBRUMsTUFESDtJQUVIVSxPQUFPLEVBQUUsT0FGTjtJQUdIUCxTQUFTLEVBQUU7RUFIUixDQTNCb0I7RUFnQzNCUSxXQUFXLEVBQUU7SUFDVFosSUFBSSxFQUFFQyxNQURHO0lBRVRDLFFBQVEsRUFBRSxJQUZEO0lBR1RDLE1BQU0sRUFBRSxJQUhDO0lBSVRDLFNBQVMsRUFBRTtFQUpGLENBaENjO0VBc0MzQlMsT0FBTyxFQUFFO0lBQ0xiLElBQUksRUFBRUYsaUJBQUEsQ0FBU0QsTUFBVCxDQUFnQmlCLEtBQWhCLENBQXNCQyxRQUR2QjtJQUVMQyxHQUFHLEVBQUUsT0FGQTtJQUdMZCxRQUFRLEVBQUU7RUFITDtBQXRDa0IsQ0FBaEIsRUE0Q1o7RUFDQ2UsVUFBVSxFQUFFO0FBRGIsQ0E1Q1ksQ0FBZjs7QUFnREEsSUFBQUMseUJBQUEsRUFBZSxTQUFmLEVBQTBCckIsTUFBMUIsRUFBa0M7RUFBRXNCLEdBQUcsRUFBRTtBQUFQLENBQWxDLEUsQ0FDQTs7QUFDQXRCLE1BQU0sQ0FBQ3VCLE9BQVAsQ0FBZSxPQUFmLEVBQXdCO0VBQ3BCSixHQUFHLEVBQUUsT0FEZTtFQUVwQkssVUFBVSxFQUFFLFNBRlE7RUFHcEJDLFlBQVksRUFBRSxLQUhNO0VBSXBCQyxPQUFPLEVBQUU7QUFKVyxDQUF4Qjs7QUFPQSxNQUFNQyxPQUFPLEdBQUcxQixpQkFBQSxDQUFTVSxLQUFULENBQWUsU0FBZixFQUEwQlgsTUFBMUIsQ0FBaEI7O2VBQ2UyQixPIn0=","map":{"version":3,"names":["Schema","mongoose","chasisNumber","type","String","required","unique","maxLength","manufacturer","manufactureYear","Number","model","price","color","default","plateNumber","ownerId","Types","ObjectId","ref","timestamps","registerSchema","orm","virtual","localField","foreignField","justOne","Vehicle"],"sourceRoot":"/home/rca/Desktop/restful-practical/server/src/database/models/","sources":["vehicle.model.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport { registerSchema } from \"swaggiffy\";\n\nconst Schema = mongoose.Schema({\n    chasisNumber: {\n        type: String,\n        required: true,\n        unique: true,\n        maxLength: 20,\n    },\n    manufacturer: {\n        type: String,\n        required: true,\n        maxLength: 60,\n    },\n    manufactureYear: {\n        type: Number,\n        required: true,\n        maxLength: 4,\n    },\n    model: {\n        type: String,\n        required: true,\n        maxLength: 60,\n    },\n    price: {\n        type: Number,\n        required: true,\n        maxLength: 10,\n    },\n    color: {\n        type: String,\n        default: \"white\",\n        maxLength: 60,\n    },\n    plateNumber: {\n        type: String,\n        required: true,\n        unique: true,\n        maxLength: 8,\n    },\n    ownerId: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Owner\",\n        required: false,\n    }\n\n}, {\n    timestamps: true\n});\n\nregisterSchema('Vehicle', Schema, { orm: 'mongoose' });\n//create mongoose virtual ref for owner\nSchema.virtual(\"owner\", {\n    ref: \"Owner\",\n    localField: \"ownerId\",\n    foreignField: \"_id\",\n    justOne: true\n});\n\nconst Vehicle = mongoose.model(\"Vehicle\", Schema);\nexport default Vehicle;"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAT,CAAgB;EAC3BE,YAAY,EAAE;IACVC,IAAI,EAAEC,MADI;IAEVC,QAAQ,EAAE,IAFA;IAGVC,MAAM,EAAE,IAHE;IAIVC,SAAS,EAAE;EAJD,CADa;EAO3BC,YAAY,EAAE;IACVL,IAAI,EAAEC,MADI;IAEVC,QAAQ,EAAE,IAFA;IAGVE,SAAS,EAAE;EAHD,CAPa;EAY3BE,eAAe,EAAE;IACbN,IAAI,EAAEO,MADO;IAEbL,QAAQ,EAAE,IAFG;IAGbE,SAAS,EAAE;EAHE,CAZU;EAiB3BI,KAAK,EAAE;IACHR,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHE,SAAS,EAAE;EAHR,CAjBoB;EAsB3BK,KAAK,EAAE;IACHT,IAAI,EAAEO,MADH;IAEHL,QAAQ,EAAE,IAFP;IAGHE,SAAS,EAAE;EAHR,CAtBoB;EA2B3BM,KAAK,EAAE;IACHV,IAAI,EAAEC,MADH;IAEHU,OAAO,EAAE,OAFN;IAGHP,SAAS,EAAE;EAHR,CA3BoB;EAgC3BQ,WAAW,EAAE;IACTZ,IAAI,EAAEC,MADG;IAETC,QAAQ,EAAE,IAFD;IAGTC,MAAM,EAAE,IAHC;IAITC,SAAS,EAAE;EAJF,CAhCc;EAsC3BS,OAAO,EAAE;IACLb,IAAI,EAAEF,iBAAA,CAASD,MAAT,CAAgBiB,KAAhB,CAAsBC,QADvB;IAELC,GAAG,EAAE,OAFA;IAGLd,QAAQ,EAAE;EAHL;AAtCkB,CAAhB,EA4CZ;EACCe,UAAU,EAAE;AADb,CA5CY,CAAf;;AAgDA,IAAAC,yBAAA,EAAe,SAAf,EAA0BrB,MAA1B,EAAkC;EAAEsB,GAAG,EAAE;AAAP,CAAlC,E,CACA;;AACAtB,MAAM,CAACuB,OAAP,CAAe,OAAf,EAAwB;EACpBJ,GAAG,EAAE,OADe;EAEpBK,UAAU,EAAE,SAFQ;EAGpBC,YAAY,EAAE,KAHM;EAIpBC,OAAO,EAAE;AAJW,CAAxB;;AAOA,MAAMC,OAAO,GAAG1B,iBAAA,CAASU,KAAT,CAAe,SAAf,EAA0BX,MAA1B,CAAhB;;eACe2B,O"}},"mtime":1657098589037}}